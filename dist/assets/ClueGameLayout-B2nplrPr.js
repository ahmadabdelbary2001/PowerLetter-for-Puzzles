import{j as y,c as L,d as W,r as o}from"./index-BDuDnl7r.js";import{B,g as D,G as H}from"./GameLayout-Ba_o99v5.js";const P=W("border-2 rounded-lg flex items-center justify-center font-bold",{variants:{size:{computer:"w-12 h-12 text-lg",tablet:"w-10 h-10 text-md",mobile:"w-8 h-8 text-sm"},filled:{true:"bg-primary border-primary text-primary-foreground",false:"bg-card"}},defaultVariants:{size:"mobile",filled:!1}});function O({char:n="",filled:c,size:r,className:e}){return y.jsx("div",{className:L(P({size:r,filled:c}),e),children:n})}function J({solution:n,currentWord:c,className:r}){const e=[...n],p=[...c],[i,t]=o.useState("mobile");return o.useEffect(()=>{const a=()=>{const l=window.innerWidth;l>=1024?t("computer"):l>=768?t("tablet"):t("mobile")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),y.jsx("div",{className:L("flex flex-wrap justify-center gap-2",r),children:e.map((a,l)=>y.jsx(O,{char:p[l]||"",filled:!!p[l],size:i},l))})}function V({letter:n,isSelected:c=!1,isHint:r=!1,disabled:e=!1,onClick:p,className:i,deviceType:t="mobile"}){return y.jsxs("button",{onClick:p,disabled:e||r,className:L("rounded-lg border-2 font-bold transition-all duration-300 relative","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","shadow-card",{"bg-green-100 border-green-500 text-green-800 cursor-default":r,"bg-primary border-primary text-primary-foreground":c&&!r,"bg-card border-border text-card-foreground hover:border-primary/30":!c&&!r,"opacity-80":e},i),style:{width:t==="computer"?"min(8vw, 56px)":t==="tablet"?"min(10vw, 56px)":"min(9vw, 48px)",height:t==="computer"?"min(8vw, 56px)":t==="tablet"?"min(10vw, 56px)":"min(9vw, 48px)",fontSize:t==="computer"?"min(3vw, 18px)":t==="tablet"?"min(4vw, 18px)":"min(4.2vw, 15px)"},children:[n,r&&y.jsx("span",{className:"absolute -top-1 -right-1 text-xs",children:"ðŸ”’"})]})}function Q({letters:n,selectedIndices:c,onLetterClick:r,disabled:e=!1,hintIndices:p,className:i}){const t=n,a=s=>s,[l,x]=o.useState("mobile");o.useEffect(()=>{const s=()=>{const m=window.innerWidth;m>=1024?x("computer"):m>=768?x("tablet"):x("mobile")};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const u=()=>{const s=t.length;return l==="computer"?s<=12?6:s<=18?9:12:l==="tablet"?s<=12||s<=18?6:8:s<=12?4:(s<=18,6)},d=(s,m)=>y.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:s.map((b,S)=>{const w=a(m+S),E=c.includes(w),T=p.includes(w);return y.jsx(V,{letter:b,isSelected:E,isHint:T,disabled:e,onClick:()=>r(w),deviceType:l},w)})}),f=u(),h=[];for(let s=0;s<t.length;s+=f)h.push(t.slice(s,s+f));return y.jsx("div",{className:L("space-y-4",i),children:h.map((s,m)=>y.jsx("div",{children:d(s,m*f)},m))})}const A=n=>n.toLowerCase().trim();function U(n,c={}){const{getPoints:r=()=>1}=c,{gameState:e,currentLevel:p,solution:i,dispatch:t,setNotification:a,nextLevel:l,gameModeState:x}=n,{gameMode:u,teams:d,currentTeam:f,setCurrentTeam:h,updateScore:s,nextTurn:m,consumeHint:b}=x,[S,w]=o.useState([]),[E,T]=o.useState(new Set);o.useEffect(()=>{u==="competitive"&&d.length>0&&h(n.currentLevelIndex%d.length)},[n.currentLevelIndex,u,d.length,h]),o.useEffect(()=>{w([]),T(new Set)},[n.currentLevelIndex]);const j=o.useCallback(()=>{if(e.gameState!=="playing"||!p)return;if(A(e.answerSlots.join(""))===A(i))if(t({type:"SET_GAME_STATE",payload:"won"}),u==="competitive"){const v=r(p);s(d[f].id,v),a({messageKey:"congrats",type:"success"}),setTimeout(()=>l(),2e3)}else a({messageKey:"congrats",type:"success"});else{t({type:"SET_GAME_STATE",payload:"failed"});const v=e.answerSlots.join("");if(v&&!S.includes(v)&&w(C=>[...C,v]),a({messageKey:"wrongAnswer",type:"error"}),u==="competitive"){const C=new Set(E).add(f);T(C),C.size>=d.length?(m("lose"),setTimeout(()=>{t({type:"SHOW",solution:i,letters:e.letters}),a({messageKey:"solutionWas",options:{solution:i},type:"error"}),setTimeout(()=>l(),2500)},2e3)):(m("lose"),setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"})},2e3))}else setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"})},2e3)}},[e,p,i,u,d,f,r,S,s,a,m,l,t,E]),M=o.useCallback(g=>{e.gameState==="playing"&&t({type:"PLACE",gridIndex:g,letter:e.letters[g]})},[e,t]),k=o.useCallback(()=>t({type:"REMOVE_LAST"}),[t]),G=o.useCallback(()=>t({type:"CLEAR"}),[t]),_=o.useCallback(()=>{e.gameState==="playing"&&(t({type:"SHOW",solution:i,letters:e.letters}),a({messageKey:"solutionWas",options:{solution:i},type:"error"}),u==="competitive"?(m("lose"),setTimeout(()=>l(),2500)):t({type:"SET_GAME_STATE",payload:"won"}))},[t,i,e,u,m,l,a]),R=o.useCallback(()=>{if(e.gameState==="playing"){if(u==="competitive"&&!b(d[f].id)){a({messageKey:"noMoreHints",type:"error"});return}t({type:"HINT",solution:i,letters:e.letters})}},[t,i,e,u,b,d,f,a]),z=o.useMemo(()=>e.gameState==="playing"&&e.slotIndices.some(g=>g!==null&&!e.hintIndices.includes(g)),[e]),I=o.useMemo(()=>e.gameState==="playing"&&e.slotIndices.filter(g=>g!==null).length>e.hintIndices.length,[e]),N=o.useMemo(()=>e.gameState==="playing"&&e.answerSlots.every(g=>g!==""),[e]),K=o.useMemo(()=>e.gameState!=="playing"?!1:u!=="competitive"||(d[f]?.hintsRemaining??0)>0,[e.gameState,u,d,f]);return{...n,wrongAnswers:S,onLetterClick:M,onRemove:k,onClear:G,onCheck:j,onShow:_,onHint:R,canRemove:z,canClear:I,canCheck:N,canHint:K,gameMode:u}}class X extends B{generateLetters(c,r,e){return D(c,r,e,this.isKidsMode())}}const Y=({promptContent:n,solutionContent:c,letterOptionsContent:r,gameControlsContent:e,wrongAnswersContent:p,...i})=>y.jsxs(H,{...i,children:[n,c,r,p,e]});export{X as C,Q as L,J as S,Y as a,U as u};
