import{j as y,f as A,g as q,r,b as F,c as J}from"./index-B4fPtU2R.js";import{a as Q,N as U}from"./Notification-7_OZ9wn8.js";import{B as X,g as Y,G as Z}from"./GameLayout-D84wNv_h.js";const ee=q("border-2 rounded-lg flex items-center justify-center font-bold",{variants:{size:{computer:"w-12 h-12 text-lg",tablet:"w-10 h-10 text-md",mobile:"w-8 h-8 text-sm"},filled:{true:"bg-primary border-primary text-primary-foreground",false:"bg-card"}},defaultVariants:{size:"mobile",filled:!1}});function te({char:c="",filled:u,size:o,className:m}){return y.jsx("div",{className:A(ee({size:o,filled:u}),m),children:c})}function ae({solution:c,currentWord:u,className:o}){const m=[...c],g=[...u],[w,n]=r.useState("mobile");return r.useEffect(()=>{const d=()=>{const a=window.innerWidth;a>=1024?n("computer"):a>=768?n("tablet"):n("mobile")};return d(),window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),y.jsx("div",{className:A("flex flex-wrap justify-center gap-2",o),children:m.map((d,a)=>y.jsx(te,{char:g[a]||"",filled:!!g[a],size:w},a))})}function se({letter:c,isSelected:u=!1,isHint:o=!1,disabled:m=!1,onClick:g,className:w,deviceType:n="mobile"}){return y.jsxs("button",{onClick:g,disabled:m||o,className:A("rounded-lg border-2 font-bold transition-all duration-300 relative","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","shadow-card",{"bg-green-100 border-green-500 text-green-800 cursor-default":o,"bg-primary border-primary text-primary-foreground":u&&!o,"bg-card border-border text-card-foreground hover:border-primary/30":!u&&!o,"opacity-80":m},w),style:{width:n==="computer"?"min(8vw, 56px)":n==="tablet"?"min(10vw, 56px)":"min(9vw, 48px)",height:n==="computer"?"min(8vw, 56px)":n==="tablet"?"min(10vw, 56px)":"min(9vw, 48px)",fontSize:n==="computer"?"min(3vw, 18px)":n==="tablet"?"min(4vw, 18px)":"min(4.2vw, 15px)"},children:[c,o&&y.jsx("span",{className:"absolute -top-1 -right-1 text-xs",children:"ðŸ”’"})]})}function ie({letters:c,selectedIndices:u,onLetterClick:o,disabled:m=!1,hintIndices:g,className:w}){const n=c,d=t=>t,[a,i]=r.useState("mobile");r.useEffect(()=>{const t=()=>{const h=window.innerWidth;h>=1024?i("computer"):h>=768?i("tablet"):i("mobile")};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const E=()=>{const t=n.length;return a==="computer"?t<=12?6:t<=18?9:12:a==="tablet"?t<=12||t<=18?6:8:t<=12?4:(t<=18,6)},p=(t,h)=>y.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:t.map((j,f)=>{const l=d(h+f),v=u.includes(l),C=g.includes(l);return y.jsx(se,{letter:j,isSelected:v,isHint:C,disabled:m,onClick:()=>o(l),deviceType:a},l)})}),e=E(),s=[];for(let t=0;t<n.length;t+=e)s.push(n.slice(t,t+e));return y.jsx("div",{className:A("space-y-4",w),children:s.map((t,h)=>y.jsx("div",{children:p(t,h*e)},h))})}const N=c=>c.toLowerCase().trim();function le({engine:c,language:u,categories:o,difficulty:m,getPoints:g=()=>1}){const{loading:w,levels:n,currentLevel:d,currentLevelIndex:a,solution:i,notification:E,setNotification:p,gameState:e,dispatch:s,nextLevel:t,prevLevel:h,resetLevel:j}=Q(c,{language:u,categories:o,difficulty:m}),{gameMode:f,teams:l,currentTeam:v,setCurrentTeam:C,updateScore:M,nextTurn:T,consumeHint:k}=F(),{t:S}=J(),[G,_]=r.useState([]),[R,z]=r.useState(new Set);r.useEffect(()=>{f==="competitive"&&l.length>0&&C(a%l.length)},[a,f,l.length,C]),r.useEffect(()=>{_([]),z(new Set)},[a]);const I=r.useCallback(()=>{if(e.gameState!=="playing"||!d)return;if(N(e.answerSlots.join(""))===N(i))if(s({type:"SET_GAME_STATE",payload:"won"}),f==="competitive"){const b=g(d);M(l[v].id,b),p({message:`${S.congrats} +${b}`,type:"success"}),setTimeout(()=>t(),2e3)}else p({message:S.congrats,type:"success"});else{s({type:"SET_GAME_STATE",payload:"failed"});const b=e.answerSlots.join("");if(b&&!G.includes(b)&&_(L=>[...L,b]),p({message:S.wrongAnswer,type:"error"}),f==="competitive"){const L=new Set(R).add(v);z(L),L.size>=l.length?(T("lose"),setTimeout(()=>{s({type:"SHOW",solution:i,letters:e.letters}),p({message:`${S.solutionWas}: ${i}`,type:"error"}),setTimeout(()=>t(),2500)},2e3)):(T("lose"),setTimeout(()=>{s({type:"CLEAR"}),s({type:"SET_GAME_STATE",payload:"playing"})},2e3))}else setTimeout(()=>{s({type:"CLEAR"}),s({type:"SET_GAME_STATE",payload:"playing"})},2e3)}},[e,d,i,f,l,v,g,G,M,p,T,t,s,S,R]),W=r.useCallback(x=>{e.gameState==="playing"&&s({type:"PLACE",gridIndex:x,letter:e.letters[x]})},[e,s]),B=r.useCallback(()=>s({type:"REMOVE_LAST"}),[s]),$=r.useCallback(()=>s({type:"CLEAR"}),[s]),H=r.useCallback(()=>{e.gameState==="playing"&&(s({type:"SHOW",solution:i,letters:e.letters}),p({message:`${S.solutionWas}: ${i}`,type:"error"}),f==="competitive"?(T("lose"),setTimeout(()=>t(),2500)):s({type:"SET_GAME_STATE",payload:"won"}))},[s,i,e.letters,e.gameState,f,T,t,p,S.solutionWas]),D=r.useCallback(()=>{if(e.gameState==="playing"){if(f==="competitive"&&!k(l[v].id)){p({message:S.noHintsLeft,type:"error"});return}s({type:"HINT",solution:i,letters:e.letters})}},[s,i,e.letters,e.gameState,f,k,l,v,p,S.noHintsLeft]),O=r.useMemo(()=>e.gameState==="playing"&&e.slotIndices.some(x=>x!==null&&!e.hintIndices.includes(x)),[e]),V=r.useMemo(()=>e.gameState==="playing"&&e.slotIndices.filter(x=>x!==null).length>e.hintIndices.length,[e]),P=r.useMemo(()=>e.gameState==="playing"&&e.answerSlots.every(x=>x!==""),[e]),K=r.useMemo(()=>e.gameState!=="playing"?!1:f!=="competitive"||(l[v]?.hintsRemaining??0)>0,[e.gameState,f,l,v]);return{loading:w,levels:n,currentLevel:d,currentLevelIndex:a,solution:i,notification:E,setNotification:p,gameState:e,dispatch:s,nextLevel:t,prevLevel:h,resetLevel:j,letters:e.letters,wrongAnswers:G,onLetterClick:W,onRemove:B,onClear:$,onCheck:I,onShow:H,onHint:D,canRemove:O,canClear:V,canCheck:P,canHint:K}}class ce extends X{generateLetters(u,o,m){return Y(u,o,m,this.isKidsMode())}}const ue=({title:c,levelIndex:u,onBack:o,difficulty:m,instructions:g,notification:w,layoutType:n,promptContent:d,solutionContent:a,letterOptionsContent:i,gameControlsContent:E,wrongAnswersContent:p})=>{const e=w?.message??null,s=w?.type??"info";return y.jsxs(Z,{title:c,levelIndex:u,onBack:o,difficulty:m,instructions:g,layoutType:n,children:[e&&y.jsx(U,{message:e,type:s}),d,a,i,p,E]})};export{ce as C,ie as L,ae as S,ue as a,le as u};
