import{_ as e,a as D,b as w,u as C,c as V,r as u,j as a,B as O,A as S,e as b}from"./index-CAHgHOo8.js";import{S as k,L as G}from"./LetterGrid-DWfjR-aZ.js";import{G as N}from"./GameControls-CrYqBSiz.js";import{s as $,g as M,u as B,G as z,N as F}from"./Notification-DiPrnSkn.js";import{V as K}from"./volume-2-Ln90c9rj.js";import"./GameButton-Cei8-RWo.js";import"./circle-check-big-DZdG_xf-.js";class U{async loadLevels(_){const{language:l,categories:d}=_,c=["animals","fruits","shapes"],h=(d.includes("general")?c:d).map(async p=>{try{const i=`/src/data/${l}/image-clue/${p}/data.json`,s=Object.assign({"/src/data/ar/clue/animals/ar-clue-animals-easy.json":()=>e(()=>import("./ar-clue-animals-easy-B_GJKLA_.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-hard.json":()=>e(()=>import("./ar-clue-animals-hard-7EfMbXs4.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-medium.json":()=>e(()=>import("./ar-clue-animals-medium-Bcn1oCUk.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-words.json":()=>e(()=>import("./ar-clue-animals-words-DxH5pZeF.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-easy.json":()=>e(()=>import("./ar-clue-geography-easy-B_kcdeCx.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-hard.json":()=>e(()=>import("./ar-clue-geography-hard-BCuCMNGp.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-medium.json":()=>e(()=>import("./ar-clue-geography-medium-CkoNY3Du.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-words.json":()=>e(()=>import("./ar-clue-geography-words-C7oqRjv9.js"),[]),"/src/data/ar/clue/science/ar-clue-science-easy.json":()=>e(()=>import("./ar-clue-science-easy-f07zg_lU.js"),[]),"/src/data/ar/clue/science/ar-clue-science-hard.json":()=>e(()=>import("./ar-clue-science-hard-CV32qLEY.js"),[]),"/src/data/ar/clue/science/ar-clue-science-medium.json":()=>e(()=>import("./ar-clue-science-medium-BtIrOjNp.js"),[]),"/src/data/ar/clue/science/ar-clue-science-words.json":()=>e(()=>import("./ar-clue-science-words-DpIQpR0-.js"),[]),"/src/data/ar/formation/ar-formation-easy.json":()=>e(()=>import("./ar-formation-easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/ar-formation-hard.json":()=>e(()=>import("./ar-formation-hard-CRxFgu7h.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits/data.json":()=>e(()=>import("./data-CenmuYLK.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/ar-flow-easy.json":()=>e(()=>import("./ar-flow-easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/ar-flow-medium.json":()=>e(()=>import("./ar-flow-medium-BL27Zp8Y.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/clue/animals/en-clue-animals-easy.json":()=>e(()=>import("./en-clue-animals-easy-vc2CgBiI.js"),[]),"/src/data/en/clue/animals/en-clue-animals-hard.json":()=>e(()=>import("./en-clue-animals-hard-BmQiyFGH.js"),[]),"/src/data/en/clue/animals/en-clue-animals-medium.json":()=>e(()=>import("./en-clue-animals-medium-CDppU-oU.js"),[]),"/src/data/en/clue/animals/en-clue-animals-words.json":()=>e(()=>import("./en-clue-animals-words-OyMRQ2OB.js"),[]),"/src/data/en/clue/geography/en-clue-geography-easy.json":()=>e(()=>import("./en-clue-geography-easy-v49lXgS1.js"),[]),"/src/data/en/clue/geography/en-clue-geography-hard.json":()=>e(()=>import("./en-clue-geography-hard-Hc9ZYG1D.js"),[]),"/src/data/en/clue/geography/en-clue-geography-medium.json":()=>e(()=>import("./en-clue-geography-medium-Yt4_5ZKV.js"),[]),"/src/data/en/clue/geography/en-clue-geography-words.json":()=>e(()=>import("./en-clue-geography-words-BJFrdNPX.js"),[]),"/src/data/en/clue/science/en-clue-science-easy.json":()=>e(()=>import("./en-clue-science-easy-CXDUIzZm.js"),[]),"/src/data/en/clue/science/en-clue-science-hard.json":()=>e(()=>import("./en-clue-science-hard-Dqcig8Ht.js"),[]),"/src/data/en/clue/science/en-clue-science-medium.json":()=>e(()=>import("./en-clue-science-medium-Dm_81XWt.js"),[]),"/src/data/en/clue/science/en-clue-science-words.json":()=>e(()=>import("./en-clue-science-words-BdiwMlAj.js"),[]),"/src/data/en/formation/en-formation-easy.json":()=>e(()=>import("./en-formation-easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits/data.json":()=>e(()=>import("./data-OxJ4m8-5.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/en-flow-easy.json":()=>e(()=>import("./en-flow-easy-DqbTaQjR.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])})[i];return s?((await s()).default?.levels||[]).map(r=>typeof r=="object"&&r!==null&&"id"in r&&"image"in r&&"sound"in r&&"solution"in r?{id:String(r.id),image:String(r.image),sound:String(r.sound),solution:String(r.solution)}:null).filter(r=>r!==null):(console.warn(`Module not found for path: ${i}`),[])}catch(i){return console.error(`ImgClueGameEngine: Failed to load levels for ${l}/${p}.`,i),[]}}),g=(await Promise.all(h)).flat();return g.length===0?[{id:"error-level",image:"/assets/images/error.png",sound:"",solution:"ERROR"}]:$(g)}generateLetters(_,l,d){return M(_,l,d,!0)}}const x=new U;function W(){const n=D(),_=w(),{language:l,categories:d}=C(),{t:c}=V(),{loading:f,levels:h,currentLevel:m,solution:g,notification:p,setNotification:i,gameState:o,dispatch:s,nextLevel:j}=B(x,{language:l,categories:d}),[E,r]=u.useState([]),y=u.useRef(null),A=t=>`${"/PowerLetter-for-Puzzles/".replace(/\/$/,"")}/${t.replace(/^\//,"")}`,T=u.useCallback(()=>{y.current?.play().catch(t=>console.error("Audio play failed:",t))},[]),R=u.useCallback(t=>{o.gameState==="playing"&&s({type:"PLACE",gridIndex:t,letter:E[t]})},[o.gameState,E,s]),L=u.useCallback(()=>s({type:"REMOVE_LAST"}),[s]),I=u.useCallback(()=>s({type:"CLEAR"}),[s]),v=u.useCallback(()=>{if(o.gameState!=="playing")return;o.answerSlots.join("")===g?(s({type:"SET_GAME_STATE",payload:"won"}),i({message:c.congrats,type:"success"})):(s({type:"SET_GAME_STATE",payload:"failed"}),i({message:c.wrongAnswer,type:"error"}),setTimeout(()=>{s({type:"CLEAR"}),s({type:"SET_GAME_STATE",payload:"playing"}),i(null)},1500))},[o,g,c,s,i]),P=u.useCallback(()=>n(`/game-mode/${_.gameType}`),[n,_.gameType]);return u.useEffect(()=>{m&&x.generateLetters&&r(x.generateLetters(m.solution,"easy",l))},[m,l]),{loading:f,levels:h,currentLevel:m,solution:g,letters:E,notification:p,audioRef:y,gameState:o.gameState,answerSlots:o.answerSlots,slotIndices:o.slotIndices,hintIndices:o.hintIndices,getAssetPath:A,playSound:T,onCheck:v,onLetterClick:R,onRemove:L,onClear:I,nextLevel:j,handleBack:P}}const ae=()=>{const{t:n,dir:_}=V(),{loading:l,levels:d,currentLevel:c,solution:f,letters:h,notification:m,audioRef:g,gameState:p,answerSlots:i,slotIndices:o,hintIndices:s,getAssetPath:j,playSound:E,onCheck:r,onLetterClick:y,onRemove:A,onClear:T,nextLevel:R,handleBack:L}=W();if(l)return a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsxs("p",{children:[n.loading,"..."]})});if(!c||c.solution==="ERROR")return a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[a.jsx("p",{className:"text-xl font-semibold",children:n.noLevelsFound}),a.jsx(O,{onClick:L,children:n.back})]});const I=d.findIndex(t=>t.id===c.id),v=m?.message??null,P=m?.type??"info";return a.jsxs(z,{title:n.imageClueTitle,levelIndex:I,onBack:L,layoutType:"image",children:[v&&a.jsx(F,{message:v,type:P}),a.jsxs("div",{className:"relative aspect-video bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:[a.jsx("img",{src:j(c.image),alt:f,className:"max-h-full max-w-full object-contain"}),a.jsx(O,{size:"icon",onClick:E,className:"absolute top-3 right-3 rounded-full bg-black/50 hover:bg-black/70",children:a.jsx(K,{className:"h-6 w-6 text-white"})}),a.jsx("audio",{ref:g,src:j(c.sound),preload:"auto"})]}),a.jsx(k,{solution:f,currentWord:i.join("")}),a.jsx(G,{letters:h,selectedIndices:o.filter(t=>t!==null),onLetterClick:y,disabled:p!=="playing",hintIndices:s}),p==="won"?a.jsxs(O,{onClick:R,className:"w-full bg-green-600 hover:bg-green-700 text-lg py-6",children:[n.next," ",_==="rtl"?a.jsx(S,{className:"ml-2"}):a.jsx(b,{className:"ml-2"})]}):a.jsx(N,{onRemoveLetter:A,onClearAnswer:T,onCheckAnswer:r,canRemove:o.some(t=>t!==null),canClear:o.some(t=>t!==null),canCheck:i.every(t=>t!==""),gameState:p,labels:{remove:n.remove,clear:n.clear,check:n.check,hint:"",showSolution:"",reset:"",prev:"",next:""},isKidsMode:!0})]})};export{ae as default};
