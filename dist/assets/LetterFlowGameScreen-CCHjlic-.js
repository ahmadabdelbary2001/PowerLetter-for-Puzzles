import{_ as l,u as Re,a as De,b as ye,c as _e,r as E,j as v,f as se}from"./index-CN5lWD5F.js";import{s as Me,u as Oe,G as ke,N as Ve}from"./Notification-lmh7io55.js";import{G as Ne}from"./GameControls-DO6I8kQe.js";import"./GameButton-D5zi3iW5.js";import"./circle-check-big-DeCOWU1k.js";function Se(n,r,h=70,c=50){if(r<=0)return`hsl(0, ${h}%, ${c}%)`;const y=Math.round(n*360/r)%360,j=c>50?c*.9:c*1.1;return`hsl(${y}, ${h}%, ${j}%)`}class Ue{async loadLevels(r){const{language:h,difficulty:c}=r;if(!c)return[];try{const y=`/src/data/${h}/letter-flow/${h}-flow-${c}.json`,T=Object.assign({"/src/data/ar/clue/animals/ar-clue-animals-easy.json":()=>l(()=>import("./ar-clue-animals-easy-B_GJKLA_.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-hard.json":()=>l(()=>import("./ar-clue-animals-hard-7EfMbXs4.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-medium.json":()=>l(()=>import("./ar-clue-animals-medium-Bcn1oCUk.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-words.json":()=>l(()=>import("./ar-clue-animals-words-DxH5pZeF.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-easy.json":()=>l(()=>import("./ar-clue-geography-easy-B_kcdeCx.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-hard.json":()=>l(()=>import("./ar-clue-geography-hard-BCuCMNGp.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-medium.json":()=>l(()=>import("./ar-clue-geography-medium-CkoNY3Du.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-words.json":()=>l(()=>import("./ar-clue-geography-words-C7oqRjv9.js"),[]),"/src/data/ar/clue/science/ar-clue-science-easy.json":()=>l(()=>import("./ar-clue-science-easy-f07zg_lU.js"),[]),"/src/data/ar/clue/science/ar-clue-science-hard.json":()=>l(()=>import("./ar-clue-science-hard-CV32qLEY.js"),[]),"/src/data/ar/clue/science/ar-clue-science-medium.json":()=>l(()=>import("./ar-clue-science-medium-BtIrOjNp.js"),[]),"/src/data/ar/clue/science/ar-clue-science-words.json":()=>l(()=>import("./ar-clue-science-words-DpIQpR0-.js"),[]),"/src/data/ar/formation/ar-formation-easy.json":()=>l(()=>import("./ar-formation-easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/ar-formation-hard.json":()=>l(()=>import("./ar-formation-hard-CRxFgu7h.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>l(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits/data.json":()=>l(()=>import("./data-CenmuYLK.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>l(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/ar-flow-easy.json":()=>l(()=>import("./ar-flow-easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/ar-flow-medium.json":()=>l(()=>import("./ar-flow-medium-BL27Zp8Y.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>l(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/clue/animals/en-clue-animals-easy.json":()=>l(()=>import("./en-clue-animals-easy-vc2CgBiI.js"),[]),"/src/data/en/clue/animals/en-clue-animals-hard.json":()=>l(()=>import("./en-clue-animals-hard-BmQiyFGH.js"),[]),"/src/data/en/clue/animals/en-clue-animals-medium.json":()=>l(()=>import("./en-clue-animals-medium-CDppU-oU.js"),[]),"/src/data/en/clue/animals/en-clue-animals-words.json":()=>l(()=>import("./en-clue-animals-words-OyMRQ2OB.js"),[]),"/src/data/en/clue/geography/en-clue-geography-easy.json":()=>l(()=>import("./en-clue-geography-easy-v49lXgS1.js"),[]),"/src/data/en/clue/geography/en-clue-geography-hard.json":()=>l(()=>import("./en-clue-geography-hard-Hc9ZYG1D.js"),[]),"/src/data/en/clue/geography/en-clue-geography-medium.json":()=>l(()=>import("./en-clue-geography-medium-Yt4_5ZKV.js"),[]),"/src/data/en/clue/geography/en-clue-geography-words.json":()=>l(()=>import("./en-clue-geography-words-BJFrdNPX.js"),[]),"/src/data/en/clue/science/en-clue-science-easy.json":()=>l(()=>import("./en-clue-science-easy-CXDUIzZm.js"),[]),"/src/data/en/clue/science/en-clue-science-hard.json":()=>l(()=>import("./en-clue-science-hard-Dqcig8Ht.js"),[]),"/src/data/en/clue/science/en-clue-science-medium.json":()=>l(()=>import("./en-clue-science-medium-Dm_81XWt.js"),[]),"/src/data/en/clue/science/en-clue-science-words.json":()=>l(()=>import("./en-clue-science-words-BdiwMlAj.js"),[]),"/src/data/en/formation/en-formation-easy.json":()=>l(()=>import("./en-formation-easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>l(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits/data.json":()=>l(()=>import("./data-OxJ4m8-5.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>l(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/en-flow-easy.json":()=>l(()=>import("./en-flow-easy-DqbTaQjR.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>l(()=>import("./data-BDxquZu-.js"),[])})[y];return T?((await T()).default?.levels||[]).map(d=>{if(typeof d=="object"&&d!==null&&"id"in d&&"solutionWord"in d&&"gridSize"in d&&"endpoints"in d){const{width:V,height:u}=d.gridSize,O=[];for(let f=0;f<u;f++)for(let e=0;e<V;e++)O.push({x:e,y:f,letter:"",isUsed:!1});const N=d.endpoints,k=Array.from(new Set(N.map(f=>f.letter))),$=new Map;k.forEach((f,e)=>{$.set(f,Se(e,k.length,72,48))}),N.forEach(f=>{const e=f.y*V+f.x,s=$.get(f.letter);e<O.length&&(O[e]={x:f.x,y:f.y,letter:f.letter,isUsed:!1,color:s})});const _=d;return{id:String(_.id),difficulty:c,words:[_.solutionWord],board:O,solution:_.solutionWord,endpoints:_.endpoints.map(f=>({...f,color:$.get(f.letter)}))}}return null}).filter(d=>d!==null):[]}catch(y){return console.error(`LetterFlowGameEngine: Failed to load levels for ${h}/${c}.`,y),[{id:"error",difficulty:"easy",words:[],board:[],solution:"",endpoints:[]}]}}generateBoard(r,h,c,y){if(!y)return[];const j=Me(y.split("")),T=Math.ceil(Math.sqrt(j.length)),R=[];for(let C=0;C<T;C++)for(let d=0;d<T;d++){const V=C*T+d;V<j.length&&R.push({x:d,y:C,letter:j[V],isUsed:!1})}return R}}const ge=new Ue,ue=24;function Fe(n,r=ue,h=68,c=48){return`hsl(${Math.round(n*360/r)%360}, ${h}%, ${c}%)`}function ve(n){if(!n)return;let r=0;const h=n.toUpperCase();for(let y=0;y<h.length;y++)r=(r<<5)-r+h.charCodeAt(y),r|=0;const c=Math.abs(r)%ue;return Fe(c,ue)}function Be(){const n=Re(),r=De(),{language:h,categories:c,difficulty:y,gameMode:j,teams:T,currentTeam:R,consumeHint:C}=ye(),{t:d}=_e(),{loading:V,currentLevel:u,currentLevelIndex:O,nextLevel:N}=Oe(ge,{language:h,categories:c,difficulty:y}),[k,$]=E.useState([]),[_,f]=E.useState([]),[e,s]=E.useState([]),[D,P]=E.useState(null),[x,a]=E.useState(null),[p,S]=E.useState("playing");E.useEffect(()=>{if(u){if(u.board&&u.board.length>0&&u.board.some(t=>t.letter))$(u.board.map(t=>({...t})));else{const t=ge.generateBoard("",u.difficulty,h,u.board.map(o=>o.letter).join(""));$(t)}s([]),f([]),a(null),S("playing")}},[u,h]);const w=E.useMemo(()=>[...new Set(u?.endpoints.map(t=>t.letter)||[])],[u]),M=E.useMemo(()=>{const t=new Map;return u?.endpoints.forEach(o=>t.set(`${o.x}-${o.y}`,o.color)),t},[u]),q=E.useCallback(t=>{if(t)return ve(t)},[]),H=E.useCallback(t=>u?u.endpoints.some(o=>o.x===t.x&&o.y===t.y&&o.letter===t.letter):!1,[u]),fe=E.useCallback((t,o)=>{const m=Math.abs(t.x-o.x),b=Math.abs(t.y-o.y);return m===1&&b===0||m===0&&b===1},[]),me=E.useCallback(t=>{if(t.length<2)return!0;for(let o=1;o<t.length;o++)if(!fe(t[o-1],t[o]))return!1;return!0},[fe]),he=E.useCallback((t,o,m)=>{if(!t.letter){if(t.isUsed){if(m){const b=e.find(U=>U.word===m);if(b&&b.cells.some(U=>U.x===t.x&&U.y===t.y))return!1}return!0}return!1}return!(o&&t.x===o.x&&t.y===o.y||m&&t.letter===m&&H(t))},[e,H]),ne=E.useCallback(t=>e.length===0?[]:e.filter(o=>o.cells.some(m=>t.some(b=>b.x===m.x&&b.y===m.y))),[e]),A=E.useCallback((t,o=1200)=>{P(t),o>0&&setTimeout(()=>P(null),o)},[]),we=E.useCallback(t=>{if(!H(t))return;const o=e.find(m=>m.word===t.letter);o&&(s(m=>m.filter(b=>b.word!==t.letter)),$(m=>m.map(b=>{const U=o.cells.some(F=>F.x===b.x&&F.y===b.y),G=M.get(`${b.x}-${b.y}`);return U?{...b,isUsed:!1,color:G??void 0}:b})),A(`Removed connection for ${t.letter}`,900)),a(t.letter),f([t])},[e,H,A,M]),be=E.useCallback(t=>{if(!x||_.length===0)return;const o=_[0]||null;if(he(t,o,x)||!(t.letter===x||t.letter===""))return;const m=_[_.length-1];if(m&&m.x===t.x&&m.y===t.y)return;const b=Math.abs(t.x-m.x),U=Math.abs(t.y-m.y);if(b===1&&U===1||b>1||U>1)return;const G=_.findIndex(W=>W.x===t.x&&W.y===t.y);if(G!==-1){f(W=>W.slice(0,G+1));return}if(t.isUsed)return;const F=[..._,t];if(!me(F))return;if(H(t)&&!(_.length>0&&_[0].x===t.x&&_[0].y===t.y)&&t.letter===x){const W=ne(F);W.length>0&&(s(L=>L.filter(I=>!W.includes(I))),$(L=>L.map(I=>{const K=W.some(Q=>Q.cells.some(Z=>Z.x===I.x&&Z.y===I.y)),te=M.get(`${I.x}-${I.y}`);return K?{...I,isUsed:!1,color:te??void 0}:I})),A("Existing connection(s) removed by new connection",1100));const oe=k.find(L=>L.x===F[0].x&&L.y===F[0].y)?.color||q(F[0].letter);$(L=>L.map(I=>{const K=F.some(Q=>Q.x===I.x&&Q.y===I.y),te=M.get(`${I.x}-${I.y}`);return K?{...I,isUsed:!0,color:te??oe}:I}));const ie={word:x,cells:F.map(L=>{const I=k.find(K=>K.x===L.x&&K.y===L.y);return{...L,color:I&&I.color||oe}}),startIndex:0};s(L=>[...L.filter(K=>K.word!==x),ie]),A(`Connected ${x}`,900),a(null),f([]);const le=[...e.map(L=>L.word),x].filter(Boolean),ee=Array.from(new Set(le));w.every(L=>ee.includes(L))&&(A(d.congrats,2e3),j==="competitive"?setTimeout(()=>N(),2e3):S("won"))}else f(F)},[x,_,he,H,me,ne,k,q,e,w,N,d,A,M,j]),je=E.useCallback(()=>{if(_.length>0){const t=_[_.length-1];H(t)&&!(_.length>1&&_[0].x===t.x&&_[0].y===t.y)&&t.letter===x||(a(null),f([]),A("Path must connect two endpoints!",1200))}},[_,H,x,A]),Ce=E.useCallback(()=>{if(!u||e.length>=u.endpoints.length/2)return;if(j==="competitive"&&!C(T[R].id)){A(d.noHintsLeft,2e3);return}const t=w.filter(i=>!e.some(g=>g.word===i));if(t.length===0)return;const o=t[0],m=u.endpoints.filter(i=>i.letter===o);if(m.length<2){A(`No endpoints found for ${o}`,1500);return}const b=m[0],U=m[1],G=new Map;k.forEach(i=>G.set(`${i.x}-${i.y}`,i));const F=k.map(i=>i.x),ae=k.map(i=>i.y),W=Math.min(...F),oe=Math.max(...F),ie=Math.min(...ae),le=Math.max(...ae),ee=`${b.x}-${b.y}`,ce=`${U.x}-${U.y}`,L=[ee],I=new Set([ee]),K=new Map;K.set(ee,null);const te=(i,g)=>{const B=`${i}-${g}`,X=G.get(B);return X?!X.letter||X.letter===o:!1},Q=i=>{const[g,B]=i.split("-").map(z=>parseInt(z,10));return[[g+1,B],[g-1,B],[g,B+1],[g,B-1]].filter(([z,J])=>z>=W&&z<=oe&&J>=ie&&J<=le).map(([z,J])=>`${z}-${J}`)};let Z=!1;for(;L.length>0&&!Z;){const i=L.shift();if(i===ce){Z=!0;break}for(const g of Q(i)){if(I.has(g))continue;const[B,X]=g.split("-").map(z=>parseInt(z,10));te(B,X)&&(I.add(g),K.set(g,i),L.push(g))}}if(!Z){A(`No path found for ${o}`,1600);return}const Y=[];let re=ce;for(;re;){const i=G.get(re);if(!i)break;Y.push({...i}),re=K.get(re)??null}Y.reverse();const de=ne(Y);de.length>0&&(s(i=>i.filter(g=>!de.includes(g))),$(i=>i.map(g=>{const B=de.some(z=>z.cells.some(J=>J.x===g.x&&J.y===g.y)),X=M.get(`${g.x}-${g.y}`);return B?{...g,isUsed:!1,color:X??void 0}:g})),A("Existing connection(s) removed by hint connection",1100));const pe=G.get(`${Y[0].x}-${Y[0].y}`)?.color||q(Y[0].letter);$(i=>i.map(g=>{const B=Y.some(z=>z.x===g.x&&z.y===g.y),X=M.get(`${g.x}-${g.y}`);return B?{...g,isUsed:!0,color:X??pe}:g}));const Te={word:o,cells:Y.map(i=>{const g=G.get(`${i.x}-${i.y}`);return{...i,color:g&&g.color||pe}}),startIndex:0};s(i=>[...i.filter(B=>B.word!==o),Te]),A(`Hint: Connected ${o}`,900),a(null),f([]);const $e=[...e.map(i=>i.word),o].filter(Boolean),Ae=Array.from(new Set($e));w.every(i=>Ae.includes(i))&&(A(d.congrats,2e3),j==="competitive"?setTimeout(()=>N(),2e3):S("won"))},[u,k,e,w,M,q,ne,A,j,T,R,C,d,N]),Le=E.useCallback(()=>{if(e.length===0)return;const t=e[e.length-1];s(o=>o.slice(0,-1)),$(o=>o.map(m=>{if(!t.cells.some(G=>G.x===m.x&&G.y===m.y))return m;const U=M.get(`${m.x}-${m.y}`);return{...m,isUsed:!1,color:U??void 0}})),f([]),a(null),A(`Undo: Removed connection for ${t.word}`),p==="won"&&S("playing")},[e,A,M,p]),Ie=E.useCallback(()=>{s([]),$(t=>t.map(o=>{const m=M.get(`${o.x}-${o.y}`);return{...o,isUsed:!1,color:m}})),f([]),a(null),S("playing"),A("Game reset - all connections removed")},[A,M]),Pe=E.useCallback(()=>{n(j==="competitive"?`/team-config/${r.gameType}`:`/game-mode/${r.gameType}`)},[n,r.gameType,j]);return{loading:V,currentLevel:u,currentLevelIndex:O,board:k,selectedPath:_,foundWords:e,notification:D,gameState:p,isChecking:!1,activeLetter:x,isDrawing:!!x,handleBack:Pe,handleMouseDown:we,handleMouseEnter:be,handleMouseUp:je,clearSelection:()=>{f([]),a(null)},onHint:Ce,onUndo:Le,onReset:Ie}}function Ge({letter:n,x:r,y:h,isSelected:c=!1,isFound:y=!1,isActive:j=!1,onMouseDown:T,onMouseEnter:R,onMouseUp:C,disabled:d=!1,className:V,connectionDirections:u=[],connectionColor:O,cellColor:N}){const k=E.useRef(null),$=p=>{d||(p.target?.setPointerCapture?.(p.pointerId),T?.({x:r,y:h,letter:n}),p.preventDefault())},_=p=>{if(d)return;const w=document.elementFromPoint(p.clientX,p.clientY)?.closest?.("[data-cell-x]");if(w){const M=parseInt(w.getAttribute("data-cell-x")||"0",10),q=parseInt(w.getAttribute("data-cell-y")||"0",10);R?.({x:M,y:q,letter:w.textContent?.trim()||""})}},f=p=>{try{p.target?.releasePointerCapture?.(p.pointerId)}catch(S){console.debug("releasePointerCapture failed",S)}C?.()},e=p=>{if(d)return;p.preventDefault();const S=p.touches[0],w=document.elementFromPoint(S.clientX,S.clientY);if(w&&w.getAttribute("data-cell-x")&&w.getAttribute("data-cell-y")){const M=parseInt(w.getAttribute("data-cell-x")||"0"),q=parseInt(w.getAttribute("data-cell-y")||"0"),H=w.textContent?.trim()||"";T?.({x:M,y:q,letter:H})}},s=p=>{if(d)return;p.preventDefault();const S=p.touches[0],w=document.elementFromPoint(S.clientX,S.clientY);if(w&&w.getAttribute("data-cell-x")&&w.getAttribute("data-cell-y")){const M=parseInt(w.getAttribute("data-cell-x")||"0"),q=parseInt(w.getAttribute("data-cell-y")||"0"),H=w.textContent?.trim()||"";R?.({x:M,y:q,letter:H})}},D=p=>{d||(p.preventDefault(),C?.())},P=p=>{d||(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),T?.({x:r,y:h,letter:n}))},x=56,a=O??N??void 0;return v.jsxs("div",{ref:k,role:"button",tabIndex:d?-1:0,"aria-disabled":d,"aria-pressed":c||void 0,"data-cell-x":r,"data-cell-y":h,onPointerDown:$,onPointerMove:_,onPointerUp:f,onTouchStart:e,onTouchMove:s,onTouchEnd:D,onKeyDown:P,className:se("aspect-square flex items-center justify-center rounded-md text-xl font-bold select-none relative transition-all duration-150",{"bg-gray-50 dark:bg-gray-800":!c&&!y&&!j,"cursor-not-allowed opacity-70":d,"text-gray-900 dark:text-gray-100":!c&&!y&&!j&&!a},V),children:[u.includes("top")&&v.jsx("div",{"aria-hidden":!0,className:"absolute top-0 left-1/2 transform -translate-x-1/2",style:{width:`${Math.max(6,x*.08)}%`,height:"40%",background:O,borderRadius:4,zIndex:0}}),u.includes("bottom")&&v.jsx("div",{"aria-hidden":!0,className:"absolute bottom-0 left-1/2 transform -translate-x-1/2",style:{width:`${Math.max(6,x*.08)}%`,height:"40%",background:O,borderRadius:4,zIndex:0}}),u.includes("left")&&v.jsx("div",{"aria-hidden":!0,className:"absolute left-0 top-1/2 transform -translate-y-1/2",style:{height:`${Math.max(6,x*.08)}%`,width:"40%",background:O,borderRadius:4,zIndex:0}}),u.includes("right")&&v.jsx("div",{"aria-hidden":!0,className:"absolute right-0 top-1/2 transform -translate-y-1/2",style:{height:`${Math.max(6,x*.08)}%`,width:"40%",background:O,borderRadius:4,zIndex:0}}),v.jsx("div",{className:"flex items-center justify-center rounded-full z-10",style:{width:`${x}%`,height:`${x}%`,background:a??"#ffffff",boxShadow:a?"0 2px 8px rgba(0,0,0,0.12)":void 0,border:a?"none":"1px solid rgba(0,0,0,0.06)"},children:n?v.jsx("span",{className:"text-sm font-bold",style:{color:a||c||y||j?"#fff":"#111"},children:n}):null})]})}function xe(n){return ve(n)}function ze({cells:n,selectedPath:r,foundWords:h,activeLetter:c,onMouseDown:y,onMouseEnter:j,onMouseUp:T,className:R,dir:C="ltr"}){const d=n.length===0?0:Math.max(...n.map(e=>e.x))+1,V=C==="rtl",u=e=>`${e.x}-${e.y}`,O=new Map;r.forEach(e=>O.set(u(e),e));const N=new Map;h.forEach(e=>e.cells.forEach(s=>N.set(u(s),{word:e.word,cells:e.cells})));const k=e=>{const s=[],D=[...h.map(P=>P.cells),r];for(const P of D){const x=P.findIndex(a=>a.x===e.x&&a.y===e.y);if(x!==-1){if(x>0){const a=P[x-1];a.x===e.x-1&&a.y===e.y&&s.push("left"),a.x===e.x+1&&a.y===e.y&&s.push("right"),a.x===e.x&&a.y===e.y-1&&s.push("top"),a.x===e.x&&a.y===e.y+1&&s.push("bottom")}if(x<P.length-1){const a=P[x+1];a.x===e.x-1&&a.y===e.y&&s.push("left"),a.x===e.x+1&&a.y===e.y&&s.push("right"),a.x===e.x&&a.y===e.y-1&&s.push("top"),a.x===e.x&&a.y===e.y+1&&s.push("bottom")}}}return[...new Set(s)]},$=e=>{for(const s of h)if(s.cells.some(D=>D.x===e.x&&D.y===e.y)){const D=s.cells[0]?.color??s.cells.find(x=>x.color)?.color;if(D)return D;const P=n.find(x=>x.x===s.cells[0].x&&x.y===s.cells[0].y);return P?.color?P.color:xe(s.word)}if(r&&r.length>0&&r.some(s=>s.x===e.x&&s.y===e.y)){const s=r[0];if(s?.color)return s.color;const D=n.find(P=>P.x===s.x&&P.y===s.y);return D?.color?D.color:xe(s?.letter)}if(e.color)return e.color},_=e=>O.has(u(e)),f=e=>N.has(u(e));return v.jsx("div",{className:se("grid gap-1 mx-auto max-w-md",R,{"rtl-direction":V}),style:{gridTemplateColumns:`repeat(${d}, minmax(0, 1fr))`,direction:V?"rtl":"ltr",touchAction:"none"},children:n.map(e=>{const s=k(e),D=$(e),P=f(e)||e.letter!==""&&e.letter!==c&&e.isUsed;return v.jsx(Ge,{letter:e.letter,x:e.x,y:e.y,isSelected:_(e),isFound:f(e),isActive:c&&e.letter===c?!0:void 0,onMouseDown:y,onMouseEnter:j,onMouseUp:T,disabled:P,connectionDirections:s,connectionColor:D,cellColor:e.color},`${e.x}-${e.y}`)})})}function He({foundWords:n,t:r,className:h}){return n.length===0?null:v.jsxs("div",{className:se("mt-6",h),children:[v.jsxs("div",{className:"text-lg font-semibold mb-2",children:[r.selected,":"]}),v.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((c,y)=>v.jsx("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-md",children:c.word},y))})]})}function Ke({foundWords:n,totalWords:r,t:h,className:c}){const y=n.length/r;return v.jsxs("div",{className:se("mt-6 text-center",c),children:[v.jsxs("div",{className:"text-gray-600",children:[h.selected," ",n.length," ",h.of," ",r]}),v.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-2",children:v.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${y*100}%`}})})]})}function qe(){E.useEffect(()=>{const n=EventTarget.prototype.addEventListener;return EventTarget.prototype.addEventListener=function(r,h,c){if((r==="touchmove"||r==="touchstart"||r==="touchend")&&typeof c=="object"&&c&&!("passive"in c)){const y={...c,passive:!1};return n.call(this,r,h,y)}return n.call(this,r,h,c)},()=>{EventTarget.prototype.addEventListener=n}},[])}const We={title:"Letter Flow Game",description:"Connect matching letters on the grid to form words. Trace paths between letter pairs without crossing paths!",steps:["Identify matching letters on the grid (they will have the same letter)","Click and drag from one letter to its matching pair to create a path","Paths must be horizontal or vertical (no diagonals)","Paths cannot cross over each other or other letters","Release your mouse/touch when you reach the matching letter","If your path is valid, it will be colored and locked in place","Continue connecting all letter pairs to complete the level","Use 'Undo' to remove your last connection","Use 'Clear' to remove all connections and start over","Use 'Hint' to reveal a valid path (limited in competitive mode)","Complete all connections to win the level!"]},Xe={title:"لعبة تدفق الحروف",description:"اربط الحروف المتطابقة في الشبكة لتكوين الكلمات. ارسم مسارات بين أزواج الحروف دون عبور المسارات!",steps:["حدد الحروف المتطابقة في الشبكة (ستكون لها نفس الحرف)","انقر واسحب من حرف إلى نظيره المطابق لإنشاء مسار","يجب أن تكون المسارات أفقية أو رأسية (بدون أقطار)","لا يمكن للمسارات أن تعبر بعضها البعض أو الحروف الأخرى","افرر فأرتك/لمسك عند الوصول إلى الحرف المطابق","إذا كان مسارك صحيحًا، سيتم تلوينه وتثبيته في مكانه","استمر في ربط جميع أزواج الحروف لإكمال المرحلة","استخدم 'تراجع' لإزالة آخر اتصال لك","استخدم 'مسح' لإزالة جميع الاتصالات والبدء من جديد","استخدم 'تلميح' ليكشف مسار صالح (محدود في الوضع التنافسي)","أكمل جميع الاتصالات للفوز بالمرحلة!"]};function Ee(n){return typeof n=="string"&&n.toLowerCase().startsWith("ar")?Xe:We}Ee();const nt=()=>{const{t:n,dir:r}=_e(),{language:h}=ye();qe();const{loading:c,currentLevel:y,board:j,selectedPath:T,foundWords:R,notification:C,gameState:d,activeLetter:V,handleBack:u,handleMouseDown:O,handleMouseEnter:N,handleMouseUp:k,onHint:$,onUndo:_,onReset:f,clearSelection:e,currentLevelIndex:s}=Be(),D=()=>v.jsx(ze,{cells:j,selectedPath:T,foundWords:R,activeLetter:V,onMouseDown:p=>O({...p,isUsed:!1}),onMouseEnter:p=>N({...p,isUsed:!1}),onMouseUp:k}),P=()=>R.length===0?null:v.jsx(He,{foundWords:R,t:{selected:n.selected}}),x=()=>{if(!C)return null;let p="info";return C.includes("congrats")||C===n.congrats?p="success":C.includes("Already found")||C.includes("cannot cross")?p="warning":(C.includes("must connect")||C.includes("horizontal or vertical"))&&(p="error"),v.jsx(Ve,{message:C,type:p})};if(c)return v.jsx("div",{className:`flex flex-col items-center justify-center min-h-screen ${r==="rtl"?"text-right":""}`,dir:r,children:v.jsxs("div",{className:"text-xl",children:[n.loading,"..."]})});if(!y)return v.jsxs("div",{className:`flex flex-col items-center justify-center min-h-screen ${r==="rtl"?"text-right":""}`,dir:r,children:[v.jsx("div",{className:"text-xl",children:n.noLevelsFound}),v.jsx("button",{onClick:u,className:"mt-4 btn",children:n.back})]});const a=Math.floor((y?.endpoints.length??0)/2);return v.jsxs(ke,{title:n.letterFlowTitle??y.id,levelIndex:s??0,onBack:u,difficulty:y.difficulty,layoutType:"text",instructions:Ee(h),children:[x(),v.jsx("div",{className:`mb-6 touch-none ${r==="rtl"?"arabic-layout":""} transition-colors duration-300`,dir:r,children:D()}),P(),v.jsx(Ne,{onReset:f,onRemoveLetter:_,onClearAnswer:e,onHint:$,onNextLevel:void 0,onPrevLevel:void 0,onCheckAnswer:()=>{},onShowSolution:void 0,canRemove:R.length>0,canClear:T.length>0,canCheck:!1,canPrev:!!(s&&s>0),canNext:d==="won",canHint:R.length<a,hintsRemaining:void 0,gameState:d==="won"?"won":"playing",isKidsMode:!1,labels:{remove:n.undo,clear:n.clear,check:n.check,hint:n.hint,showSolution:n.showSolution,reset:n.reset,prev:n.prev,next:n.next},showOnly:["remove","hint","reset","next"]}),v.jsx(Ke,{foundWords:R,totalWords:a,t:{selected:n.selected,of:n.of}})]})};export{nt as default};
