import{u as T,a as O,b,r as v,c as K,j as e,B as f,A as V,e as D,d as F}from"./index-B4fPtU2R.js";import{C as U,u as W,a as q,L as H,S as J}from"./ClueGameLayout-DmGQ-YEt.js";import{G as Q}from"./GameControls-B4hR6-Xg.js";import{u as X}from"./Notification-7_OZ9wn8.js";import{V as Y}from"./volume-2-y7qzl3AX.js";import"./GameLayout-D84wNv_h.js";import"./GameButton-p4dt7Yua.js";import"./circle-check-big-BJBHKpeN.js";class Z extends U{getGameId(){return"img-clue"}getModulePath(n,s){return`/src/data/${n}/image-clue/${s}/data.json`}validateLevel(n){const s=n;return s&&typeof s=="object"&&"id"in s&&"image"in s&&"sound"in s&&"solution"in s?{id:String(s.id),image:String(s.image),sound:String(s.sound),solution:String(s.solution)}:null}getErrorLevel(){return{id:"error-level",image:"/assets/images/error.png",sound:"",solution:"ERROR"}}isKidsMode(){return!0}}const _=new Z;function ee(){const t=T(),n=O(),{language:s,categories:a,gameMode:c}=b(),u=W({engine:_,language:s,categories:a,difficulty:"easy"}),m=v.useRef(null),o=l=>{const r=String("/PowerLetter-for-Puzzles").replace(/\/+$/,""),i=l.replace(/^\/+/,"");return`${r}/${i}`},d=v.useCallback(()=>{m.current?.play().catch(l=>console.error("Audio play failed:",l))},[]),g=v.useCallback(()=>{t(c==="competitive"?`/team-config/${n.gameType}`:"/games")},[t,n.gameType,c]);return{...u,handleBack:g,audioRef:m,getAssetPath:o,playSound:d}}const ce=()=>{const{t,i18n:n}=K(),s=n.dir(),a=X("imageClue"),c=a?{title:a.title,description:a.description??"",steps:a.steps??[]}:void 0,{gameMode:u}=b(),{loading:m,currentLevel:o,solution:d,letters:g,notification:l,wrongAnswers:p,gameState:r,currentLevelIndex:i,levels:w,audioRef:y,getAssetPath:h,playSound:k,onCheck:S,onLetterClick:L,onRemove:N,onClear:R,nextLevel:j,prevLevel:G,handleBack:C,resetLevel:A,canRemove:I,canClear:E,canCheck:P}=ee();if(m)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsxs("p",{children:[t.loading,"..."]})});if(!o||o.solution==="ERROR")return e.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[e.jsx("p",{className:"text-xl font-semibold",children:t.noLevelsFound}),e.jsx(f,{onClick:C,children:t.back})]});const{answerSlots:B,slotIndices:z,hintIndices:M}=r;return e.jsx(q,{title:t.imageClueTitle,levelIndex:i,onBack:C,instructions:c,notification:l,layoutType:"image",promptContent:e.jsxs("div",{className:"relative aspect-video bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:[e.jsx("img",{src:h(o.image),alt:d,className:"max-h-full max-w-full object-contain"}),e.jsx(f,{size:"icon",onClick:k,className:"absolute top-3 right-3 rounded-full bg-black/50 hover:bg-black/70",children:e.jsx(Y,{className:"h-6 w-6 text-white"})}),e.jsx("audio",{ref:y,src:h(o.sound),preload:"auto"})]}),solutionContent:e.jsx(J,{solution:d,currentWord:B.join("")}),letterOptionsContent:e.jsx(H,{letters:g,selectedIndices:z.filter(x=>x!==null),onLetterClick:L,disabled:r.gameState!=="playing",hintIndices:M}),wrongAnswersContent:p.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[t.wrongAttempts,":"]}),e.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:p.map((x,$)=>e.jsx(F,{variant:"destructive",children:x},$))})]}),gameControlsContent:r.gameState==="won"&&u!=="competitive"?e.jsxs(f,{onClick:j,className:"w-full bg-green-600 hover:bg-green-700 text-lg py-6",children:[t.next," ",s==="rtl"?e.jsx(V,{className:"ml-2"}):e.jsx(D,{className:"ml-2"})]}):e.jsx(Q,{onRemoveLetter:N,onClearAnswer:R,onCheckAnswer:S,onReset:A,onPrevLevel:G,onNextLevel:j,canRemove:I,canClear:E,canCheck:P,canPrev:i>0,canNext:i<w.length-1,gameState:r.gameState,gameMode:u,isKidsMode:!0,labels:{remove:t.remove,clear:t.clear,check:t.check,hint:t.hint,showSolution:t.showSolution,reset:t.reset,prev:t.prev,next:t.next}})})};export{ce as default};
