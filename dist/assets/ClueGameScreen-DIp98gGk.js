import{_ as e,u as Y,a as Z,b as ee,c as N,r as l,j as c,B as te,d as ae}from"./index-1UwpM-ao.js";import{u as se,S as oe,L as re}from"./useGameControls-CBvwl9Yx.js";import{G as ne}from"./GameControls-cmFYuPmo.js";import{s as ie,g as ce,u as le,a as ue,G as _e,N as de}from"./useInstructions-CinFT9KD.js";import"./GameButton-BG331eRv.js";import"./circle-check-big-CTvo430u.js";class me{async loadLevels(u){const{language:f,categories:v,difficulty:m}=u,R=["animals","science","geography"],h=(v.includes("general")?R:v).map(async i=>{try{const p=`/src/data/${f}/clue/${i}/${f}-clue-${i}-${m}.json`,o=Object.assign({"/src/data/ar/clue/animals/ar-clue-animals-easy.json":()=>e(()=>import("./ar-clue-animals-easy-B_GJKLA_.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-hard.json":()=>e(()=>import("./ar-clue-animals-hard-7EfMbXs4.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-medium.json":()=>e(()=>import("./ar-clue-animals-medium-Bcn1oCUk.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-words.json":()=>e(()=>import("./ar-clue-animals-words-DxH5pZeF.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-easy.json":()=>e(()=>import("./ar-clue-geography-easy-B_kcdeCx.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-hard.json":()=>e(()=>import("./ar-clue-geography-hard-BCuCMNGp.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-medium.json":()=>e(()=>import("./ar-clue-geography-medium-CkoNY3Du.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-words.json":()=>e(()=>import("./ar-clue-geography-words-C7oqRjv9.js"),[]),"/src/data/ar/clue/science/ar-clue-science-easy.json":()=>e(()=>import("./ar-clue-science-easy-f07zg_lU.js"),[]),"/src/data/ar/clue/science/ar-clue-science-hard.json":()=>e(()=>import("./ar-clue-science-hard-CV32qLEY.js"),[]),"/src/data/ar/clue/science/ar-clue-science-medium.json":()=>e(()=>import("./ar-clue-science-medium-BtIrOjNp.js"),[]),"/src/data/ar/clue/science/ar-clue-science-words.json":()=>e(()=>import("./ar-clue-science-words-DpIQpR0-.js"),[]),"/src/data/ar/formation/ar-formation-easy.json":()=>e(()=>import("./ar-formation-easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/ar-formation-hard.json":()=>e(()=>import("./ar-formation-hard-CRxFgu7h.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits/data.json":()=>e(()=>import("./data-CenmuYLK.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/ar-flow-easy.json":()=>e(()=>import("./ar-flow-easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/ar-flow-medium.json":()=>e(()=>import("./ar-flow-medium-BL27Zp8Y.js"),[]),"/src/data/ar/picture-choice/animals/data.json":()=>e(()=>import("./data-6hZ_2-dK.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/clue/animals/en-clue-animals-easy.json":()=>e(()=>import("./en-clue-animals-easy-vc2CgBiI.js"),[]),"/src/data/en/clue/animals/en-clue-animals-hard.json":()=>e(()=>import("./en-clue-animals-hard-BmQiyFGH.js"),[]),"/src/data/en/clue/animals/en-clue-animals-medium.json":()=>e(()=>import("./en-clue-animals-medium-CDppU-oU.js"),[]),"/src/data/en/clue/animals/en-clue-animals-words.json":()=>e(()=>import("./en-clue-animals-words-OyMRQ2OB.js"),[]),"/src/data/en/clue/geography/en-clue-geography-easy.json":()=>e(()=>import("./en-clue-geography-easy-v49lXgS1.js"),[]),"/src/data/en/clue/geography/en-clue-geography-hard.json":()=>e(()=>import("./en-clue-geography-hard-Hc9ZYG1D.js"),[]),"/src/data/en/clue/geography/en-clue-geography-medium.json":()=>e(()=>import("./en-clue-geography-medium-Yt4_5ZKV.js"),[]),"/src/data/en/clue/geography/en-clue-geography-words.json":()=>e(()=>import("./en-clue-geography-words-BJFrdNPX.js"),[]),"/src/data/en/clue/science/en-clue-science-easy.json":()=>e(()=>import("./en-clue-science-easy-CXDUIzZm.js"),[]),"/src/data/en/clue/science/en-clue-science-hard.json":()=>e(()=>import("./en-clue-science-hard-Dqcig8Ht.js"),[]),"/src/data/en/clue/science/en-clue-science-medium.json":()=>e(()=>import("./en-clue-science-medium-Dm_81XWt.js"),[]),"/src/data/en/clue/science/en-clue-science-words.json":()=>e(()=>import("./en-clue-science-words-BdiwMlAj.js"),[]),"/src/data/en/formation/en-formation-easy.json":()=>e(()=>import("./en-formation-easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits/data.json":()=>e(()=>import("./data-OxJ4m8-5.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/en-flow-easy.json":()=>e(()=>import("./en-flow-easy-DqbTaQjR.js"),[]),"/src/data/en/picture-choice/animals/data.json":()=>e(()=>import("./data-CtXqoHRL.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])})[p];if(!o)return console.warn(`Module not found for path: ${p}`),[];const A=await o();return(A.default?.levels||A.levels||[]).map(r=>{if(typeof r=="object"&&r!==null){const g=r;return{id:String(g.id??`${m}-${Math.random().toString(36).slice(2,8)}`),clue:String(g.clue??""),solution:String(g.solution??""),difficulty:m}}return null}).filter(r=>r!==null)}catch(p){return console.error(`ClueGameEngine: Failed to load levels for ${f}/${i}/${m}.`,p),[]}}),L=(await Promise.all(h)).flat();return L.length===0?[{id:"error-level",difficulty:"easy",clue:"Could not load levels for the selected categories.",solution:"ERROR"}]:ie(L)}generateLetters(u,f,v){return ce(u,f,v,!1)}}const M=new me;function pe(){const a=Y(),u=Z(),f=ee(),{language:v,categories:m,difficulty:R,gameMode:_,updateScore:h,currentTeam:y,setCurrentTeam:L,teams:i,nextTurn:p,consumeHint:I}=f,{t:o}=N(),{loading:A,levels:D,currentLevel:r,currentLevelIndex:g,solution:d,notification:k,setNotification:s,gameState:n,dispatch:t,nextLevel:T,resetLevel:S}=le(M,{language:v,categories:m,difficulty:R}),[E,G]=l.useState([]),[O,V]=l.useState([]),[P,C]=l.useState(new Set),{canRemove:w,canClear:$,canCheck:H,canHint:B}=se(n),W=l.useCallback(b=>{n.gameState==="playing"&&t({type:"PLACE",gridIndex:b,letter:E[b]})},[n.gameState,E,t]),F=l.useCallback(()=>t({type:"REMOVE_LAST"}),[t]),z=l.useCallback(()=>t({type:"CLEAR"}),[t]),K=l.useCallback(()=>{if(n.gameState!=="playing")return;if(n.answerSlots.join("")===d){t({type:"SET_GAME_STATE",payload:"won"});const j=r?.difficulty==="medium"?20:r?.difficulty==="hard"?30:10;_==="competitive"?(h(i[y].id,j),s({message:`${o.congrats} +${j}`,type:"success"}),setTimeout(()=>{T(),t({type:"SET_GAME_STATE",payload:"playing"}),s(null)},2e3)):s({message:o.congrats,type:"success"})}else{t({type:"SET_GAME_STATE",payload:"failed"});const j=n.answerSlots.join("");if(j&&!O.includes(j)&&V(x=>[...x,j]),s({message:o.wrongAnswer,type:"error"}),_==="competitive"){const x=new Set(P);x.add(y),C(x),x.size===i.length?setTimeout(()=>{t({type:"SHOW",solution:d,letters:E}),s({message:`${o.solutionWas}: ${d}`,type:"error"}),C(new Set),setTimeout(()=>{T(),t({type:"SET_GAME_STATE",payload:"playing"}),s(null)},2500)},2e3):setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),s(null),p("lose")},2e3)}else setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),s(null)},2e3)}},[n,d,r,_,i,y,h,p,T,o,O,t,s,P,E]),q=l.useCallback(()=>{n.gameState==="playing"&&(t({type:"SHOW",solution:d,letters:E}),s({message:`${o.solutionWas}: ${d}`,type:"error"}),_==="competitive"&&setTimeout(()=>{p("lose"),T(),t({type:"SET_GAME_STATE",payload:"playing"}),s(null)},2500))},[n.gameState,d,E,_,p,T,o.solutionWas,t,s]),J=l.useCallback(()=>{if(_==="competitive"&&!I(i[y].id)){s({message:o.noHintsLeft,type:"error"}),setTimeout(()=>s(null),2e3);return}t({type:"HINT",solution:d,letters:E})},[_,i,y,I,o.noHintsLeft,d,E,t,s]),Q=l.useCallback(async()=>{},[]),U=l.useCallback(()=>{a(_==="competitive"?`/team-config/${u.gameType}`:`/game-mode/${u.gameType}`)},[a,u.gameType,_]),X=l.useCallback(()=>{g>0&&S()},[g,S]);return l.useEffect(()=>{r&&M.generateLetters&&G(M.generateLetters(r.solution,r.difficulty,v)),i.length>0&&L(g%i.length),V([])},[r,v,i.length,g,L]),{loading:A,levels:D,currentLevel:r,solution:d,letters:E,notification:k,wrongAnswers:O,gameState:n.gameState,answerSlots:n.answerSlots,slotIndices:n.slotIndices,hintIndices:n.hintIndices,currentLevelIndex:g,onCheck:K,onShow:q,onLetterClick:W,onRemove:F,onClear:z,onHint:J,nextLevel:T,prevLevel:X,handleBack:U,handleRevealOrListSolutions:Q,resetLevel:S,canRemove:w,canClear:$,canCheck:H,canHint:B}}const Le=()=>{const{t:a}=N(),u=ue("clue"),f=u!=null?{title:u.title,description:u.description??"",steps:u.steps??[]}:void 0,{loading:v,currentLevel:m,solution:R,letters:_,notification:h,wrongAnswers:y,gameState:L,answerSlots:i,slotIndices:p,hintIndices:I,currentLevelIndex:o,levels:A,onCheck:D,onShow:r,onLetterClick:g,onRemove:d,onClear:k,onHint:s,nextLevel:n,prevLevel:t,handleBack:T,resetLevel:S,canRemove:E,canClear:G,canCheck:O,canHint:V}=pe();if(v)return c.jsx("div",{className:"flex justify-center items-center h-screen",children:c.jsxs("p",{children:[a.loading,"..."]})});if(!m||m.solution==="ERROR")return c.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[c.jsx("p",{className:"text-xl font-semibold",children:a.noLevelsFound}),c.jsx(te,{onClick:T,children:a.back})]});const P=h?.message??null,C=h?.type??"info";return c.jsxs(_e,{title:m.clue,levelIndex:o,onBack:T,difficulty:m.difficulty,instructions:f,children:[P&&c.jsx(de,{message:P,type:C}),c.jsx(oe,{solution:R,currentWord:i.join("")}),c.jsx(re,{letters:_,selectedIndices:p.filter(w=>w!==null),onLetterClick:g,disabled:L!=="playing",hintIndices:I}),y.length>0&&c.jsxs("div",{className:"mt-2",children:[c.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[a.wrongAttempts,":"]}),c.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 justify-center",children:y.map((w,$)=>c.jsx(ae,{variant:"destructive",className:"text-xs py-1",children:w},$))})]}),c.jsx(ne,{onRemoveLetter:d,onClearAnswer:k,onCheckAnswer:D,onHint:s,onShowSolution:r,onReset:S,onPrevLevel:t,onNextLevel:n,canRemove:E,canClear:G,canCheck:O,canHint:V,canPrev:o>0,canNext:o<A.length-1,gameState:L,isKidsMode:!1,labels:{remove:a.remove,clear:a.clear,check:a.check,hint:a.hint,showSolution:a.showSolution,reset:a.reset,prev:a.prev,next:a.next}})]})};export{Le as default};
