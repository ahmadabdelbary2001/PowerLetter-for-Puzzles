import{_ as e,u as w,b,r as u,c as C,j as r,B as I,f as N,A as S,e as $}from"./index-DBe-om3R.js";import{u as k,G}from"./useInstructions-ir7OMZQa.js";import{s as D,u as B,N as F}from"./Notification-B3rLnyjl.js";import{V as K}from"./volume-2-CpG6ThJ-.js";import{C as z}from"./circle-check-big-CqOGwCtg.js";import{C as M}from"./circle-x-B9pMZ58X.js";class W{async loadLevels(T){const{language:p,categories:d}=T,y=["animals","fruits","shapes"],R=d.includes("general")?y:d,o=Object.assign({"/src/data/ar/clue/animals/ar-clue-animals-easy.json":()=>e(()=>import("./ar-clue-animals-easy-B_GJKLA_.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-hard.json":()=>e(()=>import("./ar-clue-animals-hard-7EfMbXs4.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-medium.json":()=>e(()=>import("./ar-clue-animals-medium-Bcn1oCUk.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-words.json":()=>e(()=>import("./ar-clue-animals-words-DxH5pZeF.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-easy.json":()=>e(()=>import("./ar-clue-geography-easy-B_kcdeCx.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-hard.json":()=>e(()=>import("./ar-clue-geography-hard-BCuCMNGp.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-medium.json":()=>e(()=>import("./ar-clue-geography-medium-CkoNY3Du.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-words.json":()=>e(()=>import("./ar-clue-geography-words-C7oqRjv9.js"),[]),"/src/data/ar/clue/science/ar-clue-science-easy.json":()=>e(()=>import("./ar-clue-science-easy-f07zg_lU.js"),[]),"/src/data/ar/clue/science/ar-clue-science-hard.json":()=>e(()=>import("./ar-clue-science-hard-CV32qLEY.js"),[]),"/src/data/ar/clue/science/ar-clue-science-medium.json":()=>e(()=>import("./ar-clue-science-medium-BtIrOjNp.js"),[]),"/src/data/ar/clue/science/ar-clue-science-words.json":()=>e(()=>import("./ar-clue-science-words-DpIQpR0-.js"),[]),"/src/data/ar/formation/ar-formation-easy.json":()=>e(()=>import("./ar-formation-easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/ar-formation-hard.json":()=>e(()=>import("./ar-formation-hard-CRxFgu7h.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits/data.json":()=>e(()=>import("./data-CenmuYLK.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/ar-flow-easy.json":()=>e(()=>import("./ar-flow-easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/ar-flow-medium.json":()=>e(()=>import("./ar-flow-medium-BL27Zp8Y.js"),[]),"/src/data/ar/outside-the-story/ar-outside-the-story-animals.json":()=>e(()=>import("./ar-outside-the-story-animals-0m0m6kXG.js"),[]),"/src/data/ar/outside-the-story/ar-outside-the-story-fruits.json":()=>e(()=>import("./ar-outside-the-story-fruits-zTkTe7Gg.js"),[]),"/src/data/ar/outside-the-story/ar-outside-the-story-geography.json":()=>e(()=>import("./ar-outside-the-story-geography-CVgh5HaL.js"),[]),"/src/data/ar/outside-the-story/ar-outside-the-story-science.json":()=>e(()=>import("./ar-outside-the-story-science-D4AkFF1_.js"),[]),"/src/data/ar/picture-choice/animals/data.json":()=>e(()=>import("./data-6hZ_2-dK.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/clue/animals/en-clue-animals-easy.json":()=>e(()=>import("./en-clue-animals-easy-vc2CgBiI.js"),[]),"/src/data/en/clue/animals/en-clue-animals-hard.json":()=>e(()=>import("./en-clue-animals-hard-BmQiyFGH.js"),[]),"/src/data/en/clue/animals/en-clue-animals-medium.json":()=>e(()=>import("./en-clue-animals-medium-CDppU-oU.js"),[]),"/src/data/en/clue/animals/en-clue-animals-words.json":()=>e(()=>import("./en-clue-animals-words-OyMRQ2OB.js"),[]),"/src/data/en/clue/geography/en-clue-geography-easy.json":()=>e(()=>import("./en-clue-geography-easy-v49lXgS1.js"),[]),"/src/data/en/clue/geography/en-clue-geography-hard.json":()=>e(()=>import("./en-clue-geography-hard-Hc9ZYG1D.js"),[]),"/src/data/en/clue/geography/en-clue-geography-medium.json":()=>e(()=>import("./en-clue-geography-medium-Yt4_5ZKV.js"),[]),"/src/data/en/clue/geography/en-clue-geography-words.json":()=>e(()=>import("./en-clue-geography-words-BJFrdNPX.js"),[]),"/src/data/en/clue/science/en-clue-science-easy.json":()=>e(()=>import("./en-clue-science-easy-CXDUIzZm.js"),[]),"/src/data/en/clue/science/en-clue-science-hard.json":()=>e(()=>import("./en-clue-science-hard-Dqcig8Ht.js"),[]),"/src/data/en/clue/science/en-clue-science-medium.json":()=>e(()=>import("./en-clue-science-medium-Dm_81XWt.js"),[]),"/src/data/en/clue/science/en-clue-science-words.json":()=>e(()=>import("./en-clue-science-words-BdiwMlAj.js"),[]),"/src/data/en/formation/en-formation-easy.json":()=>e(()=>import("./en-formation-easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits/data.json":()=>e(()=>import("./data-OxJ4m8-5.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/en-flow-easy.json":()=>e(()=>import("./en-flow-easy-DqbTaQjR.js"),[]),"/src/data/en/outside-the-story/en-outside-the-story-animals.json":()=>e(()=>import("./en-outside-the-story-animals-QFa7I_eA.js"),[]),"/src/data/en/outside-the-story/en-outside-the-story-fruits.json":()=>e(()=>import("./en-outside-the-story-fruits--LJxQFSa.js"),[]),"/src/data/en/outside-the-story/en-outside-the-story-geography.json":()=>e(()=>import("./en-outside-the-story-geography-Dw2uVeLE.js"),[]),"/src/data/en/outside-the-story/en-outside-the-story-science.json":()=>e(()=>import("./en-outside-the-story-science-DF1sazzy.js"),[]),"/src/data/en/picture-choice/animals/data.json":()=>e(()=>import("./data-CtXqoHRL.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])}),h=R.map(async c=>{try{const l=Object.entries(o),f=l.find(([t])=>t.includes(`/${p}/picture-choice/${c}/data.json`)||t.includes(`\\${p}\\picture-choice\\${c}\\data.json`))?.[1],g=l.find(([t])=>t.includes(`/en/picture-choice/${c}/data.json`)||t.includes(`\\en\\picture-choice\\${c}\\data.json`))?.[1],E=l.find(([t])=>t.endsWith(`/picture-choice/${c}/data.json`)||t.endsWith(`\\picture-choice\\${c}\\data.json`))?.[1],_=f??g??E;return _?((await _()).default?.levels??[]).map(t=>{if(typeof t!="object"||t===null)return null;const n=t,s=n.id,m=n.word,P=n.solution,x=n.options,V=n.sound;if((typeof s=="string"||typeof s=="number")&&typeof m=="string"&&typeof P=="string"&&Array.isArray(x)&&x.every(A=>typeof A=="string")){const A=Array.from(new Set(x.map(String)));return A.includes(P)||A.push(P),{id:String(s),word:String(m),sound:typeof V=="string"?String(V):"",solution:String(P),options:A}}return null}).filter(t=>t!==null):(console.warn(`PictureChoiceGameEngine: no module found for ${p}/${c}`),[])}catch(l){return console.error(`PictureChoiceGameEngine: Failed to load ${p}/${c}`,l),[]}}),v=(await Promise.all(h)).flat();return v.length===0?[{id:"error-level",word:"ERROR",sound:"",solution:"/assets/images/error.png",options:["/assets/images/error.png"]}]:D(v)}}const U=new W;function X(){const i=w(),{language:T,categories:p,gameMode:d,gameType:y}=b(),{loading:R,currentLevel:o,nextLevel:h}=B(U,{language:T,categories:p}),[a,v]=u.useState([]),[c,l]=u.useState(null),[f,g]=u.useState("idle"),E=u.useRef(null),_=u.useRef(null),j=u.useRef(null),L=s=>`${"/PowerLetter-for-Puzzles/".replace(/\/$/,"")}/${s.replace(/^\//,"")}`,O=u.useCallback(()=>{const s=E.current;if(s)try{s.currentTime=0,s.play().catch(m=>console.error("Audio play failed:",m))}catch(m){console.error("Audio control failed:",m)}},[]),t=u.useCallback(s=>{o&&f!=="correct"&&(l(s),s===o.solution?(g("correct"),_.current=window.setTimeout(()=>{h()},1200)):(g("incorrect"),j.current=window.setTimeout(()=>g("idle"),1200)))},[f,o,h]),n=u.useCallback(()=>{i(d==="competitive"?`/team-config/${y}`:"/kids-games")},[i,d,y]);return u.useEffect(()=>{o&&(v(D([...o.options])),g("idle"),l(null))},[o]),u.useEffect(()=>{const s=E.current;return()=>{if(_.current&&(clearTimeout(_.current),_.current=null),j.current&&(clearTimeout(j.current),j.current=null),s)try{s.pause(),s.currentTime=0}catch(m){console.error("Failed to pause/reset audio during cleanup",m)}}},[o]),{loading:R,currentLevel:o,shuffledOptions:a,answerStatus:f,selectedOption:c,audioRef:E,getAssetPath:L,playSound:O,handleOptionClick:t,nextLevel:h,handleBack:n}}const ee=()=>{const{t:i,i18n:T}=C(),p=T.dir(),d=k("pictureChoice"),y=d?{title:d.title??"",description:d.description??"",steps:d.steps??[]}:void 0,{loading:R,currentLevel:o,shuffledOptions:h,answerStatus:a,selectedOption:v,audioRef:c,getAssetPath:l,playSound:f,handleOptionClick:g,nextLevel:E,handleBack:_}=X();if(R)return r.jsx("div",{className:"flex justify-center items-center h-screen",children:r.jsxs("p",{children:[i.loading,"..."]})});if(!o||o.solution==="ERROR")return r.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[r.jsx("p",{className:"text-xl font-semibold",children:i.noLevelsFound}),r.jsx(I,{onClick:_,children:i.back})]});const j=a!=="idle",L=a==="correct"?i.congrats??"Correct!":a==="incorrect"?i.wrongAnswer??"Wrong! Try again":"",O=a==="correct"?"success":"error";return r.jsxs(G,{title:i.pictureChoiceTitle??i.findThePictureTitle??"Find the Picture",levelIndex:0,onBack:_,layoutType:"image",instructions:y,children:[j&&r.jsx(F,{message:L,type:O,duration:1e3}),r.jsxs("div",{className:"relative bg-card rounded-lg p-6 flex items-center justify-center",children:[r.jsx("div",{className:"text-3xl font-bold",children:o.word}),o.sound&&r.jsxs(r.Fragment,{children:[r.jsx(I,{size:"icon",onClick:f,className:"absolute top-3 right-3 rounded-full bg-black/50 hover:bg-black/70","aria-label":i.playSound??"Play sound",children:r.jsx(K,{className:"h-6 w-6 text-white","aria-hidden":!0})}),r.jsx("audio",{ref:c,src:l(o.sound),preload:"auto"})]})]}),r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 pt-4",children:h.map(t=>{const n=v===t,s=t===o.solution;return r.jsxs(I,{onClick:()=>g(t),disabled:a==="correct",className:N("text-base h-36 flex items-center justify-center gap-2 transition-all duration-300 overflow-hidden p-0",n&&a==="correct"&&"ring-4 ring-green-500",n&&a==="incorrect"&&"ring-4 ring-red-500",!n&&a==="incorrect"&&s&&"bg-green-200 text-green-800 ring-2 ring-green-400",a==="idle"&&"bg-card text-card-foreground hover:bg-muted"),children:[r.jsx("div",{className:"w-full h-full flex items-center justify-center p-2",children:r.jsx("img",{src:l(t),alt:"",className:"max-h-full max-w-full object-contain"})}),n&&a==="correct"&&r.jsx(z,{className:"absolute top-2 right-2 text-green-600"}),n&&a==="incorrect"&&r.jsx(M,{className:"absolute top-2 right-2 text-red-600"})]},t)})}),a==="correct"&&r.jsx("div",{className:"pt-4",children:r.jsxs(I,{onClick:E,className:"w-full bg-green-600 hover:bg-green-700 text-lg py-6",children:[i.next," ",p==="rtl"?r.jsx(S,{className:"ml-2"}):r.jsx($,{className:"ml-2"})]})})]})};export{ee as default};
