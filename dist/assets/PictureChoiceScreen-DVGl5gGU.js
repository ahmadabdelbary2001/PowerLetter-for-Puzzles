import{_ as e,u as b,b as w,r as l,c as C,j as r,B as P,A as S,e as k,f as N}from"./index-C29J98WP.js";import{s as x,a as $,u as G}from"./Notification-BWUUkEux.js";import{M as B,C as M}from"./MultipleChoiceLayout-QZySeyvC.js";import{C as F}from"./circle-check-big-DLR9cbU_.js";import{V as K}from"./volume-2-DsJkaVXi.js";import"./GameLayout-CtBsrCrO.js";class z{async loadLevels(v){const{language:p,categories:_}=v,g=["animals","fruits-and-vegetables","shapes"],y=_.includes("general")?g:_,o=Object.assign({"/src/data/ar/formation/easy.json":()=>e(()=>import("./easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/hard.json":()=>e(()=>import("./hard-DzMXngiv.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits-and-vegetables/data.json":()=>e(()=>import("./data-DlhJ3pZw.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/easy.json":()=>e(()=>import("./easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/medium.json":()=>e(()=>import("./medium-DnN41iEv.js"),[]),"/src/data/ar/outside-the-story/animals.json":()=>e(()=>import("./animals-BD_uC3F6.js"),[]),"/src/data/ar/outside-the-story/anime.json":()=>e(()=>import("./anime-X9XTb-jh.js"),[]),"/src/data/ar/outside-the-story/cars.json":()=>e(()=>import("./cars-LFoQ5kcr.js"),[]),"/src/data/ar/outside-the-story/cartoons.json":()=>e(()=>import("./cartoons-9ln4fVtF.js"),[]),"/src/data/ar/outside-the-story/characters.json":()=>e(()=>import("./characters-BClrgWDD.js"),[]),"/src/data/ar/outside-the-story/clothes.json":()=>e(()=>import("./clothes-DZukcyjc.js"),[]),"/src/data/ar/outside-the-story/drinks.json":()=>e(()=>import("./drinks-DWTisQdZ.js"),[]),"/src/data/ar/outside-the-story/foods.json":()=>e(()=>import("./foods-BPEl4jwc.js"),[]),"/src/data/ar/outside-the-story/football.json":()=>e(()=>import("./football-BkDTW0je.js"),[]),"/src/data/ar/outside-the-story/fruits-and-vegetables.json":()=>e(()=>import("./fruits-and-vegetables-CWZ59ral.js"),[]),"/src/data/ar/outside-the-story/gamers.json":()=>e(()=>import("./gamers-DU27ka0Y.js"),[]),"/src/data/ar/outside-the-story/geography.json":()=>e(()=>import("./geography-Bmt1Mp9F.js"),[]),"/src/data/ar/outside-the-story/k-pop.json":()=>e(()=>import("./k-pop-CvncURYW.js"),[]),"/src/data/ar/outside-the-story/science.json":()=>e(()=>import("./science-C1rxd0mO.js"),[]),"/src/data/ar/outside-the-story/series.json":()=>e(()=>import("./series-DgCSJJru.js"),[]),"/src/data/ar/outside-the-story/spy.json":()=>e(()=>import("./spy-CTUdze8o.js"),[]),"/src/data/ar/outside-the-story/sweets.json":()=>e(()=>import("./sweets-0_2hbNMS.js"),[]),"/src/data/ar/phrase-clue/animals/easy.json":()=>e(()=>import("./easy-B_GJKLA_.js"),[]),"/src/data/ar/phrase-clue/animals/hard.json":()=>e(()=>import("./hard-7EfMbXs4.js"),[]),"/src/data/ar/phrase-clue/animals/medium.json":()=>e(()=>import("./medium-Bcn1oCUk.js"),[]),"/src/data/ar/phrase-clue/geography/easy.json":()=>e(()=>import("./easy-B_kcdeCx.js"),[]),"/src/data/ar/phrase-clue/geography/hard.json":()=>e(()=>import("./hard-BCuCMNGp.js"),[]),"/src/data/ar/phrase-clue/geography/medium.json":()=>e(()=>import("./medium-CkoNY3Du.js"),[]),"/src/data/ar/phrase-clue/science/easy.json":()=>e(()=>import("./easy-f07zg_lU.js"),[]),"/src/data/ar/phrase-clue/science/hard.json":()=>e(()=>import("./hard-CV32qLEY.js"),[]),"/src/data/ar/phrase-clue/science/medium.json":()=>e(()=>import("./medium-BtIrOjNp.js"),[]),"/src/data/ar/picture-choice/animals/data.json":()=>e(()=>import("./data-6hZ_2-dK.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/formation/easy.json":()=>e(()=>import("./easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits-and-vegetables/data.json":()=>e(()=>import("./data-B6FoT8eG.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/easy.json":()=>e(()=>import("./easy-DqbTaQjR.js"),[]),"/src/data/en/outside-the-story/animals.json":()=>e(()=>import("./animals-D78oH89-.js"),[]),"/src/data/en/outside-the-story/anime.json":()=>e(()=>import("./anime-DXIlEidq.js"),[]),"/src/data/en/outside-the-story/cars.json":()=>e(()=>import("./cars-Cw03Nxyo.js"),[]),"/src/data/en/outside-the-story/cartoons.json":()=>e(()=>import("./cartoons-DwVIQVvA.js"),[]),"/src/data/en/outside-the-story/characters.json":()=>e(()=>import("./characters-Dl2vwTPn.js"),[]),"/src/data/en/outside-the-story/clothes.json":()=>e(()=>import("./clothes-BiLKpCWj.js"),[]),"/src/data/en/outside-the-story/drinks.json":()=>e(()=>import("./drinks-CP1Emjyy.js"),[]),"/src/data/en/outside-the-story/foods.json":()=>e(()=>import("./foods-BKBSmJG2.js"),[]),"/src/data/en/outside-the-story/football.json":()=>e(()=>import("./football-B8eU_HgW.js"),[]),"/src/data/en/outside-the-story/fruits-and-vegetables.json":()=>e(()=>import("./fruits-and-vegetables-B5narx4J.js"),[]),"/src/data/en/outside-the-story/gamers.json":()=>e(()=>import("./gamers-Dm5Tu0YA.js"),[]),"/src/data/en/outside-the-story/geography.json":()=>e(()=>import("./geography-Dw2uVeLE.js"),[]),"/src/data/en/outside-the-story/k-pop.json":()=>e(()=>import("./k-pop-BnHY6_tE.js"),[]),"/src/data/en/outside-the-story/science.json":()=>e(()=>import("./science-DF1sazzy.js"),[]),"/src/data/en/outside-the-story/series.json":()=>e(()=>import("./series-dqakDLa9.js"),[]),"/src/data/en/outside-the-story/spy.json":()=>e(()=>import("./spy-DLpfZG_H.js"),[]),"/src/data/en/outside-the-story/sweets.json":()=>e(()=>import("./sweets-DDZ5JqsI.js"),[]),"/src/data/en/phrase-clue/animals/easy.json":()=>e(()=>import("./easy-vc2CgBiI.js"),[]),"/src/data/en/phrase-clue/animals/hard.json":()=>e(()=>import("./hard-BmQiyFGH.js"),[]),"/src/data/en/phrase-clue/animals/medium.json":()=>e(()=>import("./medium-CDppU-oU.js"),[]),"/src/data/en/phrase-clue/geography/easy.json":()=>e(()=>import("./easy-v49lXgS1.js"),[]),"/src/data/en/phrase-clue/geography/hard.json":()=>e(()=>import("./hard-Hc9ZYG1D.js"),[]),"/src/data/en/phrase-clue/geography/medium.json":()=>e(()=>import("./medium-Yt4_5ZKV.js"),[]),"/src/data/en/phrase-clue/science/easy.json":()=>e(()=>import("./easy-CXDUIzZm.js"),[]),"/src/data/en/phrase-clue/science/hard.json":()=>e(()=>import("./hard-BPi6SzUA.js"),[]),"/src/data/en/phrase-clue/science/medium.json":()=>e(()=>import("./medium-Dm_81XWt.js"),[]),"/src/data/en/picture-choice/animals/data.json":()=>e(()=>import("./data-CtXqoHRL.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])}),A=y.map(async n=>{try{const c=Object.entries(o),h=c.find(([t])=>t.includes(`/${p}/picture-choice/${n}/data.json`)||t.includes(`\\${p}\\picture-choice\\${n}\\data.json`))?.[1],m=c.find(([t])=>t.includes(`/en/picture-choice/${n}/data.json`)||t.includes(`\\en\\picture-choice\\${n}\\data.json`))?.[1],j=c.find(([t])=>t.endsWith(`/picture-choice/${n}/data.json`)||t.endsWith(`\\picture-choice\\${n}\\data.json`))?.[1],d=h??m??j;return d?((await d()).default?.levels??[]).map(t=>{if(typeof t!="object"||t===null)return null;const s=t,u=s.id,V=s.word,R=s.solution,I=s.options,D=s.sound;if((typeof u=="string"||typeof u=="number")&&typeof V=="string"&&typeof R=="string"&&Array.isArray(I)&&I.every(T=>typeof T=="string")){const T=Array.from(new Set(I.map(String)));return T.includes(R)||T.push(R),{id:String(u),word:String(V),sound:typeof D=="string"?String(D):"",solution:String(R),options:T}}return null}).filter(t=>t!==null):(console.warn(`PictureChoiceGameEngine: no module found for ${p}/${n}`),[])}catch(c){return console.error(`PictureChoiceGameEngine: Failed to load ${p}/${n}`,c),[]}}),f=(await Promise.all(A)).flat();return f.length===0?[{id:"error-level",word:"ERROR",sound:"",solution:"/assets/images/error.png",options:["/assets/images/error.png"]}]:x(f)}}const W=new z;function U(){const a=b(),{language:v,categories:p,gameMode:_,gameType:g}=w(),{loading:y,currentLevel:o,nextLevel:A}=$(W,{language:v,categories:p}),[i,f]=l.useState([]),[n,c]=l.useState(null),[h,m]=l.useState("idle"),j=l.useRef(null),d=l.useRef(null),L=s=>`${"/PowerLetter-for-Puzzles".replace(/\/$/,"")}/${s.replace(/^\//,"")}`,O=l.useCallback(()=>{const s=j.current;if(s)try{s.currentTime=0,s.play().catch(u=>console.error("Audio play failed:",u))}catch(u){console.error("Audio control failed:",u)}},[]),E=l.useCallback(s=>{o&&h!=="correct"&&(c(s),s===o.solution?m("correct"):(m("incorrect"),d.current=window.setTimeout(()=>m("idle"),1200)))},[h,o]),t=l.useCallback(()=>{a(_==="competitive"?`/team-config/${g}`:"/games")},[a,_,g]);return l.useEffect(()=>{o&&(f(x([...o.options])),m("idle"),c(null))},[o]),l.useEffect(()=>{const s=j.current;return()=>{if(d.current&&(clearTimeout(d.current),d.current=null),s)try{s.pause(),s.currentTime=0}catch(u){console.error("Failed to pause/reset audio during cleanup",u)}}},[o]),{loading:y,currentLevel:o,shuffledOptions:i,answerStatus:h,selectedOption:n,audioRef:j,getAssetPath:L,playSound:O,handleOptionClick:E,nextLevel:A,handleBack:t}}const Z=()=>{const{t:a,i18n:v}=C(),p=v.dir(),_=G("pictureChoice"),g=_?{title:_.title??"",description:_.description??"",steps:_.steps??[]}:void 0,{loading:y,currentLevel:o,shuffledOptions:A,answerStatus:i,selectedOption:f,audioRef:n,getAssetPath:c,playSound:h,handleOptionClick:m,nextLevel:j,handleBack:d}=U();if(y)return r.jsx("div",{className:"flex justify-center items-center h-screen",children:r.jsxs("p",{children:[a.loading,"..."]})});if(!o||o.solution==="ERROR")return r.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[r.jsx("p",{className:"text-xl font-semibold",children:a.noLevelsFound}),r.jsx(P,{onClick:d,children:a.back})]});const L=i==="correct"?a.congrats??"Correct!":i==="incorrect"?a.wrongAnswer??"Wrong! Try again":null,O=i==="correct"?"success":"error";return r.jsx(B,{title:a.pictureChoiceTitle??a.findThePictureTitle??"Find the Picture",levelIndex:0,onBack:d,instructions:g,notificationMessage:L,notificationType:O,promptContent:r.jsxs("div",{className:"relative bg-card rounded-lg p-6 flex items-center justify-center",children:[r.jsx("div",{className:"text-3xl font-bold",children:o.word}),o.sound&&r.jsxs(r.Fragment,{children:[r.jsx(P,{size:"icon",onClick:h,className:"absolute top-3 right-3 rounded-full bg-black/50 hover:bg-black/70","aria-label":a.playSound??"Play sound",children:r.jsx(K,{className:"h-6 w-6 text-white","aria-hidden":!0})}),r.jsx("audio",{ref:n,src:c(o.sound),preload:"auto"})]})]}),optionsContent:A.map(E=>{const t=f===E,s=E===o.solution;return r.jsxs(P,{onClick:()=>m(E),disabled:i==="correct",className:N("text-base h-36 flex items-center justify-center gap-2 transition-all duration-300 overflow-hidden p-0",t&&i==="correct"&&"ring-4 ring-green-500",t&&i==="incorrect"&&"ring-4 ring-red-500",!t&&i==="incorrect"&&s&&"bg-green-200 text-green-800 ring-2 ring-green-400",i==="idle"&&"bg-card text-card-foreground hover:bg-muted"),children:[r.jsx("div",{className:"w-full h-full flex items-center justify-center p-2",children:r.jsx("img",{src:c(E),alt:"",className:"max-h-full max-w-full object-contain"})}),t&&i==="correct"&&r.jsx(F,{className:"absolute top-2 right-2 text-green-600"}),t&&i==="incorrect"&&r.jsx(M,{className:"absolute top-2 right-2 text-red-600"})]},E)}),nextButtonContent:i==="correct"&&r.jsxs(P,{onClick:j,className:"w-full bg-green-600 hover:bg-green-700 text-lg py-6",children:[a.next," ",p==="rtl"?r.jsx(S,{className:"ml-2"}):r.jsx(k,{className:"ml-2"})]})})};export{Z as default};
