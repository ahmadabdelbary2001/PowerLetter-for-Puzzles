import{_ as t,r as A,j as h,c as J,B as ce}from"./index-VOouNmaK.js";import{B as ue,s as _e,u as me,G as he}from"./GameLayout-CcYzN9D8.js";import{G as pe}from"./GameControls-lsHgx_l_.js";import"./GameButton-BraQg9DL.js";function fe(l,o,u=70,s=50){if(o<=0)return`hsl(0, ${u}%, ${s}%)`;const a=Math.round(l*360/o)%360,j=s>50?s*.9:s*1.1;return`hsl(${a}, ${u}%, ${j}%)`}class ye extends ue{async loadLevels(o){const{language:u,difficulty:s}=o;if(!s)return[];try{const a=this.getModulePath(u,"",s),v=Object.assign({"/src/data/ar/formation/easy.json":()=>t(()=>import("./easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/hard.json":()=>t(()=>import("./hard-DzMXngiv.js"),[]),"/src/data/ar/img-choice/animals/data.json":()=>t(()=>import("./data-6hZ_2-dK.js"),[]),"/src/data/ar/img-clue/animals/data.json":()=>t(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/img-clue/fruits-and-vegetables/data.json":()=>t(()=>import("./data-DlhJ3pZw.js"),[]),"/src/data/ar/img-clue/shapes/data.json":()=>t(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/easy.json":()=>t(()=>import("./easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/medium.json":()=>t(()=>import("./medium-DnN41iEv.js"),[]),"/src/data/ar/outside-the-story/animals.json":()=>t(()=>import("./animals-BD_uC3F6.js"),[]),"/src/data/ar/outside-the-story/anime.json":()=>t(()=>import("./anime-X9XTb-jh.js"),[]),"/src/data/ar/outside-the-story/cars.json":()=>t(()=>import("./cars-LFoQ5kcr.js"),[]),"/src/data/ar/outside-the-story/cartoons.json":()=>t(()=>import("./cartoons-9ln4fVtF.js"),[]),"/src/data/ar/outside-the-story/characters.json":()=>t(()=>import("./characters-BClrgWDD.js"),[]),"/src/data/ar/outside-the-story/clothes.json":()=>t(()=>import("./clothes-DZukcyjc.js"),[]),"/src/data/ar/outside-the-story/drinks.json":()=>t(()=>import("./drinks-DWTisQdZ.js"),[]),"/src/data/ar/outside-the-story/foods.json":()=>t(()=>import("./foods-BPEl4jwc.js"),[]),"/src/data/ar/outside-the-story/football.json":()=>t(()=>import("./football-BkDTW0je.js"),[]),"/src/data/ar/outside-the-story/fruits-and-vegetables.json":()=>t(()=>import("./fruits-and-vegetables-CWZ59ral.js"),[]),"/src/data/ar/outside-the-story/gamers.json":()=>t(()=>import("./gamers-DU27ka0Y.js"),[]),"/src/data/ar/outside-the-story/geography.json":()=>t(()=>import("./geography-Bmt1Mp9F.js"),[]),"/src/data/ar/outside-the-story/k-pop.json":()=>t(()=>import("./k-pop-CvncURYW.js"),[]),"/src/data/ar/outside-the-story/science.json":()=>t(()=>import("./science-C1rxd0mO.js"),[]),"/src/data/ar/outside-the-story/series.json":()=>t(()=>import("./series-DgCSJJru.js"),[]),"/src/data/ar/outside-the-story/spy.json":()=>t(()=>import("./spy-CTUdze8o.js"),[]),"/src/data/ar/outside-the-story/sweets.json":()=>t(()=>import("./sweets-0_2hbNMS.js"),[]),"/src/data/ar/phrase-clue/animals/easy.json":()=>t(()=>import("./easy-B_GJKLA_.js"),[]),"/src/data/ar/phrase-clue/animals/hard.json":()=>t(()=>import("./hard-7EfMbXs4.js"),[]),"/src/data/ar/phrase-clue/animals/medium.json":()=>t(()=>import("./medium-Bcn1oCUk.js"),[]),"/src/data/ar/phrase-clue/geography/easy.json":()=>t(()=>import("./easy-B_kcdeCx.js"),[]),"/src/data/ar/phrase-clue/geography/hard.json":()=>t(()=>import("./hard-BCuCMNGp.js"),[]),"/src/data/ar/phrase-clue/geography/medium.json":()=>t(()=>import("./medium-CkoNY3Du.js"),[]),"/src/data/ar/phrase-clue/science/easy.json":()=>t(()=>import("./easy-f07zg_lU.js"),[]),"/src/data/ar/phrase-clue/science/hard.json":()=>t(()=>import("./hard-CV32qLEY.js"),[]),"/src/data/ar/phrase-clue/science/medium.json":()=>t(()=>import("./medium-BtIrOjNp.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>t(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/formation/easy.json":()=>t(()=>import("./easy-CqPS8TrH.js"),[]),"/src/data/en/img-choice/animals/data.json":()=>t(()=>import("./data-CtXqoHRL.js"),[]),"/src/data/en/img-clue/animals/data.json":()=>t(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/img-clue/fruits-and-vegetables/data.json":()=>t(()=>import("./data-B6FoT8eG.js"),[]),"/src/data/en/img-clue/shapes/data.json":()=>t(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/easy.json":()=>t(()=>import("./easy-DqbTaQjR.js"),[]),"/src/data/en/outside-the-story/animals.json":()=>t(()=>import("./animals-D78oH89-.js"),[]),"/src/data/en/outside-the-story/anime.json":()=>t(()=>import("./anime-DXIlEidq.js"),[]),"/src/data/en/outside-the-story/cars.json":()=>t(()=>import("./cars-Cw03Nxyo.js"),[]),"/src/data/en/outside-the-story/cartoons.json":()=>t(()=>import("./cartoons-DwVIQVvA.js"),[]),"/src/data/en/outside-the-story/characters.json":()=>t(()=>import("./characters-Dl2vwTPn.js"),[]),"/src/data/en/outside-the-story/clothes.json":()=>t(()=>import("./clothes-BiLKpCWj.js"),[]),"/src/data/en/outside-the-story/drinks.json":()=>t(()=>import("./drinks-CP1Emjyy.js"),[]),"/src/data/en/outside-the-story/foods.json":()=>t(()=>import("./foods-BKBSmJG2.js"),[]),"/src/data/en/outside-the-story/football.json":()=>t(()=>import("./football-B8eU_HgW.js"),[]),"/src/data/en/outside-the-story/fruits-and-vegetables.json":()=>t(()=>import("./fruits-and-vegetables-B5narx4J.js"),[]),"/src/data/en/outside-the-story/gamers.json":()=>t(()=>import("./gamers-Dm5Tu0YA.js"),[]),"/src/data/en/outside-the-story/geography.json":()=>t(()=>import("./geography-Dw2uVeLE.js"),[]),"/src/data/en/outside-the-story/k-pop.json":()=>t(()=>import("./k-pop-BnHY6_tE.js"),[]),"/src/data/en/outside-the-story/science.json":()=>t(()=>import("./science-DF1sazzy.js"),[]),"/src/data/en/outside-the-story/series.json":()=>t(()=>import("./series-dqakDLa9.js"),[]),"/src/data/en/outside-the-story/spy.json":()=>t(()=>import("./spy-DLpfZG_H.js"),[]),"/src/data/en/outside-the-story/sweets.json":()=>t(()=>import("./sweets-DDZ5JqsI.js"),[]),"/src/data/en/phrase-clue/animals/easy.json":()=>t(()=>import("./easy-vc2CgBiI.js"),[]),"/src/data/en/phrase-clue/animals/hard.json":()=>t(()=>import("./hard-BmQiyFGH.js"),[]),"/src/data/en/phrase-clue/animals/medium.json":()=>t(()=>import("./medium-CDppU-oU.js"),[]),"/src/data/en/phrase-clue/geography/easy.json":()=>t(()=>import("./easy-v49lXgS1.js"),[]),"/src/data/en/phrase-clue/geography/hard.json":()=>t(()=>import("./hard-Hc9ZYG1D.js"),[]),"/src/data/en/phrase-clue/geography/medium.json":()=>t(()=>import("./medium-Yt4_5ZKV.js"),[]),"/src/data/en/phrase-clue/science/easy.json":()=>t(()=>import("./easy-CXDUIzZm.js"),[]),"/src/data/en/phrase-clue/science/hard.json":()=>t(()=>import("./hard-BPi6SzUA.js"),[]),"/src/data/en/phrase-clue/science/medium.json":()=>t(()=>import("./medium-Dm_81XWt.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>t(()=>import("./data-BDxquZu-.js"),[])})[a];return v?((await v()).default?.levels||[]).map(m=>this.validateLevel(m,s)).filter(m=>m!==null):[]}catch(a){return console.error(`LetterFlowGameEngine: Failed to load levels for ${u}/${s}.`,a),[this.getErrorLevel()]}}getGameId(){return"letter-flow"}getModulePath(o,u,s){return`/src/data/${o}/letter-flow/${s}.json`}validateLevel(o,u){const s=o;if(s&&typeof s=="object"&&"id"in s&&"solutionWord"in s&&"gridSize"in s&&"endpoints"in s){const{width:a,height:j}=s.gridSize,v=Array.from({length:a*j},(i,f)=>({x:f%a,y:Math.floor(f/a),letter:"",isUsed:!1})),R=s.endpoints,O=Array.from(new Set(R.map(i=>i.letter))),m=new Map;O.forEach((i,f)=>{m.set(i,fe(f,O.length,72,48))}),R.forEach(i=>{const f=i.y*a+i.x;f<v.length&&(v[f]={...i,isUsed:!1,color:m.get(i.letter)})});const L=s;return{id:String(L.id),difficulty:u??"easy",words:[L.solutionWord],board:v,solution:L.solutionWord,endpoints:L.endpoints.map(i=>({...i,color:m.get(i.letter)}))}}return null}getErrorLevel(){return{id:"error",difficulty:"easy",words:[],board:[],solution:"",endpoints:[]}}generateBoard(o,u,s,a){if(!a)return[];const j=_e(a.split("")),v=Math.ceil(Math.sqrt(j.length)),R=[];for(let O=0;O<v;O++)for(let m=0;m<v;m++){const L=O*v+m;L<j.length&&R.push({x:m,y:O,letter:j[L],isUsed:!1})}return R}}const xe=new ye,ee=24;function Ee(l,o=ee,u=68,s=48){return`hsl(${Math.round(l*360/o)%360}, ${u}%, ${s}%)`}function oe(l){if(!l)return;let o=0;const u=l.toUpperCase();for(let a=0;a<u.length;a++)o=(o<<5)-o+u.charCodeAt(a),o|=0;const s=Math.abs(o)%ee;return Ee(s,ee)}function ge(){const l=me({engine:xe,gameId:"letterFlow"}),{currentLevel:o,gameModeState:u,t:s,nextLevel:a}=l,{gameMode:j,teams:v,currentTeam:R,consumeHint:O}=u,[m,L]=A.useState([]),[i,f]=A.useState([]),[I,b]=A.useState([]),[S,k]=A.useState(null),[V,e]=A.useState(null),[r,E]=A.useState("playing");A.useEffect(()=>{o&&(L(o.board.map(n=>({...n}))),b([]),f([]),e(null),E("playing"))},[o]);const c=A.useMemo(()=>[...new Set(o?.endpoints.map(n=>n.letter)||[])],[o]),x=A.useMemo(()=>{const n=new Map;return o?.endpoints.forEach(d=>n.set(`${d.x}-${d.y}`,d.color)),n},[o]),_=A.useCallback(n=>{if(n)return oe(n)},[]),N=A.useCallback(n=>o?.endpoints.some(d=>d.x===n.x&&d.y===n.y&&d.letter===n.letter)??!1,[o]),F=A.useCallback(n=>I.filter(d=>d.cells.some(y=>n.some(D=>D.x===y.x&&D.y===y.y))),[I]),P=A.useCallback((n,d="info",y=1200)=>{k({messageKey:n,type:d,duration:y,options:{}}),y>0&&setTimeout(()=>k(null),y)},[]),re=A.useCallback(n=>{if(!N(n))return;const d=I.find(y=>y.word===n.letter);d&&(b(y=>y.filter(D=>D.word!==n.letter)),L(y=>y.map(D=>d.cells.some($=>$.x===D.x&&$.y===D.y)?{...D,isUsed:!1,color:x.get(`${D.x}-${D.y}`)??void 0}:D)),P(`Removed connection for ${n.letter}`,"info",900)),e(n.letter),f([n])},[I,N,P,x]),se=A.useCallback(n=>{if(!V||i.length===0)return;const d=i[i.length-1];if(d&&d.x===n.x&&d.y===n.y)return;const y=Math.abs(n.x-d.x),D=Math.abs(n.y-d.y);if(y===1&&D===1||y>1||D>1)return;const M=i.findIndex(C=>C.x===n.x&&C.y===n.y);if(M!==-1){f(C=>C.slice(0,M+1));return}if(n.isUsed)return;const $=[...i,n];if(N(n)&&!(i.length>0&&i[0].x===n.x&&i[0].y===n.y)&&n.letter===V){const C=F($);C.length>0&&(b(w=>w.filter(T=>!C.includes(T))),L(w=>w.map(T=>C.some(q=>q.cells.some(p=>p.x===T.x&&p.y===T.y))?{...T,isUsed:!1,color:x.get(`${T.x}-${T.y}`)??void 0}:T)),P("Existing connection(s) removed by new connection","warning",1100));const K=m.find(w=>w.x===$[0].x&&w.y===$[0].y)?.color||_($[0].letter);L(w=>w.map(T=>$.some(q=>q.x===T.x&&q.y===T.y)?{...T,isUsed:!0,color:x.get(`${T.x}-${T.y}`)??K}:T));const X={word:V,cells:$.map(w=>({...w,color:K})),startIndex:0};b(w=>[...w.filter(T=>T.word!==V),X]),P(`Connected ${V}`,"success",900),e(null),f([]);const U=[...I.map(w=>w.word),V].filter(Boolean),G=Array.from(new Set(U));c.every(w=>G.includes(w))&&(P(s.congrats,"success",2e3),j==="competitive"?setTimeout(()=>a(),2e3):E("won"))}else f($)},[V,i,N,F,m,_,I,c,a,s,P,x,j]),ne=A.useCallback(()=>{if(i.length>0){const n=i[i.length-1];(!N(n)||i.length>1&&i[0].x===n.x&&i[0].y===n.y||n.letter!==V)&&(e(null),f([]),P("Path must connect two endpoints!","error",1200))}},[i,N,V,P]),ae=A.useCallback(()=>{if(!o||I.length>=o.endpoints.length/2)return;if(j==="competitive"&&!O(v[R].id)){P(s.noHintsLeft,"error",2e3);return}const n=c.filter(p=>!I.some(g=>g.word===p));if(n.length===0)return;const d=n[0],y=o.endpoints.filter(p=>p.letter===d);if(y.length<2){P(`No path found for ${d}`,"error",1600);return}const D=new Map;m.forEach(p=>D.set(`${p.x}-${p.y}`,p));const M=`${y[0].x}-${y[0].y}`,$=`${y[1].x}-${y[1].y}`,W=[M],C=new Set([M]),K=new Map([[M,null]]);let X=!1;for(;W.length>0;){const p=W.shift();if(p===$){X=!0;break}const[g,B]=p.split("-").map(Number),z=[[g+1,B],[g-1,B],[g,B+1],[g,B-1]];for(const[Y,le]of z){const H=`${Y}-${le}`,Z=D.get(H);Z&&!C.has(H)&&(!Z.letter||Z.letter===d)&&(C.add(H),K.set(H,p),W.push(H))}}if(!X){P(`No path found for ${d}`,"error",1600);return}const U=[];let G=$;for(;G;){const p=D.get(G);p&&U.unshift(p),G=K.get(G)??null}const w=F(U);w.length>0&&(b(p=>p.filter(g=>!w.includes(g))),L(p=>p.map(g=>w.some(z=>z.cells.some(Y=>Y.x===g.x&&Y.y===g.y))?{...g,isUsed:!1,color:x.get(`${g.x}-${g.y}`)??void 0}:g)));const T=_(d);L(p=>p.map(g=>U.some(z=>z.x===g.x&&z.y===g.y)?{...g,isUsed:!0,color:x.get(`${g.x}-${g.y}`)??T}:g));const Q={word:d,cells:U.map(p=>({...p,color:T})),startIndex:0};b(p=>[...p.filter(g=>g.word!==d),Q]),P(`Hint: Connected ${d}`,"info",900),c.every(p=>[...I.map(g=>g.word),d].includes(p))&&(P(s.congrats,"success",2e3),j==="competitive"?setTimeout(()=>a(),2e3):E("won"))},[o,m,I,P,s,c,x,_,F,a,O,R,v,j]),ie=A.useCallback(()=>{if(I.length===0)return;const n=I[I.length-1];b(d=>d.slice(0,-1)),L(d=>d.map(y=>n.cells.some(M=>M.x===y.x&&M.y===y.y)?{...y,isUsed:!1,color:x.get(`${y.x}-${y.y}`)??void 0}:y)),f([]),e(null),P(`Undo: Removed connection for ${n.word}`,"info"),r==="won"&&E("playing")},[I,P,x,r]),de=A.useCallback(()=>{b([]),L(n=>n.map(d=>({...d,isUsed:!1,color:x.get(`${d.x}-${d.y}`)}))),f([]),e(null),E("playing"),P("Game reset - all connections removed","info")},[P,x]);return{...l,board:m,selectedPath:i,foundWords:I,notification:S,gameState:r,activeLetter:V,handleMouseDown:re,handleMouseEnter:se,handleMouseUp:ne,clearSelection:()=>{f([]),e(null)},onHint:ae,onUndo:ie,onReset:de}}function ve({letter:l,x:o,y:u,isSelected:s=!1,isFound:a=!1,isActive:j=!1,onMouseDown:v,onMouseEnter:R,onMouseUp:O,disabled:m=!1,className:L,connectionDirections:i=[],connectionColor:f,cellColor:I}){const b={x:o,y:u,letter:l},S=c=>{m||!v||(c.target.setPointerCapture(c.pointerId),v(b))},k=c=>{if(c.buttons!==1||m||!R)return;const _=document.elementFromPoint(c.clientX,c.clientY)?.closest("[data-cell-x]");if(_){const N=parseInt(_.dataset.cellX||"0",10),F=parseInt(_.dataset.cellY||"0",10),P=_.querySelector(".cell-letter");R({x:N,y:F,letter:P?.textContent?.trim()||""})}},V=c=>{m||!O||(c.target.releasePointerCapture(c.pointerId),O())},e=c=>{m||!v||(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),v(b))},r=56,E=f??I??void 0;return h.jsxs("div",{role:"button",tabIndex:m?-1:0,"aria-disabled":m,"aria-pressed":s||void 0,"data-cell-x":o,"data-cell-y":u,onPointerDown:S,onPointerMove:k,onPointerUp:V,onPointerCancel:V,onKeyDown:e,className:J("aspect-square flex items-center justify-center rounded-md text-xl font-bold select-none relative transition-all duration-150 touch-none",{"bg-gray-50 dark:bg-gray-800":!s&&!a&&!j,"cursor-pointer":!m,"cursor-not-allowed opacity-70":m,"text-gray-900 dark:text-gray-100":!s&&!a&&!j&&!E},L),children:[i.includes("top")&&h.jsx("div",{"aria-hidden":!0,className:"absolute top-0 left-1/2 transform -translate-x-1/2",style:{width:`${Math.max(6,r*.1)}%`,height:"50%",background:f,zIndex:0}}),i.includes("bottom")&&h.jsx("div",{"aria-hidden":!0,className:"absolute bottom-0 left-1/2 transform -translate-x-1/2",style:{width:`${Math.max(6,r*.1)}%`,height:"50%",background:f,zIndex:0}}),i.includes("left")&&h.jsx("div",{"aria-hidden":!0,className:"absolute left-0 top-1/2 transform -translate-y-1/2",style:{height:`${Math.max(6,r*.1)}%`,width:"50%",background:f,zIndex:0}}),i.includes("right")&&h.jsx("div",{"aria-hidden":!0,className:"absolute right-0 top-1/2 transform -translate-y-1/2",style:{height:`${Math.max(6,r*.1)}%`,width:"50%",background:f,zIndex:0}}),h.jsx("div",{className:"flex items-center justify-center rounded-full z-10 pointer-events-none",style:{width:`${r}%`,height:`${r}%`,background:E??"#ffffff",boxShadow:E?"0 2px 8px rgba(0,0,0,0.12)":void 0,border:E?"none":"1px solid rgba(0,0,0,0.06)"},children:l?h.jsx("span",{className:"text-sm font-bold cell-letter",style:{color:E?"#fff":"#111"},children:l}):null})]})}function te(l){return oe(l)}function je({cells:l,selectedPath:o,foundWords:u,activeLetter:s,onMouseDown:a,onMouseEnter:j,onMouseUp:v,className:R,dir:O="ltr"}){const m=l.length===0?0:Math.max(...l.map(e=>e.x))+1,L=O==="rtl",i=e=>`${e.x}-${e.y}`,f=new Map;o.forEach(e=>f.set(i(e),e));const I=new Map;u.forEach(e=>e.cells.forEach(r=>I.set(i(r),{word:e.word,cells:e.cells})));const b=e=>{const r=[],E=[...u.map(c=>c.cells),o];for(const c of E){const x=c.findIndex(_=>_.x===e.x&&_.y===e.y);if(x!==-1){if(x>0){const _=c[x-1];_.x===e.x-1&&_.y===e.y&&r.push("left"),_.x===e.x+1&&_.y===e.y&&r.push("right"),_.x===e.x&&_.y===e.y-1&&r.push("top"),_.x===e.x&&_.y===e.y+1&&r.push("bottom")}if(x<c.length-1){const _=c[x+1];_.x===e.x-1&&_.y===e.y&&r.push("left"),_.x===e.x+1&&_.y===e.y&&r.push("right"),_.x===e.x&&_.y===e.y-1&&r.push("top"),_.x===e.x&&_.y===e.y+1&&r.push("bottom")}}}return[...new Set(r)]},S=e=>{for(const r of u)if(r.cells.some(E=>E.x===e.x&&E.y===e.y)){const E=r.cells[0]?.color??r.cells.find(x=>x.color)?.color;if(E)return E;const c=l.find(x=>x.x===r.cells[0].x&&x.y===r.cells[0].y);return c?.color?c.color:te(r.word)}if(o&&o.length>0&&o.some(r=>r.x===e.x&&r.y===e.y)){const r=o[0];if(r?.color)return r.color;const E=l.find(c=>c.x===r.x&&c.y===r.y);return E?.color?E.color:te(r?.letter)}if(e.color)return e.color},k=e=>f.has(i(e)),V=e=>I.has(i(e));return h.jsx("div",{className:J("grid gap-1 mx-auto max-w-md",R,{"rtl-direction":L}),style:{gridTemplateColumns:`repeat(${m}, minmax(0, 1fr))`,direction:L?"rtl":"ltr",touchAction:"none"},children:l.map(e=>{const r=b(e),E=S(e),c=V(e)||e.letter!==""&&e.letter!==s&&e.isUsed;return h.jsx(ve,{letter:e.letter,x:e.x,y:e.y,isSelected:k(e),isFound:V(e),isActive:s&&e.letter===s?!0:void 0,onMouseDown:a,onMouseEnter:j,onMouseUp:v,disabled:c,connectionDirections:r,connectionColor:E,cellColor:e.color},`${e.x}-${e.y}`)})})}function Le({foundWords:l,t:o,className:u}){return l.length===0?null:h.jsxs("div",{className:J("mt-6",u),children:[h.jsxs("div",{className:"text-lg font-semibold mb-2",children:[o.selected,":"]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((s,a)=>h.jsx("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-md",children:s.word},a))})]})}function Ie({foundWords:l,totalWords:o,t:u,className:s}){const a=l.length/o;return h.jsxs("div",{className:J("mt-6 text-center",s),children:[h.jsxs("div",{className:"text-gray-600",children:[u.selected," ",l.length," ",u.of," ",o]}),h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-2",children:h.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${a*100}%`}})})]})}function Pe(){A.useEffect(()=>{const l=EventTarget.prototype.addEventListener;return EventTarget.prototype.addEventListener=function(o,u,s){if((o==="touchmove"||o==="touchstart"||o==="touchend")&&typeof s=="object"&&s&&!("passive"in s)){const a={...s,passive:!1};return l.call(this,o,u,a)}return l.call(this,o,u,s)},()=>{EventTarget.prototype.addEventListener=l}},[])}const we=({boardContent:l,foundWordsContent:o,progressContent:u,gameControlsContent:s,notification:a,onClearNotification:j,children:v,...R})=>h.jsxs(he,{...R,notification:a,onClearNotification:j,children:[v,h.jsxs("div",{className:"flex flex-col items-center gap-4",children:[h.jsx("div",{className:"w-full touch-none transition-colors duration-300",children:l}),o,h.jsx("div",{className:"w-full max-w-md",children:s}),u]})]}),Oe=()=>{Pe();const{loading:l,currentLevel:o,board:u,selectedPath:s,foundWords:a,notification:j,onClearNotification:v,gameState:R,activeLetter:O,handleBack:m,handleMouseDown:L,handleMouseEnter:i,handleMouseUp:f,onHint:I,onUndo:b,onReset:S,clearSelection:k,currentLevelIndex:V,nextLevel:e,t:r,instructions:E,gameModeState:c}=ge();if(l)return h.jsx("div",{className:"flex justify-center items-center h-screen",children:h.jsxs("p",{children:[r.loading,"..."]})});if(!o)return h.jsxs("div",{className:"flex flex-col items-center justify-center h-screen gap-4 p-4 text-center",children:[h.jsx("p",{className:"text-xl font-semibold",children:r.noLevelsFound}),h.jsx(ce,{onClick:m,children:r.back})]});const x=Math.floor((o?.endpoints.length??0)/2);return h.jsx(we,{title:r.letterFlowTitle??o.id,levelIndex:V??0,onBack:m,difficulty:o.difficulty,instructions:E,notification:j,onClearNotification:v,boardContent:h.jsx(je,{cells:u,selectedPath:s,foundWords:a,activeLetter:O,onMouseDown:_=>L({..._,isUsed:!1}),onMouseEnter:_=>i({..._,isUsed:!1}),onMouseUp:f}),foundWordsContent:a.length>0?h.jsx(Le,{foundWords:a,t:{selected:r.selected}}):null,gameControlsContent:h.jsx(pe,{onReset:S,onRemoveLetter:b,onClearAnswer:k,onHint:I,onNextLevel:e,canRemove:a.length>0,canClear:s.length>0,canCheck:!1,canNext:R==="won",canHint:a.length<x,gameState:R,gameMode:c.gameMode,isKidsMode:!1,labels:{remove:r.undo,clear:r.clear,check:r.check,hint:r.hint,showSolution:r.showSolution,reset:r.reset,prev:r.prev,next:r.next},showOnly:["remove","hint","reset","next"]}),progressContent:h.jsx(Ie,{foundWords:a,totalWords:x,t:{selected:r.selected,of:r.of}}),children:null})};export{Oe as default};
