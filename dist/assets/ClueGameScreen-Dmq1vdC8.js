import{_ as e,u as Y,a as Z,b as ee,c as N,r as c,j as _,B as te,d as se}from"./index-q4Kcks6h.js";import{u as oe,S as ae,L as re}from"./useGameControls-DDjLwNCc.js";import{G as ne}from"./GameControls-DtC86uxa.js";import{G as ie}from"./GameLayout-CijemBkG.js";import{s as _e,g as ce,u as le,a as de,N as ue}from"./useInstructions-Dfj8CYVP.js";import"./GameButton-waPsRqqP.js";import"./circle-check-big-DQ4bArJI.js";class me{async loadLevels(l){const{language:y,categories:v,difficulty:m}=l,R=["animals","science","geography"],A=(v.includes("general")?R:v).map(async i=>{try{const p=`/src/data/${y}/clue/${i}/${y}-clue-${i}-${m}.json`,a=Object.assign({"/src/data/ar/clue/animals/ar-clue-animals-easy.json":()=>e(()=>import("./ar-clue-animals-easy-B_GJKLA_.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-hard.json":()=>e(()=>import("./ar-clue-animals-hard-7EfMbXs4.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-medium.json":()=>e(()=>import("./ar-clue-animals-medium-Bcn1oCUk.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-words.json":()=>e(()=>import("./ar-clue-animals-words-DxH5pZeF.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-easy.json":()=>e(()=>import("./ar-clue-geography-easy-B_kcdeCx.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-hard.json":()=>e(()=>import("./ar-clue-geography-hard-BCuCMNGp.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-medium.json":()=>e(()=>import("./ar-clue-geography-medium-CkoNY3Du.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-words.json":()=>e(()=>import("./ar-clue-geography-words-C7oqRjv9.js"),[]),"/src/data/ar/clue/science/ar-clue-science-easy.json":()=>e(()=>import("./ar-clue-science-easy-f07zg_lU.js"),[]),"/src/data/ar/clue/science/ar-clue-science-hard.json":()=>e(()=>import("./ar-clue-science-hard-CV32qLEY.js"),[]),"/src/data/ar/clue/science/ar-clue-science-medium.json":()=>e(()=>import("./ar-clue-science-medium-BtIrOjNp.js"),[]),"/src/data/ar/clue/science/ar-clue-science-words.json":()=>e(()=>import("./ar-clue-science-words-DpIQpR0-.js"),[]),"/src/data/ar/formation/ar-formation-easy.json":()=>e(()=>import("./ar-formation-easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/ar-formation-hard.json":()=>e(()=>import("./ar-formation-hard-CRxFgu7h.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits-and-vegetables/data.json":()=>e(()=>import("./data-DlhJ3pZw.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/ar-flow-easy.json":()=>e(()=>import("./ar-flow-easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/ar-flow-medium.json":()=>e(()=>import("./ar-flow-medium-BL27Zp8Y.js"),[]),"/src/data/ar/outside-the-story/animals.json":()=>e(()=>import("./animals-BD_uC3F6.js"),[]),"/src/data/ar/outside-the-story/anime.json":()=>e(()=>import("./anime-X9XTb-jh.js"),[]),"/src/data/ar/outside-the-story/cars.json":()=>e(()=>import("./cars-LFoQ5kcr.js"),[]),"/src/data/ar/outside-the-story/cartoons.json":()=>e(()=>import("./cartoons-9ln4fVtF.js"),[]),"/src/data/ar/outside-the-story/characters.json":()=>e(()=>import("./characters-BClrgWDD.js"),[]),"/src/data/ar/outside-the-story/clothes.json":()=>e(()=>import("./clothes-DZukcyjc.js"),[]),"/src/data/ar/outside-the-story/drinks.json":()=>e(()=>import("./drinks-DWTisQdZ.js"),[]),"/src/data/ar/outside-the-story/foods.json":()=>e(()=>import("./foods-BPEl4jwc.js"),[]),"/src/data/ar/outside-the-story/football.json":()=>e(()=>import("./football-BkDTW0je.js"),[]),"/src/data/ar/outside-the-story/fruits-and-vegetables.json":()=>e(()=>import("./fruits-and-vegetables-CWZ59ral.js"),[]),"/src/data/ar/outside-the-story/gamers.json":()=>e(()=>import("./gamers-DU27ka0Y.js"),[]),"/src/data/ar/outside-the-story/geography.json":()=>e(()=>import("./geography-Bmt1Mp9F.js"),[]),"/src/data/ar/outside-the-story/k-pop.json":()=>e(()=>import("./k-pop-CvncURYW.js"),[]),"/src/data/ar/outside-the-story/science.json":()=>e(()=>import("./science-C1rxd0mO.js"),[]),"/src/data/ar/outside-the-story/series.json":()=>e(()=>import("./series-DgCSJJru.js"),[]),"/src/data/ar/outside-the-story/spy.json":()=>e(()=>import("./spy-CTUdze8o.js"),[]),"/src/data/ar/outside-the-story/sweets.json":()=>e(()=>import("./sweets-0_2hbNMS.js"),[]),"/src/data/ar/picture-choice/animals/data.json":()=>e(()=>import("./data-6hZ_2-dK.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/clue/animals/en-clue-animals-easy.json":()=>e(()=>import("./en-clue-animals-easy-vc2CgBiI.js"),[]),"/src/data/en/clue/animals/en-clue-animals-hard.json":()=>e(()=>import("./en-clue-animals-hard-BmQiyFGH.js"),[]),"/src/data/en/clue/animals/en-clue-animals-medium.json":()=>e(()=>import("./en-clue-animals-medium-CDppU-oU.js"),[]),"/src/data/en/clue/animals/en-clue-animals-words.json":()=>e(()=>import("./en-clue-animals-words-OyMRQ2OB.js"),[]),"/src/data/en/clue/geography/en-clue-geography-easy.json":()=>e(()=>import("./en-clue-geography-easy-v49lXgS1.js"),[]),"/src/data/en/clue/geography/en-clue-geography-hard.json":()=>e(()=>import("./en-clue-geography-hard-Hc9ZYG1D.js"),[]),"/src/data/en/clue/geography/en-clue-geography-medium.json":()=>e(()=>import("./en-clue-geography-medium-Yt4_5ZKV.js"),[]),"/src/data/en/clue/geography/en-clue-geography-words.json":()=>e(()=>import("./en-clue-geography-words-BJFrdNPX.js"),[]),"/src/data/en/clue/science/en-clue-science-easy.json":()=>e(()=>import("./en-clue-science-easy-CXDUIzZm.js"),[]),"/src/data/en/clue/science/en-clue-science-hard.json":()=>e(()=>import("./en-clue-science-hard-Dqcig8Ht.js"),[]),"/src/data/en/clue/science/en-clue-science-medium.json":()=>e(()=>import("./en-clue-science-medium-Dm_81XWt.js"),[]),"/src/data/en/clue/science/en-clue-science-words.json":()=>e(()=>import("./en-clue-science-words-BdiwMlAj.js"),[]),"/src/data/en/formation/en-formation-easy.json":()=>e(()=>import("./en-formation-easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits-and-vegetables/data.json":()=>e(()=>import("./data-B6FoT8eG.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/en-flow-easy.json":()=>e(()=>import("./en-flow-easy-DqbTaQjR.js"),[]),"/src/data/en/outside-the-story/animals.json":()=>e(()=>import("./animals-D78oH89-.js"),[]),"/src/data/en/outside-the-story/anime.json":()=>e(()=>import("./anime-DXIlEidq.js"),[]),"/src/data/en/outside-the-story/cars.json":()=>e(()=>import("./cars-Cw03Nxyo.js"),[]),"/src/data/en/outside-the-story/cartoons.json":()=>e(()=>import("./cartoons-DwVIQVvA.js"),[]),"/src/data/en/outside-the-story/characters.json":()=>e(()=>import("./characters-Dl2vwTPn.js"),[]),"/src/data/en/outside-the-story/clothes.json":()=>e(()=>import("./clothes-BiLKpCWj.js"),[]),"/src/data/en/outside-the-story/drinks.json":()=>e(()=>import("./drinks-CP1Emjyy.js"),[]),"/src/data/en/outside-the-story/foods.json":()=>e(()=>import("./foods-BKBSmJG2.js"),[]),"/src/data/en/outside-the-story/football.json":()=>e(()=>import("./football-B8eU_HgW.js"),[]),"/src/data/en/outside-the-story/fruits-and-vegetables.json":()=>e(()=>import("./fruits-and-vegetables-B5narx4J.js"),[]),"/src/data/en/outside-the-story/gamers.json":()=>e(()=>import("./gamers-Dm5Tu0YA.js"),[]),"/src/data/en/outside-the-story/geography.json":()=>e(()=>import("./geography-Dw2uVeLE.js"),[]),"/src/data/en/outside-the-story/k-pop.json":()=>e(()=>import("./k-pop-BnHY6_tE.js"),[]),"/src/data/en/outside-the-story/science.json":()=>e(()=>import("./science-DF1sazzy.js"),[]),"/src/data/en/outside-the-story/series.json":()=>e(()=>import("./series-dqakDLa9.js"),[]),"/src/data/en/outside-the-story/spy.json":()=>e(()=>import("./spy-DLpfZG_H.js"),[]),"/src/data/en/outside-the-story/sweets.json":()=>e(()=>import("./sweets-DDZ5JqsI.js"),[]),"/src/data/en/picture-choice/animals/data.json":()=>e(()=>import("./data-CtXqoHRL.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])})[p];if(!a)return console.warn(`Module not found for path: ${p}`),[];const j=await a();return(j.default?.levels||j.levels||[]).map(r=>{if(typeof r=="object"&&r!==null){const E=r;return{id:String(E.id??`${m}-${Math.random().toString(36).slice(2,8)}`),clue:String(E.clue??""),solution:String(E.solution??""),difficulty:m}}return null}).filter(r=>r!==null)}catch(p){return console.error(`ClueGameEngine: Failed to load levels for ${y}/${i}/${m}.`,p),[]}}),L=(await Promise.all(A)).flat();return L.length===0?[{id:"error-level",difficulty:"easy",clue:"Could not load levels for the selected categories.",solution:"ERROR"}]:_e(L)}generateLetters(l,y,v){return ce(l,y,v,!1)}}const M=new me;function pe(){const s=Y(),l=Z(),y=ee(),{language:v,categories:m,difficulty:R,gameMode:d,updateScore:A,currentTeam:T,setCurrentTeam:L,teams:i,nextTurn:p,consumeHint:I}=y,{t:a}=N(),{loading:j,levels:w,currentLevel:r,currentLevelIndex:E,solution:u,notification:k,setNotification:o,gameState:n,dispatch:t,nextLevel:h,resetLevel:O}=le(M,{language:v,categories:m,difficulty:R}),[g,b]=c.useState([]),[P,x]=c.useState([]),[D,C]=c.useState(new Set),{canRemove:V,canClear:G,canCheck:H,canHint:B}=oe(n),W=c.useCallback($=>{n.gameState==="playing"&&t({type:"PLACE",gridIndex:$,letter:g[$]})},[n.gameState,g,t]),F=c.useCallback(()=>t({type:"REMOVE_LAST"}),[t]),z=c.useCallback(()=>t({type:"CLEAR"}),[t]),K=c.useCallback(()=>{if(n.gameState!=="playing")return;if(n.answerSlots.join("")===u){t({type:"SET_GAME_STATE",payload:"won"});const f=r?.difficulty==="medium"?20:r?.difficulty==="hard"?30:10;d==="competitive"?(A(i[T].id,f),o({message:`${a.congrats} +${f}`,type:"success"}),setTimeout(()=>{h(),t({type:"SET_GAME_STATE",payload:"playing"}),o(null)},2e3)):o({message:a.congrats,type:"success"})}else{t({type:"SET_GAME_STATE",payload:"failed"});const f=n.answerSlots.join("");if(f&&!P.includes(f)&&x(S=>[...S,f]),o({message:a.wrongAnswer,type:"error"}),d==="competitive"){const S=new Set(D);S.add(T),C(S),S.size===i.length?setTimeout(()=>{t({type:"SHOW",solution:u,letters:g}),o({message:`${a.solutionWas}: ${u}`,type:"error"}),C(new Set),setTimeout(()=>{h(),t({type:"SET_GAME_STATE",payload:"playing"}),o(null)},2500)},2e3):setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),o(null),p("lose")},2e3)}else setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),o(null)},2e3)}},[n,u,r,d,i,T,A,p,h,a,P,t,o,D,g]),q=c.useCallback(()=>{n.gameState==="playing"&&(t({type:"SHOW",solution:u,letters:g}),o({message:`${a.solutionWas}: ${u}`,type:"error"}),d==="competitive"&&setTimeout(()=>{p("lose"),h(),t({type:"SET_GAME_STATE",payload:"playing"}),o(null)},2500))},[n.gameState,u,g,d,p,h,a.solutionWas,t,o]),J=c.useCallback(()=>{if(d==="competitive"&&!I(i[T].id)){o({message:a.noHintsLeft,type:"error"}),setTimeout(()=>o(null),2e3);return}t({type:"HINT",solution:u,letters:g})},[d,i,T,I,a.noHintsLeft,u,g,t,o]),Q=c.useCallback(async()=>{},[]),U=c.useCallback(()=>{s(d==="competitive"?`/team-config/${l.gameType}`:`/game-mode/${l.gameType}`)},[s,l.gameType,d]),X=c.useCallback(()=>{E>0&&O()},[E,O]);return c.useEffect(()=>{r&&M.generateLetters&&b(M.generateLetters(r.solution,r.difficulty,v)),i.length>0&&L(E%i.length),x([])},[r,v,i.length,E,L]),{loading:j,levels:w,currentLevel:r,solution:u,letters:g,notification:k,wrongAnswers:P,gameState:n.gameState,answerSlots:n.answerSlots,slotIndices:n.slotIndices,hintIndices:n.hintIndices,currentLevelIndex:E,onCheck:K,onShow:q,onLetterClick:W,onRemove:F,onClear:z,onHint:J,nextLevel:h,prevLevel:X,handleBack:U,handleRevealOrListSolutions:Q,resetLevel:O,canRemove:V,canClear:G,canCheck:H,canHint:B}}const Ae=()=>{const{t:s}=N(),l=de("clue"),y=l!=null?{title:l.title,description:l.description??"",steps:l.steps??[]}:void 0,{loading:v,currentLevel:m,solution:R,letters:d,notification:A,wrongAnswers:T,gameState:L,answerSlots:i,slotIndices:p,hintIndices:I,currentLevelIndex:a,levels:j,onCheck:w,onShow:r,onLetterClick:E,onRemove:u,onClear:k,onHint:o,nextLevel:n,prevLevel:t,handleBack:h,resetLevel:O,canRemove:g,canClear:b,canCheck:P,canHint:x}=pe();if(v)return _.jsx("div",{className:"flex justify-center items-center h-screen",children:_.jsxs("p",{children:[s.loading,"..."]})});if(!m||m.solution==="ERROR")return _.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[_.jsx("p",{className:"text-xl font-semibold",children:s.noLevelsFound}),_.jsx(te,{onClick:h,children:s.back})]});const D=A?.message??null,C=A?.type??"info";return _.jsxs(ie,{title:m.clue,levelIndex:a,onBack:h,difficulty:m.difficulty,instructions:y,children:[D&&_.jsx(ue,{message:D,type:C}),_.jsx(ae,{solution:R,currentWord:i.join("")}),_.jsx(re,{letters:d,selectedIndices:p.filter(V=>V!==null),onLetterClick:E,disabled:L!=="playing",hintIndices:I}),T.length>0&&_.jsxs("div",{className:"mt-2",children:[_.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[s.wrongAttempts,":"]}),_.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 justify-center",children:T.map((V,G)=>_.jsx(se,{variant:"destructive",className:"text-xs py-1",children:V},G))})]}),_.jsx(ne,{onRemoveLetter:u,onClearAnswer:k,onCheckAnswer:w,onHint:o,onShowSolution:r,onReset:O,onPrevLevel:t,onNextLevel:n,canRemove:g,canClear:b,canCheck:P,canHint:x,canPrev:a>0,canNext:a<j.length-1,gameState:L,isKidsMode:!1,labels:{remove:s.remove,clear:s.clear,check:s.check,hint:s.hint,showSolution:s.showSolution,reset:s.reset,prev:s.prev,next:s.next}})]})};export{Ae as default};
