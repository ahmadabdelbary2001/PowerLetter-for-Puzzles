import{_ as e,a as C,b as V,u as D,c as P,r as _,j as a,B as x,A as w,e as b}from"./index-54jaHOut.js";import{S as k,L as G,G as N}from"./GameControls-Bo8gBw6b.js";import{s as $,g as M,u as B,G as F}from"./gameUtils-DTAFBLfs.js";import{V as z}from"./volume-2-BtD0pf45.js";class U{async loadLevels(m){const{language:i,categories:g}=m,n=["animals","fruits","shapes"],j=(g.includes("general")?n:g).map(async d=>{try{const s=`/src/data/${d.charAt(0).toUpperCase()+d.slice(1)}/${i}/image-clue/data.json`,E=Object.assign({"/src/data/Animals/ar/clue/ar-clue-animals-easy.json":()=>e(()=>import("./ar-clue-animals-easy-B_GJKLA_.js"),[]),"/src/data/Animals/ar/clue/ar-clue-animals-hard.json":()=>e(()=>import("./ar-clue-animals-hard-7EfMbXs4.js"),[]),"/src/data/Animals/ar/clue/ar-clue-animals-medium.json":()=>e(()=>import("./ar-clue-animals-medium-Bcn1oCUk.js"),[]),"/src/data/Animals/ar/clue/ar-clue-animals-words.json":()=>e(()=>import("./ar-clue-animals-words-DxH5pZeF.js"),[]),"/src/data/Animals/ar/image-clue/data.json":()=>e(()=>import("./data-DK8CfFPE.js"),[]),"/src/data/Animals/ar/word-choice/data.json":()=>e(()=>import("./data-CtZNGJR9.js"),[]),"/src/data/Animals/en/clue/en-clue-animals-easy.json":()=>e(()=>import("./en-clue-animals-easy-vc2CgBiI.js"),[]),"/src/data/Animals/en/clue/en-clue-animals-hard.json":()=>e(()=>import("./en-clue-animals-hard-BmQiyFGH.js"),[]),"/src/data/Animals/en/clue/en-clue-animals-medium.json":()=>e(()=>import("./en-clue-animals-medium-CDppU-oU.js"),[]),"/src/data/Animals/en/clue/en-clue-animals-words.json":()=>e(()=>import("./en-clue-animals-words-OyMRQ2OB.js"),[]),"/src/data/Animals/en/image-clue/data.json":()=>e(()=>import("./data-DWMyu4A6.js"),[]),"/src/data/Animals/en/word-choice/data.json":()=>e(()=>import("./data-aBYoMs23.js"),[]),"/src/data/Fruits/ar/image-clue/data.json":()=>e(()=>import("./data-CenmuYLK.js"),[]),"/src/data/Fruits/en/image-clue/data.json":()=>e(()=>import("./data-OxJ4m8-5.js"),[]),"/src/data/Geography/ar/clue/ar-clue-geography-easy.json":()=>e(()=>import("./ar-clue-geography-easy-B_kcdeCx.js"),[]),"/src/data/Geography/ar/clue/ar-clue-geography-hard.json":()=>e(()=>import("./ar-clue-geography-hard-BCuCMNGp.js"),[]),"/src/data/Geography/ar/clue/ar-clue-geography-medium.json":()=>e(()=>import("./ar-clue-geography-medium-CkoNY3Du.js"),[]),"/src/data/Geography/ar/clue/ar-clue-geography-words.json":()=>e(()=>import("./ar-clue-geography-words-C7oqRjv9.js"),[]),"/src/data/Geography/en/clue/en-clue-geography-easy.json":()=>e(()=>import("./en-clue-geography-easy-v49lXgS1.js"),[]),"/src/data/Geography/en/clue/en-clue-geography-hard.json":()=>e(()=>import("./en-clue-geography-hard-Hc9ZYG1D.js"),[]),"/src/data/Geography/en/clue/en-clue-geography-medium.json":()=>e(()=>import("./en-clue-geography-medium-Yt4_5ZKV.js"),[]),"/src/data/Geography/en/clue/en-clue-geography-words.json":()=>e(()=>import("./en-clue-geography-words-BJFrdNPX.js"),[]),"/src/data/Science/ar/clue/ar-clue-science-easy.json":()=>e(()=>import("./ar-clue-science-easy-f07zg_lU.js"),[]),"/src/data/Science/ar/clue/ar-clue-science-hard.json":()=>e(()=>import("./ar-clue-science-hard-CV32qLEY.js"),[]),"/src/data/Science/ar/clue/ar-clue-science-medium.json":()=>e(()=>import("./ar-clue-science-medium-BtIrOjNp.js"),[]),"/src/data/Science/ar/clue/ar-clue-science-words.json":()=>e(()=>import("./ar-clue-science-words-DpIQpR0-.js"),[]),"/src/data/Science/en/clue/en-clue-science-easy.json":()=>e(()=>import("./en-clue-science-easy-CXDUIzZm.js"),[]),"/src/data/Science/en/clue/en-clue-science-hard.json":()=>e(()=>import("./en-clue-science-hard-Dqcig8Ht.js"),[]),"/src/data/Science/en/clue/en-clue-science-medium.json":()=>e(()=>import("./en-clue-science-medium-Dm_81XWt.js"),[]),"/src/data/Science/en/clue/en-clue-science-words.json":()=>e(()=>import("./en-clue-science-words-BdiwMlAj.js"),[]),"/src/data/Shapes/ar/image-clue/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/Shapes/en/image-clue/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[])})[s];return E?((await E()).default?.levels||[]).map(t=>typeof t=="object"&&t!==null&&"id"in t&&"image"in t&&"sound"in t&&"solution"in t?{id:String(t.id),image:String(t.image),sound:String(t.sound),solution:String(t.solution)}:null).filter(t=>t!==null):(console.warn(`Module not found for path: ${s}`),[])}catch(l){return console.error(`ImgClueGameEngine: Failed to load levels for ${i}/${d}.`,l),[]}}),p=(await Promise.all(j)).flat();return p.length===0?[{id:"error-level",image:"/assets/images/error.png",sound:"",solution:"ERROR"}]:$(p)}generateLetters(m,i,g){return M(m,i,g,!0)}}const S=new U;function K(){const o=C(),m=V(),{language:i,categories:g}=D(),{t:n}=P(),{loading:y,levels:j,currentLevel:u,solution:p,notification:d,setNotification:l,gameState:s,dispatch:r,nextLevel:E}=B(S,{language:i,categories:g}),[A,L]=_.useState([]),t=_.useRef(null),f=h=>`${"/PowerLetter-for-Puzzles/".replace(/\/$/,"")}/${h.replace(/^\//,"")}`,T=_.useCallback(()=>{t.current?.play().catch(h=>console.error("Audio play failed:",h))},[]),R=_.useCallback(h=>{s.gameState==="playing"&&r({type:"PLACE",gridIndex:h,letter:A[h]})},[s.gameState,A,r]),v=_.useCallback(()=>r({type:"REMOVE_LAST"}),[r]),I=_.useCallback(()=>r({type:"CLEAR"}),[r]),c=_.useCallback(()=>{if(s.gameState!=="playing")return;s.answerSlots.join("")===p?(r({type:"SET_GAME_STATE",payload:"won"}),l({message:n.congrats,type:"success"})):(r({type:"SET_GAME_STATE",payload:"failed"}),l({message:n.wrongAnswer,type:"error"}),setTimeout(()=>{r({type:"CLEAR"}),r({type:"SET_GAME_STATE",payload:"playing"}),l(null)},1500))},[s,p,n,r,l]),O=_.useCallback(()=>o(`/game-mode/${m.gameType}`),[o,m.gameType]);return _.useEffect(()=>{u&&S.generateLetters&&L(S.generateLetters(u.solution,"easy",i))},[u,i]),{loading:y,levels:j,currentLevel:u,solution:p,letters:A,notification:d,audioRef:t,gameState:s.gameState,answerSlots:s.answerSlots,slotIndices:s.slotIndices,hintIndices:s.hintIndices,getAssetPath:f,playSound:T,onCheck:c,onLetterClick:R,onRemove:v,onClear:I,nextLevel:E,handleBack:O}}const X=()=>{const{t:o,dir:m}=P(),{loading:i,levels:g,currentLevel:n,solution:y,letters:j,notification:u,audioRef:p,gameState:d,answerSlots:l,slotIndices:s,hintIndices:r,getAssetPath:E,playSound:A,onCheck:L,onLetterClick:t,onRemove:f,onClear:T,nextLevel:R,handleBack:v}=K();if(i)return a.jsx("div",{className:"flex justify-center items-center h-screen",children:a.jsxs("p",{children:[o.loading,"..."]})});if(!n||n.solution==="ERROR")return a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[a.jsx("p",{className:"text-xl font-semibold",children:o.noLevelsFound}),a.jsx(x,{onClick:v,children:o.back})]});const I=g.findIndex(c=>c.id===n.id);return a.jsxs(F,{title:o.imageClueTitle,levelIndex:I,onBack:v,layoutType:"image",children:[a.jsxs("div",{className:"relative aspect-video bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:[a.jsx("img",{src:E(n.image),alt:y,className:"max-h-full max-w-full object-contain"}),a.jsx(x,{size:"icon",onClick:A,className:"absolute top-3 right-3 rounded-full bg-black/50 hover:bg-black/70",children:a.jsx(z,{className:"h-6 w-6 text-white"})}),a.jsx("audio",{ref:p,src:E(n.sound),preload:"auto"})]}),a.jsx(k,{solution:y,currentWord:l.join("")}),a.jsx(G,{letters:j,selectedIndices:s.filter(c=>c!==null),onLetterClick:t,disabled:d!=="playing",hintIndices:r}),u&&a.jsx("div",{role:"status",className:`text-center p-3 rounded-lg text-lg font-bold ${u.type==="error"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:u.message}),d==="won"?a.jsxs(x,{onClick:R,className:"w-full bg-green-600 hover:bg-green-700 text-lg py-6",children:[o.next," ",m==="rtl"?a.jsx(w,{className:"ml-2"}):a.jsx(b,{className:"ml-2"})]}):a.jsx(N,{onRemoveLetter:f,onClearAnswer:T,onCheckAnswer:L,canRemove:s.some(c=>c!==null),canClear:s.some(c=>c!==null),canCheck:l.every(c=>c!==""),gameState:d,labels:{remove:o.remove,clear:o.clear,check:o.check,hint:"",showSolution:"",reset:"",prev:"",next:""},isKidsMode:!0})]})};export{X as default};
