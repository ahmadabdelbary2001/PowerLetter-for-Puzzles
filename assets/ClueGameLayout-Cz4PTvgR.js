import{j as f,f as O,g as Y,r as d,b as q,c as J,G as Q,_ as e}from"./index-COWoNw8G.js";import{a as U,s as X,g as Z,N as ee}from"./Notification-Cvl_M7Gf.js";import{G as te}from"./GameLayout-BethVcVl.js";const re=Y("border-2 rounded-lg flex items-center justify-center font-bold",{variants:{size:{computer:"w-12 h-12 text-lg",tablet:"w-10 h-10 text-md",mobile:"w-8 h-8 text-sm"},filled:{true:"bg-primary border-primary text-primary-foreground",false:"bg-card"}},defaultVariants:{size:"mobile",filled:!1}});function se({char:p="",filled:u,size:o,className:c}){return f.jsx("div",{className:O(re({size:o,filled:u}),c),children:p})}function _e({solution:p,currentWord:u,className:o}){const c=[...p],E=[...u],[h,a]=d.useState("mobile");return d.useEffect(()=>{const l=()=>{const i=window.innerWidth;i>=1024?a("computer"):i>=768?a("tablet"):a("mobile")};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),f.jsx("div",{className:O("flex flex-wrap justify-center gap-2",o),children:c.map((l,i)=>f.jsx(se,{char:E[i]||"",filled:!!E[i],size:h},i))})}function oe({letter:p,isSelected:u=!1,isHint:o=!1,disabled:c=!1,onClick:E,className:h,deviceType:a="mobile"}){return f.jsxs("button",{onClick:E,disabled:c||o,className:O("rounded-lg border-2 font-bold transition-all duration-300 relative","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","shadow-card",{"bg-green-100 border-green-500 text-green-800 cursor-default":o,"bg-primary border-primary text-primary-foreground":u&&!o,"bg-card border-border text-card-foreground hover:border-primary/30":!u&&!o,"opacity-80":c},h),style:{width:a==="computer"?"min(8vw, 56px)":a==="tablet"?"min(10vw, 56px)":"min(9vw, 48px)",height:a==="computer"?"min(8vw, 56px)":a==="tablet"?"min(10vw, 56px)":"min(9vw, 48px)",fontSize:a==="computer"?"min(3vw, 18px)":a==="tablet"?"min(4vw, 18px)":"min(4.2vw, 15px)"},children:[p,o&&f.jsx("span",{className:"absolute -top-1 -right-1 text-xs",children:"ðŸ”’"})]})}function de({letters:p,selectedIndices:u,onLetterClick:o,disabled:c=!1,hintIndices:E,className:h}){const a=p,l=r=>r,[i,_]=d.useState("mobile");d.useEffect(()=>{const r=()=>{const v=window.innerWidth;v>=1024?_("computer"):v>=768?_("tablet"):_("mobile")};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const A=()=>{const r=a.length;return i==="computer"?r<=12?6:r<=18?9:12:i==="tablet"?r<=12||r<=18?6:8:r<=12?4:(r<=18,6)},m=(r,v)=>f.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:r.map((j,g)=>{const n=l(v+g),L=u.includes(n),P=E.includes(n);return f.jsx(oe,{letter:j,isSelected:L,isHint:P,disabled:c,onClick:()=>o(n),deviceType:i},n)})}),t=A(),s=[];for(let r=0;r<a.length;r+=t)s.push(a.slice(r,r+t));return f.jsx("div",{className:O("space-y-4",h),children:s.map((r,v)=>f.jsx("div",{children:m(r,v*t)},v))})}const G=p=>p.toLowerCase().trim();function ce({engine:p,language:u,categories:o,difficulty:c,getPoints:E=()=>1}){const{loading:h,levels:a,currentLevel:l,currentLevelIndex:i,solution:_,notification:A,setNotification:m,gameState:t,dispatch:s,nextLevel:r,prevLevel:v,resetLevel:j}=U(p,{language:u,categories:o,difficulty:c}),{gameMode:g,teams:n,currentTeam:L,setCurrentTeam:P,updateScore:w,nextTurn:I,consumeHint:b}=q(),{t:T}=J(),[V,x]=d.useState([]),[S,C]=d.useState(new Set);d.useEffect(()=>{g==="competitive"&&n.length>0&&P(i%n.length)},[i,g,n.length,P]),d.useEffect(()=>{x([]),C(new Set)},[i]);const M=d.useCallback(()=>{if(t.gameState!=="playing"||!l)return;if(G(t.answerSlots.join(""))===G(_))if(s({type:"SET_GAME_STATE",payload:"won"}),g==="competitive"){const R=E(l);w(n[L].id,R),m({message:`${T.congrats} +${R}`,type:"success"}),setTimeout(()=>r(),2e3)}else m({message:T.congrats,type:"success"});else{s({type:"SET_GAME_STATE",payload:"failed"});const R=t.answerSlots.join("");if(R&&!V.includes(R)&&x(D=>[...D,R]),m({message:T.wrongAnswer,type:"error"}),g==="competitive"){const D=new Set(S).add(L);C(D),D.size>=n.length?(I("lose"),setTimeout(()=>{s({type:"SHOW",solution:_,letters:t.letters}),m({message:`${T.solutionWas}: ${_}`,type:"error"}),setTimeout(()=>r(),2500)},2e3)):(I("lose"),setTimeout(()=>{s({type:"CLEAR"}),s({type:"SET_GAME_STATE",payload:"playing"})},2e3))}else setTimeout(()=>{s({type:"CLEAR"}),s({type:"SET_GAME_STATE",payload:"playing"})},2e3)}},[t,l,_,g,n,L,E,V,w,m,I,r,s,T,S]),k=d.useCallback(y=>{t.gameState==="playing"&&s({type:"PLACE",gridIndex:y,letter:t.letters[y]})},[t,s]),$=d.useCallback(()=>s({type:"REMOVE_LAST"}),[s]),z=d.useCallback(()=>s({type:"CLEAR"}),[s]),N=d.useCallback(()=>{t.gameState==="playing"&&(s({type:"SHOW",solution:_,letters:t.letters}),m({message:`${T.solutionWas}: ${_}`,type:"error"}),g==="competitive"?(I("lose"),setTimeout(()=>r(),2500)):s({type:"SET_GAME_STATE",payload:"won"}))},[s,_,t.letters,t.gameState,g,I,r,m,T.solutionWas]),W=d.useCallback(()=>{if(t.gameState==="playing"){if(g==="competitive"&&!b(n[L].id)){m({message:T.noHintsLeft,type:"error"});return}s({type:"HINT",solution:_,letters:t.letters})}},[s,_,t.letters,t.gameState,g,b,n,L,m,T.noHintsLeft]),H=d.useMemo(()=>t.gameState==="playing"&&t.slotIndices.some(y=>y!==null&&!t.hintIndices.includes(y)),[t]),B=d.useMemo(()=>t.gameState==="playing"&&t.slotIndices.filter(y=>y!==null).length>t.hintIndices.length,[t]),F=d.useMemo(()=>t.gameState==="playing"&&t.answerSlots.every(y=>y!==""),[t]),K=d.useMemo(()=>t.gameState!=="playing"?!1:g!=="competitive"||(n[L]?.hintsRemaining??0)>0,[t.gameState,g,n,L]);return{loading:h,levels:a,currentLevel:l,currentLevelIndex:i,solution:_,notification:A,setNotification:m,gameState:t,dispatch:s,nextLevel:r,prevLevel:v,resetLevel:j,letters:t.letters,wrongAnswers:V,onLetterClick:k,onRemove:$,onClear:z,onCheck:M,onShow:N,onHint:W,canRemove:H,canClear:B,canCheck:F,canHint:K}}class ue{async loadLevels(u){const{language:o,categories:c,difficulty:E}=u,h=this.getGameId(),l=Q.find(s=>s.id===h)?.availableCategories?.filter(s=>s!=="general")??[],i=c.includes("general")?l:c,_=Object.assign({"/src/data/ar/formation/easy.json":()=>e(()=>import("./easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/hard.json":()=>e(()=>import("./hard-DzMXngiv.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits-and-vegetables/data.json":()=>e(()=>import("./data-DlhJ3pZw.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/img-choice/animals/data.json":()=>e(()=>import("./data-6hZ_2-dK.js"),[]),"/src/data/ar/letter-flow/easy.json":()=>e(()=>import("./easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/medium.json":()=>e(()=>import("./medium-DnN41iEv.js"),[]),"/src/data/ar/outside-the-story/animals.json":()=>e(()=>import("./animals-BD_uC3F6.js"),[]),"/src/data/ar/outside-the-story/anime.json":()=>e(()=>import("./anime-X9XTb-jh.js"),[]),"/src/data/ar/outside-the-story/cars.json":()=>e(()=>import("./cars-LFoQ5kcr.js"),[]),"/src/data/ar/outside-the-story/cartoons.json":()=>e(()=>import("./cartoons-9ln4fVtF.js"),[]),"/src/data/ar/outside-the-story/characters.json":()=>e(()=>import("./characters-BClrgWDD.js"),[]),"/src/data/ar/outside-the-story/clothes.json":()=>e(()=>import("./clothes-DZukcyjc.js"),[]),"/src/data/ar/outside-the-story/drinks.json":()=>e(()=>import("./drinks-DWTisQdZ.js"),[]),"/src/data/ar/outside-the-story/foods.json":()=>e(()=>import("./foods-BPEl4jwc.js"),[]),"/src/data/ar/outside-the-story/football.json":()=>e(()=>import("./football-BkDTW0je.js"),[]),"/src/data/ar/outside-the-story/fruits-and-vegetables.json":()=>e(()=>import("./fruits-and-vegetables-CWZ59ral.js"),[]),"/src/data/ar/outside-the-story/gamers.json":()=>e(()=>import("./gamers-DU27ka0Y.js"),[]),"/src/data/ar/outside-the-story/geography.json":()=>e(()=>import("./geography-Bmt1Mp9F.js"),[]),"/src/data/ar/outside-the-story/k-pop.json":()=>e(()=>import("./k-pop-CvncURYW.js"),[]),"/src/data/ar/outside-the-story/science.json":()=>e(()=>import("./science-C1rxd0mO.js"),[]),"/src/data/ar/outside-the-story/series.json":()=>e(()=>import("./series-DgCSJJru.js"),[]),"/src/data/ar/outside-the-story/spy.json":()=>e(()=>import("./spy-CTUdze8o.js"),[]),"/src/data/ar/outside-the-story/sweets.json":()=>e(()=>import("./sweets-0_2hbNMS.js"),[]),"/src/data/ar/phrase-clue/animals/easy.json":()=>e(()=>import("./easy-B_GJKLA_.js"),[]),"/src/data/ar/phrase-clue/animals/hard.json":()=>e(()=>import("./hard-7EfMbXs4.js"),[]),"/src/data/ar/phrase-clue/animals/medium.json":()=>e(()=>import("./medium-Bcn1oCUk.js"),[]),"/src/data/ar/phrase-clue/geography/easy.json":()=>e(()=>import("./easy-B_kcdeCx.js"),[]),"/src/data/ar/phrase-clue/geography/hard.json":()=>e(()=>import("./hard-BCuCMNGp.js"),[]),"/src/data/ar/phrase-clue/geography/medium.json":()=>e(()=>import("./medium-CkoNY3Du.js"),[]),"/src/data/ar/phrase-clue/science/easy.json":()=>e(()=>import("./easy-f07zg_lU.js"),[]),"/src/data/ar/phrase-clue/science/hard.json":()=>e(()=>import("./hard-CV32qLEY.js"),[]),"/src/data/ar/phrase-clue/science/medium.json":()=>e(()=>import("./medium-BtIrOjNp.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/formation/easy.json":()=>e(()=>import("./easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits-and-vegetables/data.json":()=>e(()=>import("./data-B6FoT8eG.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/img-choice/animals/data.json":()=>e(()=>import("./data-CtXqoHRL.js"),[]),"/src/data/en/letter-flow/easy.json":()=>e(()=>import("./easy-DqbTaQjR.js"),[]),"/src/data/en/outside-the-story/animals.json":()=>e(()=>import("./animals-D78oH89-.js"),[]),"/src/data/en/outside-the-story/anime.json":()=>e(()=>import("./anime-DXIlEidq.js"),[]),"/src/data/en/outside-the-story/cars.json":()=>e(()=>import("./cars-Cw03Nxyo.js"),[]),"/src/data/en/outside-the-story/cartoons.json":()=>e(()=>import("./cartoons-DwVIQVvA.js"),[]),"/src/data/en/outside-the-story/characters.json":()=>e(()=>import("./characters-Dl2vwTPn.js"),[]),"/src/data/en/outside-the-story/clothes.json":()=>e(()=>import("./clothes-BiLKpCWj.js"),[]),"/src/data/en/outside-the-story/drinks.json":()=>e(()=>import("./drinks-CP1Emjyy.js"),[]),"/src/data/en/outside-the-story/foods.json":()=>e(()=>import("./foods-BKBSmJG2.js"),[]),"/src/data/en/outside-the-story/football.json":()=>e(()=>import("./football-B8eU_HgW.js"),[]),"/src/data/en/outside-the-story/fruits-and-vegetables.json":()=>e(()=>import("./fruits-and-vegetables-B5narx4J.js"),[]),"/src/data/en/outside-the-story/gamers.json":()=>e(()=>import("./gamers-Dm5Tu0YA.js"),[]),"/src/data/en/outside-the-story/geography.json":()=>e(()=>import("./geography-Dw2uVeLE.js"),[]),"/src/data/en/outside-the-story/k-pop.json":()=>e(()=>import("./k-pop-BnHY6_tE.js"),[]),"/src/data/en/outside-the-story/science.json":()=>e(()=>import("./science-DF1sazzy.js"),[]),"/src/data/en/outside-the-story/series.json":()=>e(()=>import("./series-dqakDLa9.js"),[]),"/src/data/en/outside-the-story/spy.json":()=>e(()=>import("./spy-DLpfZG_H.js"),[]),"/src/data/en/outside-the-story/sweets.json":()=>e(()=>import("./sweets-DDZ5JqsI.js"),[]),"/src/data/en/phrase-clue/animals/easy.json":()=>e(()=>import("./easy-vc2CgBiI.js"),[]),"/src/data/en/phrase-clue/animals/hard.json":()=>e(()=>import("./hard-BmQiyFGH.js"),[]),"/src/data/en/phrase-clue/animals/medium.json":()=>e(()=>import("./medium-CDppU-oU.js"),[]),"/src/data/en/phrase-clue/geography/easy.json":()=>e(()=>import("./easy-v49lXgS1.js"),[]),"/src/data/en/phrase-clue/geography/hard.json":()=>e(()=>import("./hard-Hc9ZYG1D.js"),[]),"/src/data/en/phrase-clue/geography/medium.json":()=>e(()=>import("./medium-Yt4_5ZKV.js"),[]),"/src/data/en/phrase-clue/science/easy.json":()=>e(()=>import("./easy-CXDUIzZm.js"),[]),"/src/data/en/phrase-clue/science/hard.json":()=>e(()=>import("./hard-BPi6SzUA.js"),[]),"/src/data/en/phrase-clue/science/medium.json":()=>e(()=>import("./medium-Dm_81XWt.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])}),A=i.map(async s=>{try{const r=this.getModulePath(o,s,E),v=_[r];if(!v)return console.warn(`${h} Engine: Module not found for path: ${r}`),[];const j=await v();return(j.default?.levels||j.levels||[]).map(n=>this.validateLevel(n,E)).filter(n=>n!==null)}catch(r){return console.error(`${h} Engine: Failed to load levels for ${o}/${s}.`,r),[]}}),t=(await Promise.all(A)).flat();return t.length===0?[this.getErrorLevel()]:X(t)}generateLetters(u,o,c){return Z(u,o,c,this.isKidsMode())}}const le=({title:p,levelIndex:u,onBack:o,difficulty:c,instructions:E,notification:h,layoutType:a,promptContent:l,solutionContent:i,letterOptionsContent:_,gameControlsContent:A,wrongAnswersContent:m})=>{const t=h?.message??null,s=h?.type??"info";return f.jsxs(te,{title:p,levelIndex:u,onBack:o,difficulty:c,instructions:E,layoutType:a,children:[t&&f.jsx(ee,{message:t,type:s}),l,i,_,m,A]})};export{ue as C,de as L,_e as S,le as a,ce as u};
