import{_ as e,u as Y,a as Z,b as ee,c as $,r as u,j as l,B as te,d as ae}from"./index-B6lzD43R.js";import{u as se,S as oe,L as re}from"./useGameControls-CNd6lDIq.js";import{G as ne}from"./GameControls-hNJLwa7C.js";import{s as ie,g as le,u as ce,G as ue,N as _e}from"./Notification-CdgWZhfc.js";import"./GameButton-D3jw2R_5.js";import"./circle-check-big-BG4XXyOr.js";class de{async loadLevels(f){const{language:_,categories:E,difficulty:v}=f,A=["animals","science","geography"],L=(E.includes("general")?A:E).map(async n=>{try{const c=`/src/data/${_}/clue/${n}/${_}-clue-${n}-${v}.json`,i=Object.assign({"/src/data/ar/clue/animals/ar-clue-animals-easy.json":()=>e(()=>import("./ar-clue-animals-easy-B_GJKLA_.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-hard.json":()=>e(()=>import("./ar-clue-animals-hard-7EfMbXs4.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-medium.json":()=>e(()=>import("./ar-clue-animals-medium-Bcn1oCUk.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-words.json":()=>e(()=>import("./ar-clue-animals-words-DxH5pZeF.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-easy.json":()=>e(()=>import("./ar-clue-geography-easy-B_kcdeCx.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-hard.json":()=>e(()=>import("./ar-clue-geography-hard-BCuCMNGp.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-medium.json":()=>e(()=>import("./ar-clue-geography-medium-CkoNY3Du.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-words.json":()=>e(()=>import("./ar-clue-geography-words-C7oqRjv9.js"),[]),"/src/data/ar/clue/science/ar-clue-science-easy.json":()=>e(()=>import("./ar-clue-science-easy-f07zg_lU.js"),[]),"/src/data/ar/clue/science/ar-clue-science-hard.json":()=>e(()=>import("./ar-clue-science-hard-CV32qLEY.js"),[]),"/src/data/ar/clue/science/ar-clue-science-medium.json":()=>e(()=>import("./ar-clue-science-medium-BtIrOjNp.js"),[]),"/src/data/ar/clue/science/ar-clue-science-words.json":()=>e(()=>import("./ar-clue-science-words-DpIQpR0-.js"),[]),"/src/data/ar/formation/ar-formation-easy.json":()=>e(()=>import("./ar-formation-easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/ar-formation-hard.json":()=>e(()=>import("./ar-formation-hard-CRxFgu7h.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits/data.json":()=>e(()=>import("./data-CenmuYLK.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/ar-flow-easy.json":()=>e(()=>import("./ar-flow-easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/ar-flow-medium.json":()=>e(()=>import("./ar-flow-medium-BL27Zp8Y.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/clue/animals/en-clue-animals-easy.json":()=>e(()=>import("./en-clue-animals-easy-vc2CgBiI.js"),[]),"/src/data/en/clue/animals/en-clue-animals-hard.json":()=>e(()=>import("./en-clue-animals-hard-BmQiyFGH.js"),[]),"/src/data/en/clue/animals/en-clue-animals-medium.json":()=>e(()=>import("./en-clue-animals-medium-CDppU-oU.js"),[]),"/src/data/en/clue/animals/en-clue-animals-words.json":()=>e(()=>import("./en-clue-animals-words-OyMRQ2OB.js"),[]),"/src/data/en/clue/geography/en-clue-geography-easy.json":()=>e(()=>import("./en-clue-geography-easy-v49lXgS1.js"),[]),"/src/data/en/clue/geography/en-clue-geography-hard.json":()=>e(()=>import("./en-clue-geography-hard-Hc9ZYG1D.js"),[]),"/src/data/en/clue/geography/en-clue-geography-medium.json":()=>e(()=>import("./en-clue-geography-medium-Yt4_5ZKV.js"),[]),"/src/data/en/clue/geography/en-clue-geography-words.json":()=>e(()=>import("./en-clue-geography-words-BJFrdNPX.js"),[]),"/src/data/en/clue/science/en-clue-science-easy.json":()=>e(()=>import("./en-clue-science-easy-CXDUIzZm.js"),[]),"/src/data/en/clue/science/en-clue-science-hard.json":()=>e(()=>import("./en-clue-science-hard-Dqcig8Ht.js"),[]),"/src/data/en/clue/science/en-clue-science-medium.json":()=>e(()=>import("./en-clue-science-medium-Dm_81XWt.js"),[]),"/src/data/en/clue/science/en-clue-science-words.json":()=>e(()=>import("./en-clue-science-words-BdiwMlAj.js"),[]),"/src/data/en/formation/en-formation-easy.json":()=>e(()=>import("./en-formation-easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits/data.json":()=>e(()=>import("./data-OxJ4m8-5.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/en-flow-easy.json":()=>e(()=>import("./en-flow-easy-DqbTaQjR.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])})[c];if(!i)return console.warn(`Module not found for path: ${c}`),[];const j=await i();return(j.default?.levels||j.levels||[]).map(o=>{if(typeof o=="object"&&o!==null){const p=o;return{id:String(p.id??`${v}-${Math.random().toString(36).slice(2,8)}`),clue:String(p.clue??""),solution:String(p.solution??""),difficulty:v}}return null}).filter(o=>o!==null)}catch(c){return console.error(`ClueGameEngine: Failed to load levels for ${_}/${n}/${v}.`,c),[]}}),h=(await Promise.all(L)).flat();return h.length===0?[{id:"error-level",difficulty:"easy",clue:"Could not load levels for the selected categories.",solution:"ERROR"}]:ie(h)}generateLetters(f,_,E){return le(f,_,E,!1)}}const b=new de;function me(){const s=Y(),f=Z(),_=ee(),{language:E,categories:v,difficulty:A,gameMode:m,updateScore:L,currentTeam:y,setCurrentTeam:h,teams:n,nextTurn:c,consumeHint:O}=_,{t:i}=$(),{loading:j,levels:x,currentLevel:o,currentLevelIndex:p,solution:d,notification:C,setNotification:a,gameState:r,dispatch:t,nextLevel:T,resetLevel:w}=ce(b,{language:E,categories:v,difficulty:A}),[g,k]=u.useState([]),[R,V]=u.useState([]),[S,D]=u.useState(new Set),{canRemove:M,canClear:N,canCheck:H,canHint:B}=se(r),W=u.useCallback(G=>{r.gameState==="playing"&&t({type:"PLACE",gridIndex:G,letter:g[G]})},[r.gameState,g,t]),F=u.useCallback(()=>t({type:"REMOVE_LAST"}),[t]),z=u.useCallback(()=>t({type:"CLEAR"}),[t]),K=u.useCallback(()=>{if(r.gameState!=="playing")return;if(r.answerSlots.join("")===d){t({type:"SET_GAME_STATE",payload:"won"});const I=o?.difficulty==="medium"?20:o?.difficulty==="hard"?30:10;m==="competitive"?(L(n[y].id,I),a({message:`${i.congrats} +${I}`,type:"success"}),setTimeout(()=>{T(),t({type:"SET_GAME_STATE",payload:"playing"}),a(null)},2e3)):a({message:i.congrats,type:"success"})}else{t({type:"SET_GAME_STATE",payload:"failed"});const I=r.answerSlots.join("");if(I&&!R.includes(I)&&V(P=>[...P,I]),a({message:i.wrongAnswer,type:"error"}),m==="competitive"){const P=new Set(S);P.add(y),D(P),P.size===n.length?setTimeout(()=>{t({type:"SHOW",solution:d,letters:g}),a({message:`${i.solutionWas}: ${d}`,type:"error"}),D(new Set),setTimeout(()=>{T(),t({type:"SET_GAME_STATE",payload:"playing"}),a(null)},2500)},2e3):setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),a(null),c("lose")},2e3)}else setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),a(null)},2e3)}},[r,d,o,m,n,y,L,c,T,i,R,t,a,S,g]),q=u.useCallback(()=>{r.gameState==="playing"&&(t({type:"SHOW",solution:d,letters:g}),a({message:`${i.solutionWas}: ${d}`,type:"error"}),m==="competitive"&&setTimeout(()=>{c("lose"),T(),t({type:"SET_GAME_STATE",payload:"playing"}),a(null)},2500))},[r.gameState,d,g,m,c,T,i.solutionWas,t,a]),J=u.useCallback(()=>{if(m==="competitive"&&!O(n[y].id)){a({message:i.noHintsLeft,type:"error"}),setTimeout(()=>a(null),2e3);return}t({type:"HINT",solution:d,letters:g})},[m,n,y,O,i.noHintsLeft,d,g,t,a]),Q=u.useCallback(async()=>{},[]),U=u.useCallback(()=>s(`/game-mode/${f.gameType}`),[s,f.gameType]),X=u.useCallback(()=>{p>0&&w()},[p,w]);return u.useEffect(()=>{o&&b.generateLetters&&k(b.generateLetters(o.solution,o.difficulty,E)),n.length>0&&h(p%n.length),V([])},[o,E,n.length,p,h]),{loading:j,levels:x,currentLevel:o,solution:d,letters:g,notification:C,wrongAnswers:R,gameState:r.gameState,answerSlots:r.answerSlots,slotIndices:r.slotIndices,hintIndices:r.hintIndices,currentLevelIndex:p,onCheck:K,onShow:q,onLetterClick:W,onRemove:F,onClear:z,onHint:J,nextLevel:T,prevLevel:X,handleBack:U,handleRevealOrListSolutions:Q,resetLevel:w,canRemove:M,canClear:N,canCheck:H,canHint:B}}const Te=()=>{const{t:s}=$(),{loading:f,currentLevel:_,solution:E,letters:v,notification:A,wrongAnswers:m,gameState:L,answerSlots:y,slotIndices:h,hintIndices:n,currentLevelIndex:c,levels:O,onCheck:i,onShow:j,onLetterClick:x,onRemove:o,onClear:p,onHint:d,nextLevel:C,prevLevel:a,handleBack:r,resetLevel:t,canRemove:T,canClear:w,canCheck:g,canHint:k}=me();if(f)return l.jsx("div",{className:"flex justify-center items-center h-screen",children:l.jsxs("p",{children:[s.loading,"..."]})});if(!_||_.solution==="ERROR")return l.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[l.jsx("p",{className:"text-xl font-semibold",children:s.noLevelsFound}),l.jsx(te,{onClick:r,children:s.back})]});const R=A?.message??null,V=A?.type??"info";return l.jsxs(ue,{title:_.clue,levelIndex:c,onBack:r,difficulty:_.difficulty,children:[R&&l.jsx(_e,{message:R,type:V}),l.jsx(oe,{solution:E,currentWord:y.join("")}),l.jsx(re,{letters:v,selectedIndices:h.filter(S=>S!==null),onLetterClick:x,disabled:L!=="playing",hintIndices:n}),m.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[s.wrongAttempts,":"]}),l.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 justify-center",children:m.map((S,D)=>l.jsx(ae,{variant:"destructive",className:"text-xs py-1",children:S},D))})]}),l.jsx(ne,{onRemoveLetter:o,onClearAnswer:p,onCheckAnswer:i,onHint:d,onShowSolution:j,onReset:t,onPrevLevel:a,onNextLevel:C,canRemove:T,canClear:w,canCheck:g,canHint:k,canPrev:c>0,canNext:c<O.length-1,gameState:L,isKidsMode:!1,labels:{remove:s.remove,clear:s.clear,check:s.check,hint:s.hint,showSolution:s.showSolution,reset:s.reset,prev:s.prev,next:s.next}})]})};export{Te as default};
