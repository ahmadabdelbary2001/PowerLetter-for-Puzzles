import{h as k,c as I,j as r,i as L,k as N,l as b,m as y,f as x,d as h,b as R,H as G,B as H,e as _,A as F,u as P,r as u}from"./index-BSaYX_3k.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],E=k("lightbulb",B),D=({teams:e,currentTeam:l})=>{const{t:s}=I();return r.jsxs(L,{children:[r.jsx(N,{children:r.jsx(b,{className:"text-center",children:s.scoreboard})}),r.jsx(y,{className:"grid gap-2",children:e.map((t,n)=>r.jsxs("div",{className:x("flex justify-between items-center p-3 rounded-lg",n===l?"bg-primary/20":"bg-muted"),children:[r.jsxs("span",{className:"font-medium",children:[t.name," ",n===l&&`(${s.currentTurn})`]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(h,{variant:"secondary",children:[t.score," ",s.points]}),r.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[r.jsx(E,{className:"w-4 h-4 mr-1 text-yellow-500"}),t.hintsRemaining]})]})]},t.id))})]})};function z({teams:e,currentTeam:l,showHints:s=!0,showScore:t=!0,className:n}){const{t:i}=I();return r.jsx("div",{className:x("flex flex-wrap gap-2 items-center",n),children:e.map((a,c)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs(h,{variant:c===l?"default":"secondary",className:"px-3",children:[a.name,t&&`: ${a.score} ${i.points}`]}),s&&r.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[r.jsx(E,{className:"w-4 h-4 mr-1 text-yellow-500"}),a.hintsRemaining]})]},a.id))})}const $=({children:e,title:l,levelIndex:s,onBack:t,difficulty:n,layoutType:i="text"})=>{const{gameMode:a,teams:c,currentTeam:o}=R(),{t:d,dir:m}=I();return r.jsxs(r.Fragment,{children:[r.jsx(G,{currentView:"play",showLanguage:!1}),r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4 sm:p-6",dir:m,children:r.jsxs("div",{className:x("mx-auto space-y-4 sm:space-y-6",i==="image"?"max-w-xl":"max-w-5xl"),children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[r.jsxs(H,{variant:"ghost",onClick:t,className:"flex items-center gap-2",children:[m==="rtl"?r.jsx(_,{}):r.jsx(F,{})," ",d.back]}),a==="competitive"&&c.length>0&&r.jsx(z,{teams:c,currentTeam:o,showScore:!0})]}),r.jsxs(L,{children:[r.jsx(N,{children:r.jsxs("div",{className:"flex justify-between items-center",children:[n&&r.jsx(h,{variant:n==="easy"?"default":n==="medium"?"secondary":"destructive",children:d[n]}),r.jsx(b,{className:"text-center flex-1 px-4",children:l}),r.jsxs(h,{variant:"secondary",children:[d.level," ",s+1]})]})}),r.jsx(y,{className:x(i==="image"?"space-y-4":"space-y-6"),children:e})]}),a==="competitive"&&c.length>0&&r.jsx(D,{teams:c,currentTeam:o})]})})]})};function O(e,l){switch(l.type){case"RESET":return{slotIndices:Array(l.solutionLen).fill(null),answerSlots:Array(l.solutionLen).fill(""),hintIndices:[],gameState:"playing"};case"PLACE":{const s=e.slotIndices.findIndex(a=>a===l.gridIndex);if(s!==-1){const a=[...e.slotIndices],c=[...e.answerSlots];return a[s]=null,c[s]="",{...e,slotIndices:a,answerSlots:c,gameState:"playing"}}const t=e.slotIndices.indexOf(null);if(t===-1)return e;const n=[...e.slotIndices],i=[...e.answerSlots];return n[t]=l.gridIndex,i[t]=l.letter,{...e,slotIndices:n,answerSlots:i}}case"REMOVE_LAST":{let s=-1;for(let i=e.slotIndices.length-1;i>=0;i--){const a=e.slotIndices[i];if(a!==null&&!e.hintIndices.includes(a)){s=i;break}}if(s<0)return e;const t=[...e.slotIndices],n=[...e.answerSlots];return t[s]=null,n[s]="",{...e,slotIndices:t,answerSlots:n,gameState:"playing"}}case"CLEAR":{const s=e.slotIndices.map(n=>n!==null&&e.hintIndices.includes(n)?n:null),t=s.map((n,i)=>n!==null&&e.hintIndices.includes(n)?e.answerSlots[i]:"");return{...e,slotIndices:s,answerSlots:t,gameState:"playing"}}case"HINT":{const s=l.solution.split(""),t=s.findIndex((o,d)=>e.answerSlots[d]!==o);if(t<0)return e;const n=s[t],i=[...e.slotIndices],a=[...e.answerSlots];for(let o=0;o<i.length;o++){const d=i[o];d!==null&&l.letters[d]===n&&s[o]!==n&&(i[o]=null,a[o]="")}const c=l.letters.findIndex((o,d)=>o===n&&!i.includes(d)&&!e.hintIndices.includes(d));return c<0?e:(i[t]=c,a[t]=n,{...e,slotIndices:i,answerSlots:a,hintIndices:[...e.hintIndices,c]})}case"SHOW":{const s=l.solution.split(""),t=[],n=[];return s.forEach((i,a)=>{const c=l.letters.findIndex((o,d)=>o===i&&!t.includes(d));t[a]=c!==-1?c:null,c!==-1&&!e.slotIndices.includes(c)&&n.push(c)}),{...e,slotIndices:t,answerSlots:s,hintIndices:n,gameState:"won"}}case"CHECK":{const s=i=>i.replace(/\s/g,"").normalize("NFC"),t=s(e.answerSlots.join("")),n=s(l.solution);return t===n?{...e,gameState:"won"}:{...e,gameState:"failed"}}case"SET_GAME_STATE":return{...e,gameState:l.payload};default:return e}}function W(e,l){const s=P(),{language:t,categories:n,difficulty:i}=l,[a,c]=u.useState([]),[o,d]=u.useState(0),[m,S]=u.useState(!0),[T,j]=u.useState(null),[A,w]=u.useReducer(O,{slotIndices:[],answerSlots:[],hintIndices:[],gameState:"playing"}),g=a[o],f=g?.solution.replace(/\s/g,"")??"";u.useEffect(()=>{S(!0),e.loadLevels({language:t,categories:n,difficulty:i}).then(c).finally(()=>S(!1))},[t,n,i,e]);const C=u.useCallback(()=>{o<a.length-1?d(M=>M+1):s("/games")},[o,a.length,s]),p=u.useCallback(()=>{g&&(w({type:"RESET",solutionLen:f.length}),j(null))},[g,f.length]);return u.useEffect(()=>{a.length>0&&p()},[o,a,p]),{loading:m,levels:a,currentLevel:g,currentLevelIndex:o,solution:f,notification:T,setNotification:j,gameState:A,dispatch:w,nextLevel:C,resetLevel:p}}function K(e){for(let l=e.length-1;l>0;l--){const s=Math.floor(Math.random()*(l+1));[e[l],e[s]]=[e[s],e[l]]}return e}const U={easy:{totalLetters:12},medium:{totalLetters:18},hard:{totalLetters:24}},V={totalLetters:10},v={en:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",ar:"ابتثجحخدذرزسشصضطظعغفقكلمنهوي"};function J(e,l,s,t=!1){const n=e.replace(/\s/g,"").split(""),i=t?V:U[l],a=[...n],c=Math.max(i.totalLetters,n.length),o=Math.max(0,c-n.length),d=v[s]||v.en;for(let m=0;m<o;m++)a.push(d[Math.floor(Math.random()*d.length)]);return K(a)}function Q({message:e,type:l="info",duration:s=0,onClose:t,className:n}){u.useEffect(()=>{if(s&&s>0&&t){const a=setTimeout(()=>t(),s);return()=>clearTimeout(a)}},[s,t]);const i=l==="success"?"bg-green-600":l==="error"?"bg-red-600":l==="warning"?"bg-yellow-500":"bg-blue-600";return r.jsx("div",{role:"status","aria-live":"polite",className:x("fixed top-4 left-1/2 transform -translate-x-1/2 px-4 py-2 rounded-md shadow-lg z-50 text-sm sm:text-base text-white transition-all duration-200",i,n),children:e})}export{$ as G,E as L,Q as N,J as g,K as s,W as u};
