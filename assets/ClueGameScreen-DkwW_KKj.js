import{_ as e,u as b,r as o,a as Z,b as ee,c as $,j as m,B as te,d as ae}from"./index-CAHgHOo8.js";import{S as se,L as ne}from"./LetterGrid-DWfjR-aZ.js";import{G as re}from"./GameControls-CrYqBSiz.js";import{s as oe,g as ie,u as le,G as ce,N as ue}from"./Notification-DiPrnSkn.js";import"./GameButton-Cei8-RWo.js";import"./circle-check-big-DZdG_xf-.js";class de{async loadLevels(s){const{language:n,categories:p,difficulty:g}=s,L=["animals","science","geography"],T=(p.includes("general")?L:p).map(async i=>{try{const u=`/src/data/${n}/clue/${i}/${n}-clue-${i}-${g}.json`,_=Object.assign({"/src/data/ar/clue/animals/ar-clue-animals-easy.json":()=>e(()=>import("./ar-clue-animals-easy-B_GJKLA_.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-hard.json":()=>e(()=>import("./ar-clue-animals-hard-7EfMbXs4.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-medium.json":()=>e(()=>import("./ar-clue-animals-medium-Bcn1oCUk.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-words.json":()=>e(()=>import("./ar-clue-animals-words-DxH5pZeF.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-easy.json":()=>e(()=>import("./ar-clue-geography-easy-B_kcdeCx.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-hard.json":()=>e(()=>import("./ar-clue-geography-hard-BCuCMNGp.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-medium.json":()=>e(()=>import("./ar-clue-geography-medium-CkoNY3Du.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-words.json":()=>e(()=>import("./ar-clue-geography-words-C7oqRjv9.js"),[]),"/src/data/ar/clue/science/ar-clue-science-easy.json":()=>e(()=>import("./ar-clue-science-easy-f07zg_lU.js"),[]),"/src/data/ar/clue/science/ar-clue-science-hard.json":()=>e(()=>import("./ar-clue-science-hard-CV32qLEY.js"),[]),"/src/data/ar/clue/science/ar-clue-science-medium.json":()=>e(()=>import("./ar-clue-science-medium-BtIrOjNp.js"),[]),"/src/data/ar/clue/science/ar-clue-science-words.json":()=>e(()=>import("./ar-clue-science-words-DpIQpR0-.js"),[]),"/src/data/ar/formation/ar-formation-easy.json":()=>e(()=>import("./ar-formation-easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/ar-formation-hard.json":()=>e(()=>import("./ar-formation-hard-CRxFgu7h.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits/data.json":()=>e(()=>import("./data-CenmuYLK.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/ar-flow-easy.json":()=>e(()=>import("./ar-flow-easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/ar-flow-medium.json":()=>e(()=>import("./ar-flow-medium-BL27Zp8Y.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/clue/animals/en-clue-animals-easy.json":()=>e(()=>import("./en-clue-animals-easy-vc2CgBiI.js"),[]),"/src/data/en/clue/animals/en-clue-animals-hard.json":()=>e(()=>import("./en-clue-animals-hard-BmQiyFGH.js"),[]),"/src/data/en/clue/animals/en-clue-animals-medium.json":()=>e(()=>import("./en-clue-animals-medium-CDppU-oU.js"),[]),"/src/data/en/clue/animals/en-clue-animals-words.json":()=>e(()=>import("./en-clue-animals-words-OyMRQ2OB.js"),[]),"/src/data/en/clue/geography/en-clue-geography-easy.json":()=>e(()=>import("./en-clue-geography-easy-v49lXgS1.js"),[]),"/src/data/en/clue/geography/en-clue-geography-hard.json":()=>e(()=>import("./en-clue-geography-hard-Hc9ZYG1D.js"),[]),"/src/data/en/clue/geography/en-clue-geography-medium.json":()=>e(()=>import("./en-clue-geography-medium-Yt4_5ZKV.js"),[]),"/src/data/en/clue/geography/en-clue-geography-words.json":()=>e(()=>import("./en-clue-geography-words-BJFrdNPX.js"),[]),"/src/data/en/clue/science/en-clue-science-easy.json":()=>e(()=>import("./en-clue-science-easy-CXDUIzZm.js"),[]),"/src/data/en/clue/science/en-clue-science-hard.json":()=>e(()=>import("./en-clue-science-hard-Dqcig8Ht.js"),[]),"/src/data/en/clue/science/en-clue-science-medium.json":()=>e(()=>import("./en-clue-science-medium-Dm_81XWt.js"),[]),"/src/data/en/clue/science/en-clue-science-words.json":()=>e(()=>import("./en-clue-science-words-BdiwMlAj.js"),[]),"/src/data/en/formation/en-formation-easy.json":()=>e(()=>import("./en-formation-easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits/data.json":()=>e(()=>import("./data-OxJ4m8-5.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/en-flow-easy.json":()=>e(()=>import("./en-flow-easy-DqbTaQjR.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])})[u];if(!_)return console.warn(`Module not found for path: ${u}`),[];const R=await _();return(R.default?.levels||R.levels||[]).map(l=>{if(typeof l=="object"&&l!==null){const y=l;return{id:String(y.id??`${g}-${Math.random().toString(36).slice(2,8)}`),clue:String(y.clue??""),solution:String(y.solution??""),difficulty:g}}return null}).filter(l=>l!==null)}catch(u){return console.error(`ClueGameEngine: Failed to load levels for ${n}/${i}/${g}.`,u),[]}}),A=(await Promise.all(T)).flat();return A.length===0?[{id:"error-level",difficulty:"easy",clue:"Could not load levels for the selected categories.",solution:"ERROR"}]:oe(A)}generateLetters(s,n,p){return ie(s,n,p,!1)}}const M=new de;function _e(a){const{gameState:s,slotIndices:n,answerSlots:p,hintIndices:g}=a,{gameMode:L,teams:d,currentTeam:T}=b(),h=o.useMemo(()=>s!=="playing"?!1:n.some(E=>E!==null&&!g.includes(E)),[s,n,g]),A=o.useMemo(()=>s!=="playing"?!1:n.filter(E=>E!==null).length>g.length,[s,n,g]),i=o.useMemo(()=>s!=="playing"?!1:p.every(E=>E!==""),[s,p]),u=o.useMemo(()=>s!=="playing"?!1:L==="competitive"?(d[T]?.hintsRemaining??0)>0:!0,[s,L,d,T]);return{canRemove:h,canClear:A,canCheck:i,canHint:u}}function me(){const a=Z(),s=ee(),n=b(),{language:p,categories:g,difficulty:L,gameMode:d,updateScore:T,currentTeam:h,setCurrentTeam:A,teams:i,nextTurn:u,consumeHint:E}=n,{t:_}=$(),{loading:R,levels:x,currentLevel:l,currentLevelIndex:y,solution:f,notification:D,setNotification:r,gameState:c,dispatch:t,nextLevel:j,resetLevel:w}=le(M,{language:p,categories:g,difficulty:L}),[v,k]=o.useState([]),[S,C]=o.useState([]),[I,V]=o.useState(new Set),{canRemove:N,canClear:H,canCheck:B,canHint:W}=_e(c),F=o.useCallback(G=>{c.gameState==="playing"&&t({type:"PLACE",gridIndex:G,letter:v[G]})},[c.gameState,v,t]),z=o.useCallback(()=>t({type:"REMOVE_LAST"}),[t]),K=o.useCallback(()=>t({type:"CLEAR"}),[t]),q=o.useCallback(()=>{if(c.gameState!=="playing")return;if(c.answerSlots.join("")===f){t({type:"SET_GAME_STATE",payload:"won"});const O=l?.difficulty==="medium"?20:l?.difficulty==="hard"?30:10;d==="competitive"?(T(i[h].id,O),r({message:`${_.congrats} +${O}`,type:"success"}),setTimeout(()=>{j(),t({type:"SET_GAME_STATE",payload:"playing"}),r(null)},2e3)):r({message:_.congrats,type:"success"})}else{t({type:"SET_GAME_STATE",payload:"failed"});const O=c.answerSlots.join("");if(O&&!S.includes(O)&&C(P=>[...P,O]),r({message:_.wrongAnswer,type:"error"}),d==="competitive"){const P=new Set(I);P.add(h),V(P),P.size===i.length?setTimeout(()=>{t({type:"SHOW",solution:f,letters:v}),r({message:`${_.solutionWas}: ${f}`,type:"error"}),V(new Set),setTimeout(()=>{j(),t({type:"SET_GAME_STATE",payload:"playing"}),r(null)},2500)},2e3):setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),r(null),u("lose")},2e3)}else setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),r(null)},2e3)}},[c,f,l,d,i,h,T,u,j,_,S,t,r,I,v]),J=o.useCallback(()=>{c.gameState==="playing"&&(t({type:"SHOW",solution:f,letters:v}),r({message:`${_.solutionWas}: ${f}`,type:"error"}),d==="competitive"&&setTimeout(()=>{u("lose"),j(),t({type:"SET_GAME_STATE",payload:"playing"}),r(null)},2500))},[c.gameState,f,v,d,u,j,_.solutionWas,t,r]),Q=o.useCallback(()=>{if(d==="competitive"&&!E(i[h].id)){r({message:_.noHintsLeft,type:"error"}),setTimeout(()=>r(null),2e3);return}t({type:"HINT",solution:f,letters:v})},[d,i,h,E,_.noHintsLeft,f,v,t,r]),U=o.useCallback(async()=>{},[]),X=o.useCallback(()=>a(`/game-mode/${s.gameType}`),[a,s.gameType]),Y=o.useCallback(()=>{y>0&&w()},[y,w]);return o.useEffect(()=>{l&&M.generateLetters&&k(M.generateLetters(l.solution,l.difficulty,p)),i.length>0&&A(y%i.length),C([])},[l,p,i.length,y,A]),{loading:R,levels:x,currentLevel:l,solution:f,letters:v,notification:D,wrongAnswers:S,gameState:c.gameState,answerSlots:c.answerSlots,slotIndices:c.slotIndices,hintIndices:c.hintIndices,currentLevelIndex:y,onCheck:q,onShow:J,onLetterClick:F,onRemove:z,onClear:K,onHint:Q,nextLevel:j,prevLevel:Y,handleBack:X,handleRevealOrListSolutions:U,resetLevel:w,canRemove:N,canClear:H,canCheck:B,canHint:W}}const Te=()=>{const{t:a}=$(),{loading:s,currentLevel:n,solution:p,letters:g,notification:L,wrongAnswers:d,gameState:T,answerSlots:h,slotIndices:A,hintIndices:i,currentLevelIndex:u,levels:E,onCheck:_,onShow:R,onLetterClick:x,onRemove:l,onClear:y,onHint:f,nextLevel:D,prevLevel:r,handleBack:c,resetLevel:t,canRemove:j,canClear:w,canCheck:v,canHint:k}=me();if(s)return m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsxs("p",{children:[a.loading,"..."]})});if(!n||n.solution==="ERROR")return m.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[m.jsx("p",{className:"text-xl font-semibold",children:a.noLevelsFound}),m.jsx(te,{onClick:c,children:a.back})]});const S=L?.message??null,C=L?.type??"info";return m.jsxs(ce,{title:n.clue,levelIndex:u,onBack:c,difficulty:n.difficulty,children:[S&&m.jsx(ue,{message:S,type:C}),m.jsx(se,{solution:p,currentWord:h.join("")}),m.jsx(ne,{letters:g,selectedIndices:A.filter(I=>I!==null),onLetterClick:x,disabled:T!=="playing",hintIndices:i}),d.length>0&&m.jsxs("div",{className:"mt-2",children:[m.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[a.wrongAttempts,":"]}),m.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 justify-center",children:d.map((I,V)=>m.jsx(ae,{variant:"destructive",className:"text-xs py-1",children:I},V))})]}),m.jsx(re,{onRemoveLetter:l,onClearAnswer:y,onCheckAnswer:_,onHint:f,onShowSolution:R,onReset:t,onPrevLevel:r,onNextLevel:D,canRemove:j,canClear:w,canCheck:v,canHint:k,canPrev:u>0,canNext:u<E.length-1,gameState:T,isKidsMode:!1,labels:{remove:a.remove,clear:a.clear,check:a.check,hint:a.hint,showSolution:a.showSolution,reset:a.reset,prev:a.prev,next:a.next}})]})};export{Te as default};
