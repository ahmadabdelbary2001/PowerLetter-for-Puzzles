import{G as b,_ as e,u as $,a as N,b as x,c as w,r as g,j as i,B as M,d as H}from"./index-DBOBOFki.js";import{u as B,a as W,C as z,L as F,S as K}from"./ClueGameLayout-CnOYNB3r.js";import{G as Y}from"./GameControls-DC4-WA7O.js";import{s as q,g as J,u as Q}from"./Notification-DPicj5SD.js";import"./GameLayout-BMu2cYtQ.js";import"./GameButton-DbyH_N1-.js";import"./circle-check-big-C4MjQaGS.js";class U{async loadLevels(n){const{language:p,categories:E,difficulty:d}=n;let o;E.includes("general")?o=b.find(a=>a.id==="phrase-clue")?.availableCategories?.filter(a=>a!=="general")??[]:o=E;const T=Object.assign({"/src/data/ar/formation/easy.json":()=>e(()=>import("./easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/hard.json":()=>e(()=>import("./hard-DzMXngiv.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits-and-vegetables/data.json":()=>e(()=>import("./data-DlhJ3pZw.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/easy.json":()=>e(()=>import("./easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/medium.json":()=>e(()=>import("./medium-DnN41iEv.js"),[]),"/src/data/ar/outside-the-story/animals.json":()=>e(()=>import("./animals-BD_uC3F6.js"),[]),"/src/data/ar/outside-the-story/anime.json":()=>e(()=>import("./anime-X9XTb-jh.js"),[]),"/src/data/ar/outside-the-story/cars.json":()=>e(()=>import("./cars-LFoQ5kcr.js"),[]),"/src/data/ar/outside-the-story/cartoons.json":()=>e(()=>import("./cartoons-9ln4fVtF.js"),[]),"/src/data/ar/outside-the-story/characters.json":()=>e(()=>import("./characters-BClrgWDD.js"),[]),"/src/data/ar/outside-the-story/clothes.json":()=>e(()=>import("./clothes-DZukcyjc.js"),[]),"/src/data/ar/outside-the-story/drinks.json":()=>e(()=>import("./drinks-DWTisQdZ.js"),[]),"/src/data/ar/outside-the-story/foods.json":()=>e(()=>import("./foods-BPEl4jwc.js"),[]),"/src/data/ar/outside-the-story/football.json":()=>e(()=>import("./football-BkDTW0je.js"),[]),"/src/data/ar/outside-the-story/fruits-and-vegetables.json":()=>e(()=>import("./fruits-and-vegetables-CWZ59ral.js"),[]),"/src/data/ar/outside-the-story/gamers.json":()=>e(()=>import("./gamers-DU27ka0Y.js"),[]),"/src/data/ar/outside-the-story/geography.json":()=>e(()=>import("./geography-Bmt1Mp9F.js"),[]),"/src/data/ar/outside-the-story/k-pop.json":()=>e(()=>import("./k-pop-CvncURYW.js"),[]),"/src/data/ar/outside-the-story/science.json":()=>e(()=>import("./science-C1rxd0mO.js"),[]),"/src/data/ar/outside-the-story/series.json":()=>e(()=>import("./series-DgCSJJru.js"),[]),"/src/data/ar/outside-the-story/spy.json":()=>e(()=>import("./spy-CTUdze8o.js"),[]),"/src/data/ar/outside-the-story/sweets.json":()=>e(()=>import("./sweets-0_2hbNMS.js"),[]),"/src/data/ar/phrase-clue/animals/easy.json":()=>e(()=>import("./easy-B_GJKLA_.js"),[]),"/src/data/ar/phrase-clue/animals/hard.json":()=>e(()=>import("./hard-7EfMbXs4.js"),[]),"/src/data/ar/phrase-clue/animals/medium.json":()=>e(()=>import("./medium-Bcn1oCUk.js"),[]),"/src/data/ar/phrase-clue/geography/easy.json":()=>e(()=>import("./easy-B_kcdeCx.js"),[]),"/src/data/ar/phrase-clue/geography/hard.json":()=>e(()=>import("./hard-BCuCMNGp.js"),[]),"/src/data/ar/phrase-clue/geography/medium.json":()=>e(()=>import("./medium-CkoNY3Du.js"),[]),"/src/data/ar/phrase-clue/science/easy.json":()=>e(()=>import("./easy-f07zg_lU.js"),[]),"/src/data/ar/phrase-clue/science/hard.json":()=>e(()=>import("./hard-CV32qLEY.js"),[]),"/src/data/ar/phrase-clue/science/medium.json":()=>e(()=>import("./medium-BtIrOjNp.js"),[]),"/src/data/ar/picture-choice/animals/data.json":()=>e(()=>import("./data-6hZ_2-dK.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/formation/easy.json":()=>e(()=>import("./easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits-and-vegetables/data.json":()=>e(()=>import("./data-B6FoT8eG.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/easy.json":()=>e(()=>import("./easy-DqbTaQjR.js"),[]),"/src/data/en/outside-the-story/animals.json":()=>e(()=>import("./animals-D78oH89-.js"),[]),"/src/data/en/outside-the-story/anime.json":()=>e(()=>import("./anime-DXIlEidq.js"),[]),"/src/data/en/outside-the-story/cars.json":()=>e(()=>import("./cars-Cw03Nxyo.js"),[]),"/src/data/en/outside-the-story/cartoons.json":()=>e(()=>import("./cartoons-DwVIQVvA.js"),[]),"/src/data/en/outside-the-story/characters.json":()=>e(()=>import("./characters-Dl2vwTPn.js"),[]),"/src/data/en/outside-the-story/clothes.json":()=>e(()=>import("./clothes-BiLKpCWj.js"),[]),"/src/data/en/outside-the-story/drinks.json":()=>e(()=>import("./drinks-CP1Emjyy.js"),[]),"/src/data/en/outside-the-story/foods.json":()=>e(()=>import("./foods-BKBSmJG2.js"),[]),"/src/data/en/outside-the-story/football.json":()=>e(()=>import("./football-B8eU_HgW.js"),[]),"/src/data/en/outside-the-story/fruits-and-vegetables.json":()=>e(()=>import("./fruits-and-vegetables-B5narx4J.js"),[]),"/src/data/en/outside-the-story/gamers.json":()=>e(()=>import("./gamers-Dm5Tu0YA.js"),[]),"/src/data/en/outside-the-story/geography.json":()=>e(()=>import("./geography-Dw2uVeLE.js"),[]),"/src/data/en/outside-the-story/k-pop.json":()=>e(()=>import("./k-pop-BnHY6_tE.js"),[]),"/src/data/en/outside-the-story/science.json":()=>e(()=>import("./science-DF1sazzy.js"),[]),"/src/data/en/outside-the-story/series.json":()=>e(()=>import("./series-dqakDLa9.js"),[]),"/src/data/en/outside-the-story/spy.json":()=>e(()=>import("./spy-DLpfZG_H.js"),[]),"/src/data/en/outside-the-story/sweets.json":()=>e(()=>import("./sweets-DDZ5JqsI.js"),[]),"/src/data/en/phrase-clue/animals/easy.json":()=>e(()=>import("./easy-vc2CgBiI.js"),[]),"/src/data/en/phrase-clue/animals/hard.json":()=>e(()=>import("./hard-BmQiyFGH.js"),[]),"/src/data/en/phrase-clue/animals/medium.json":()=>e(()=>import("./medium-CDppU-oU.js"),[]),"/src/data/en/phrase-clue/geography/easy.json":()=>e(()=>import("./easy-v49lXgS1.js"),[]),"/src/data/en/phrase-clue/geography/hard.json":()=>e(()=>import("./hard-Hc9ZYG1D.js"),[]),"/src/data/en/phrase-clue/geography/medium.json":()=>e(()=>import("./medium-Yt4_5ZKV.js"),[]),"/src/data/en/phrase-clue/science/easy.json":()=>e(()=>import("./easy-CXDUIzZm.js"),[]),"/src/data/en/phrase-clue/science/hard.json":()=>e(()=>import("./hard-BPi6SzUA.js"),[]),"/src/data/en/phrase-clue/science/medium.json":()=>e(()=>import("./medium-Dm_81XWt.js"),[]),"/src/data/en/picture-choice/animals/data.json":()=>e(()=>import("./data-CtXqoHRL.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])}),_=o.map(async c=>{try{const a=`/src/data/${p}/phrase-clue/${c}/${d}.json`,r=T[a];if(!r)return console.warn(`PhraseClueGameEngine: Module not found for path: ${a}`),[];const t=await r();return(t.default?.levels||t.levels||[]).map(l=>{if(typeof l=="object"&&l!==null){const h=l;return{id:String(h.id??`${d}-${Math.random().toString(36).slice(2,8)}`),clue:String(h.clue??""),solution:String(h.solution??""),difficulty:d}}return null}).filter(l=>l!==null)}catch(a){return console.error(`PhraseClueGameEngine: Failed to load levels for ${p}/${c}/${d}.`,a),[]}}),m=(await Promise.all(_)).flat();return m.length===0?[{id:"error-level",difficulty:"easy",clue:"Could not load levels for the selected categories.",solution:"ERROR"}]:q(m)}generateLetters(n,p,E){return J(n,p,E,!1)}}const X=new U;function Z(){const s=$(),n=N(),{language:p,categories:E,difficulty:d,gameMode:o,updateScore:T,teams:_,currentTeam:u,setCurrentTeam:m,nextTurn:c,consumeHint:a}=x(),{t:r}=w(),t=B({engine:X,language:p,categories:E,difficulty:d}),[y,l]=g.useState([]),[h,L]=g.useState(new Set),{canRemove:A,canClear:R,canCheck:j,canHint:I}=W(t.gameState);g.useEffect(()=>{o==="competitive"&&_.length>0&&m(t.currentLevelIndex%_.length)},[t.currentLevelIndex,o,_.length,m]);const P=g.useCallback(()=>{if(t.gameState.gameState!=="playing")return;if(t.gameState.answerSlots.join("")===t.solution){t.dispatch({type:"SET_GAME_STATE",payload:"won"});const v=t.currentLevel?.difficulty==="medium"?20:t.currentLevel?.difficulty==="hard"?30:10;o==="competitive"?(T(_[u].id,v),t.setNotification({message:`${r.congrats} +${v}`,type:"success"}),setTimeout(()=>{t.nextLevel(),L(new Set)},2e3)):t.setNotification({message:r.congrats,type:"success"})}else{t.dispatch({type:"SET_GAME_STATE",payload:"failed"});const v=t.gameState.answerSlots.join("");if(v&&!y.includes(v)&&l(f=>[...f,v]),t.setNotification({message:r.wrongAnswer,type:"error"}),o==="competitive"){const f=new Set(h).add(u);L(f),f.size>=_.length?setTimeout(()=>{t.dispatch({type:"SHOW",solution:t.solution,letters:t.letters}),t.setNotification({message:`${r.solutionWas}: ${t.solution}`,type:"error"}),setTimeout(()=>{t.nextLevel(),L(new Set)},2500)},2e3):setTimeout(()=>{t.dispatch({type:"CLEAR"}),t.dispatch({type:"SET_GAME_STATE",payload:"playing"}),c("lose")},2e3)}else setTimeout(()=>{t.dispatch({type:"CLEAR"}),t.dispatch({type:"SET_GAME_STATE",payload:"playing"})},2e3)}},[t,o,_,u,T,c,r,y,h]),O=g.useCallback(()=>{t.gameState.gameState==="playing"&&(t.dispatch({type:"SHOW",solution:t.solution,letters:t.letters}),t.setNotification({message:`${r.solutionWas}: ${t.solution}`,type:"error"}),o==="competitive"?(c("lose"),setTimeout(()=>{t.nextLevel(),L(new Set)},2500)):t.dispatch({type:"SET_GAME_STATE",payload:"won"}))},[t,o,r.solutionWas,c]),D=g.useCallback(()=>{if(o==="competitive"&&!a(_[u].id)){t.setNotification({message:r.noHintsLeft,type:"error"});return}t.dispatch({type:"HINT",solution:t.solution,letters:t.letters})},[t,o,_,u,a,r.noHintsLeft]),V=g.useCallback(()=>{s(o==="competitive"?`/team-config/${n.gameType}`:`/game-mode/${n.gameType}`)},[s,n.gameType,o]);return g.useEffect(()=>{l([])},[t.currentLevelIndex]),{...t,wrongAnswers:y,onCheck:P,onShow:O,onHint:D,handleBack:V,canRemove:A,canClear:R,canCheck:j,canHint:I}}const ne=()=>{const{t:s}=w(),n=Q("phraseClue"),{gameMode:p}=x(),{loading:E,currentLevel:d,solution:o,letters:T,notification:_,wrongAnswers:u,gameState:m,currentLevelIndex:c,levels:a,onCheck:r,onShow:t,onLetterClick:y,onRemove:l,onClear:h,onHint:L,nextLevel:A,prevLevel:R,handleBack:j,resetLevel:I,canRemove:P,canClear:O,canCheck:D,canHint:V}=Z();if(E)return i.jsx("div",{className:"flex justify-center items-center h-screen",children:i.jsxs("p",{children:[s.loading,"..."]})});if(!d||d.solution==="ERROR")return i.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[i.jsx("p",{className:"text-xl font-semibold",children:s.noLevelsFound}),i.jsx(M,{onClick:j,children:s.back})]});const C=n?{title:n.title,description:n.description??"",steps:n.steps??[]}:void 0,{answerSlots:v,slotIndices:f,hintIndices:G}=m;return i.jsx(z,{title:d.clue,levelIndex:c,onBack:j,difficulty:d.difficulty,instructions:C,notification:_,promptContent:null,solutionContent:i.jsx(K,{solution:o,currentWord:v.join("")}),letterOptionsContent:i.jsx(F,{letters:T,selectedIndices:f.filter(S=>S!==null),onLetterClick:y,disabled:m.gameState!=="playing",hintIndices:G}),wrongAnswersContent:u.length>0&&i.jsxs("div",{className:"mt-2",children:[i.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[s.wrongAttempts,":"]}),i.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:u.map((S,k)=>i.jsx(H,{variant:"destructive",children:S},k))})]}),gameControlsContent:i.jsx(Y,{onRemoveLetter:l,onClearAnswer:h,onCheckAnswer:r,onHint:L,onShowSolution:t,onReset:I,onPrevLevel:R,onNextLevel:A,canRemove:P,canClear:O,canCheck:D,canHint:V,canPrev:c>0,canNext:c<a.length-1,gameState:m.gameState,gameMode:p,isKidsMode:!1,labels:{remove:s.remove,clear:s.clear,check:s.check,hint:s.hint,showSolution:s.showSolution,reset:s.reset,prev:s.prev,next:s.next}})})};export{ne as default};
