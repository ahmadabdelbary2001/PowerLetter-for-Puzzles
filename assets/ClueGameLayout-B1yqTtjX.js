import{j as g,c as L,d as B,r as l,e as $,u as H}from"./index-CjyIWeEv.js";import{B as D,g as P,G as O}from"./GameLayout-B--m7vcf.js";import{N as V}from"./Notification-BQeTBVRQ.js";const K=B("border-2 rounded-lg flex items-center justify-center font-bold",{variants:{size:{computer:"w-12 h-12 text-lg",tablet:"w-10 h-10 text-md",mobile:"w-8 h-8 text-sm"},filled:{true:"bg-primary border-primary text-primary-foreground",false:"bg-card"}},defaultVariants:{size:"mobile",filled:!1}});function q({char:o="",filled:m,size:i,className:s}){return g.jsx("div",{className:L(K({size:i,filled:m}),s),children:o})}function X({solution:o,currentWord:m,className:i}){const s=[...o],n=[...m],[u,r]=l.useState("mobile");return l.useEffect(()=>{const f=()=>{const a=window.innerWidth;a>=1024?r("computer"):a>=768?r("tablet"):r("mobile")};return f(),window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),g.jsx("div",{className:L("flex flex-wrap justify-center gap-2",i),children:s.map((f,a)=>g.jsx(q,{char:n[a]||"",filled:!!n[a],size:u},a))})}function F({letter:o,isSelected:m=!1,isHint:i=!1,disabled:s=!1,onClick:n,className:u,deviceType:r="mobile"}){return g.jsxs("button",{onClick:n,disabled:s||i,className:L("rounded-lg border-2 font-bold transition-all duration-300 relative","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","shadow-card",{"bg-green-100 border-green-500 text-green-800 cursor-default":i,"bg-primary border-primary text-primary-foreground":m&&!i,"bg-card border-border text-card-foreground hover:border-primary/30":!m&&!i,"opacity-80":s},u),style:{width:r==="computer"?"min(8vw, 56px)":r==="tablet"?"min(10vw, 56px)":"min(9vw, 48px)",height:r==="computer"?"min(8vw, 56px)":r==="tablet"?"min(10vw, 56px)":"min(9vw, 48px)",fontSize:r==="computer"?"min(3vw, 18px)":r==="tablet"?"min(4vw, 18px)":"min(4.2vw, 15px)"},children:[o,i&&g.jsx("span",{className:"absolute -top-1 -right-1 text-xs",children:"ðŸ”’"})]})}function Y({letters:o,selectedIndices:m,onLetterClick:i,disabled:s=!1,hintIndices:n,className:u}){const r=o,f=e=>e,[a,x]=l.useState("mobile");l.useEffect(()=>{const e=()=>{const c=window.innerWidth;c>=1024?x("computer"):c>=768?x("tablet"):x("mobile")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const d=()=>{const e=r.length;return a==="computer"?e<=12?6:e<=18?9:12:a==="tablet"?e<=12||e<=18?6:8:e<=12?4:(e<=18,6)},t=(e,c)=>g.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:e.map((h,b)=>{const v=f(c+b),E=m.includes(v),T=n.includes(v);return g.jsx(F,{letter:h,isSelected:E,isHint:T,disabled:s,onClick:()=>i(v),deviceType:a},v)})}),y=d(),p=[];for(let e=0;e<r.length;e+=y)p.push(r.slice(e,e+y));return g.jsx("div",{className:L("space-y-4",u),children:p.map((e,c)=>g.jsx("div",{children:t(e,c*y)},c))})}const A=o=>o.toLowerCase().trim();function Z(o,m={}){const{getPoints:i=()=>1}=m,{gameMode:s,teams:n,currentTeam:u,setCurrentTeam:r,updateScore:f,nextTurn:a,consumeHint:x}=$(),{t:d}=H(),{gameState:t,currentLevel:y,solution:p,dispatch:e,setNotification:c,nextLevel:h}=o,[b,v]=l.useState([]),[E,T]=l.useState(new Set);l.useEffect(()=>{s==="competitive"&&n.length>0&&r(o.currentLevelIndex%n.length)},[o.currentLevelIndex,s,n.length,r]),l.useEffect(()=>{v([]),T(new Set)},[o.currentLevelIndex]);const j=l.useCallback(()=>{if(t.gameState!=="playing"||!y)return;if(A(t.answerSlots.join(""))===A(p))if(e({type:"SET_GAME_STATE",payload:"won"}),s==="competitive"){const S=i(y);f(n[u].id,S),c({message:`${d.congrats} +${S}`,type:"success"}),setTimeout(()=>h(),2e3)}else c({message:d.congrats,type:"success"});else{e({type:"SET_GAME_STATE",payload:"failed"});const S=t.answerSlots.join("");if(S&&!b.includes(S)&&v(C=>[...C,S]),c({message:d.wrongAnswer,type:"error"}),s==="competitive"){const C=new Set(E).add(u);T(C),C.size>=n.length?(a("lose"),setTimeout(()=>{e({type:"SHOW",solution:p,letters:t.letters}),c({message:`${d.solutionWas}: ${p}`,type:"error"}),setTimeout(()=>h(),2500)},2e3)):(a("lose"),setTimeout(()=>{e({type:"CLEAR"}),e({type:"SET_GAME_STATE",payload:"playing"})},2e3))}else setTimeout(()=>{e({type:"CLEAR"}),e({type:"SET_GAME_STATE",payload:"playing"})},2e3)}},[t,y,p,s,n,u,i,b,f,c,a,h,e,d,E]),M=l.useCallback(w=>{t.gameState==="playing"&&e({type:"PLACE",gridIndex:w,letter:t.letters[w]})},[t,e]),G=l.useCallback(()=>e({type:"REMOVE_LAST"}),[e]),k=l.useCallback(()=>e({type:"CLEAR"}),[e]),_=l.useCallback(()=>{t.gameState==="playing"&&(e({type:"SHOW",solution:p,letters:t.letters}),c({message:`${d.solutionWas}: ${p}`,type:"error"}),s==="competitive"?(a("lose"),setTimeout(()=>h(),2500)):e({type:"SET_GAME_STATE",payload:"won"}))},[e,p,t,s,a,h,c,d.solutionWas]),R=l.useCallback(()=>{if(t.gameState==="playing"){if(s==="competitive"&&!x(n[u].id)){c({message:d.noHintsLeft,type:"error"});return}e({type:"HINT",solution:p,letters:t.letters})}},[e,p,t,s,x,n,u,c,d.noHintsLeft]),z=l.useMemo(()=>t.gameState==="playing"&&t.slotIndices.some(w=>w!==null&&!t.hintIndices.includes(w)),[t]),I=l.useMemo(()=>t.gameState==="playing"&&t.slotIndices.filter(w=>w!==null).length>t.hintIndices.length,[t]),N=l.useMemo(()=>t.gameState==="playing"&&t.answerSlots.every(w=>w!==""),[t]),W=l.useMemo(()=>t.gameState!=="playing"?!1:s!=="competitive"||(n[u]?.hintsRemaining??0)>0,[t.gameState,s,n,u]);return{...o,wrongAnswers:b,onLetterClick:M,onRemove:G,onClear:k,onCheck:j,onShow:_,onHint:R,canRemove:z,canClear:I,canCheck:N,canHint:W}}class ee extends D{generateLetters(m,i,s){return P(m,i,s,this.isKidsMode())}}const te=({title:o,levelIndex:m,onBack:i,difficulty:s,instructions:n,notification:u,layoutType:r,promptContent:f,solutionContent:a,letterOptionsContent:x,gameControlsContent:d,wrongAnswersContent:t})=>{const y=u?.message??null,p=u?.type??"info";return g.jsxs(O,{title:o,levelIndex:m,onBack:i,difficulty:s,instructions:n,layoutType:r,children:[y&&g.jsx(V,{message:y,type:p}),f,a,x,t,d]})};export{ee as C,Y as L,X as S,te as a,Z as u};
