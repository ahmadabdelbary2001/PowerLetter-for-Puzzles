import{_ as e,b as Y,u as Z,d as ee,a as N,r as l,j as c,B as te,e as se}from"./index-BCNCue0h.js";import{u as ae,S as oe,L as re}from"./useGameControls-CVlQo6Bo.js";import{G as ne}from"./GameControls-CUsyP-C4.js";import{u as ie,G as ce}from"./useInstructions-qVfuRhAK.js";import{s as le,g as ue,u as _e,N as de}from"./Notification-BQoIM4Va.js";import"./GameButton-CkyBVf68.js";import"./circle-check-big-O2NyfuFB.js";class me{async loadLevels(u){const{language:v,categories:y,difficulty:m}=u,R=["animals","science","geography"],L=(y.includes("general")?R:y).map(async i=>{try{const p=`/src/data/${v}/clue/${i}/${v}-clue-${i}-${m}.json`,o=Object.assign({"/src/data/ar/clue/animals/ar-clue-animals-easy.json":()=>e(()=>import("./ar-clue-animals-easy-B_GJKLA_.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-hard.json":()=>e(()=>import("./ar-clue-animals-hard-7EfMbXs4.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-medium.json":()=>e(()=>import("./ar-clue-animals-medium-Bcn1oCUk.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-words.json":()=>e(()=>import("./ar-clue-animals-words-DxH5pZeF.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-easy.json":()=>e(()=>import("./ar-clue-geography-easy-B_kcdeCx.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-hard.json":()=>e(()=>import("./ar-clue-geography-hard-BCuCMNGp.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-medium.json":()=>e(()=>import("./ar-clue-geography-medium-CkoNY3Du.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-words.json":()=>e(()=>import("./ar-clue-geography-words-C7oqRjv9.js"),[]),"/src/data/ar/clue/science/ar-clue-science-easy.json":()=>e(()=>import("./ar-clue-science-easy-f07zg_lU.js"),[]),"/src/data/ar/clue/science/ar-clue-science-hard.json":()=>e(()=>import("./ar-clue-science-hard-CV32qLEY.js"),[]),"/src/data/ar/clue/science/ar-clue-science-medium.json":()=>e(()=>import("./ar-clue-science-medium-BtIrOjNp.js"),[]),"/src/data/ar/clue/science/ar-clue-science-words.json":()=>e(()=>import("./ar-clue-science-words-DpIQpR0-.js"),[]),"/src/data/ar/formation/ar-formation-easy.json":()=>e(()=>import("./ar-formation-easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/ar-formation-hard.json":()=>e(()=>import("./ar-formation-hard-CRxFgu7h.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits/data.json":()=>e(()=>import("./data-CenmuYLK.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/ar-flow-easy.json":()=>e(()=>import("./ar-flow-easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/ar-flow-medium.json":()=>e(()=>import("./ar-flow-medium-BL27Zp8Y.js"),[]),"/src/data/ar/outside-the-story/ar-outside-the-story-animals.json":()=>e(()=>import("./ar-outside-the-story-animals-0m0m6kXG.js"),[]),"/src/data/ar/outside-the-story/ar-outside-the-story-fruits.json":()=>e(()=>import("./ar-outside-the-story-fruits-zTkTe7Gg.js"),[]),"/src/data/ar/outside-the-story/ar-outside-the-story-geography.json":()=>e(()=>import("./ar-outside-the-story-geography-CVgh5HaL.js"),[]),"/src/data/ar/outside-the-story/ar-outside-the-story-science.json":()=>e(()=>import("./ar-outside-the-story-science-D4AkFF1_.js"),[]),"/src/data/ar/picture-choice/animals/data.json":()=>e(()=>import("./data-6hZ_2-dK.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/clue/animals/en-clue-animals-easy.json":()=>e(()=>import("./en-clue-animals-easy-vc2CgBiI.js"),[]),"/src/data/en/clue/animals/en-clue-animals-hard.json":()=>e(()=>import("./en-clue-animals-hard-BmQiyFGH.js"),[]),"/src/data/en/clue/animals/en-clue-animals-medium.json":()=>e(()=>import("./en-clue-animals-medium-CDppU-oU.js"),[]),"/src/data/en/clue/animals/en-clue-animals-words.json":()=>e(()=>import("./en-clue-animals-words-OyMRQ2OB.js"),[]),"/src/data/en/clue/geography/en-clue-geography-easy.json":()=>e(()=>import("./en-clue-geography-easy-v49lXgS1.js"),[]),"/src/data/en/clue/geography/en-clue-geography-hard.json":()=>e(()=>import("./en-clue-geography-hard-Hc9ZYG1D.js"),[]),"/src/data/en/clue/geography/en-clue-geography-medium.json":()=>e(()=>import("./en-clue-geography-medium-Yt4_5ZKV.js"),[]),"/src/data/en/clue/geography/en-clue-geography-words.json":()=>e(()=>import("./en-clue-geography-words-BJFrdNPX.js"),[]),"/src/data/en/clue/science/en-clue-science-easy.json":()=>e(()=>import("./en-clue-science-easy-CXDUIzZm.js"),[]),"/src/data/en/clue/science/en-clue-science-hard.json":()=>e(()=>import("./en-clue-science-hard-Dqcig8Ht.js"),[]),"/src/data/en/clue/science/en-clue-science-medium.json":()=>e(()=>import("./en-clue-science-medium-Dm_81XWt.js"),[]),"/src/data/en/clue/science/en-clue-science-words.json":()=>e(()=>import("./en-clue-science-words-BdiwMlAj.js"),[]),"/src/data/en/formation/en-formation-easy.json":()=>e(()=>import("./en-formation-easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits/data.json":()=>e(()=>import("./data-OxJ4m8-5.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/en-flow-easy.json":()=>e(()=>import("./en-flow-easy-DqbTaQjR.js"),[]),"/src/data/en/outside-the-story/en-outside-the-story-animals.json":()=>e(()=>import("./en-outside-the-story-animals-QFa7I_eA.js"),[]),"/src/data/en/outside-the-story/en-outside-the-story-fruits.json":()=>e(()=>import("./en-outside-the-story-fruits--LJxQFSa.js"),[]),"/src/data/en/outside-the-story/en-outside-the-story-geography.json":()=>e(()=>import("./en-outside-the-story-geography-Dw2uVeLE.js"),[]),"/src/data/en/outside-the-story/en-outside-the-story-science.json":()=>e(()=>import("./en-outside-the-story-science-DF1sazzy.js"),[]),"/src/data/en/picture-choice/animals/data.json":()=>e(()=>import("./data-CtXqoHRL.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])})[p];if(!o)return console.warn(`Module not found for path: ${p}`),[];const A=await o();return(A.default?.levels||A.levels||[]).map(r=>{if(typeof r=="object"&&r!==null){const E=r;return{id:String(E.id??`${m}-${Math.random().toString(36).slice(2,8)}`),clue:String(E.clue??""),solution:String(E.solution??""),difficulty:m}}return null}).filter(r=>r!==null)}catch(p){return console.error(`ClueGameEngine: Failed to load levels for ${v}/${i}/${m}.`,p),[]}}),T=(await Promise.all(L)).flat();return T.length===0?[{id:"error-level",difficulty:"easy",clue:"Could not load levels for the selected categories.",solution:"ERROR"}]:le(T)}generateLetters(u,v,y){return ue(u,v,y,!1)}}const M=new me;function pe(){const s=Y(),u=Z(),v=ee(),{language:y,categories:m,difficulty:R,gameMode:_,updateScore:L,currentTeam:h,setCurrentTeam:T,teams:i,nextTurn:p,consumeHint:I}=v,{t:o}=N(),{loading:A,levels:w,currentLevel:r,currentLevelIndex:E,solution:d,notification:k,setNotification:a,gameState:n,dispatch:t,nextLevel:f,resetLevel:O}=_e(M,{language:y,categories:m,difficulty:R}),[g,G]=l.useState([]),[P,x]=l.useState([]),[S,C]=l.useState(new Set),{canRemove:D,canClear:$,canCheck:H,canHint:B}=ae(n),W=l.useCallback(b=>{n.gameState==="playing"&&t({type:"PLACE",gridIndex:b,letter:g[b]})},[n.gameState,g,t]),F=l.useCallback(()=>t({type:"REMOVE_LAST"}),[t]),z=l.useCallback(()=>t({type:"CLEAR"}),[t]),K=l.useCallback(()=>{if(n.gameState!=="playing")return;if(n.answerSlots.join("")===d){t({type:"SET_GAME_STATE",payload:"won"});const j=r?.difficulty==="medium"?20:r?.difficulty==="hard"?30:10;_==="competitive"?(L(i[h].id,j),a({message:`${o.congrats} +${j}`,type:"success"}),setTimeout(()=>{f(),t({type:"SET_GAME_STATE",payload:"playing"}),a(null)},2e3)):a({message:o.congrats,type:"success"})}else{t({type:"SET_GAME_STATE",payload:"failed"});const j=n.answerSlots.join("");if(j&&!P.includes(j)&&x(V=>[...V,j]),a({message:o.wrongAnswer,type:"error"}),_==="competitive"){const V=new Set(S);V.add(h),C(V),V.size===i.length?setTimeout(()=>{t({type:"SHOW",solution:d,letters:g}),a({message:`${o.solutionWas}: ${d}`,type:"error"}),C(new Set),setTimeout(()=>{f(),t({type:"SET_GAME_STATE",payload:"playing"}),a(null)},2500)},2e3):setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),a(null),p("lose")},2e3)}else setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),a(null)},2e3)}},[n,d,r,_,i,h,L,p,f,o,P,t,a,S,g]),q=l.useCallback(()=>{n.gameState==="playing"&&(t({type:"SHOW",solution:d,letters:g}),a({message:`${o.solutionWas}: ${d}`,type:"error"}),_==="competitive"&&setTimeout(()=>{p("lose"),f(),t({type:"SET_GAME_STATE",payload:"playing"}),a(null)},2500))},[n.gameState,d,g,_,p,f,o.solutionWas,t,a]),J=l.useCallback(()=>{if(_==="competitive"&&!I(i[h].id)){a({message:o.noHintsLeft,type:"error"}),setTimeout(()=>a(null),2e3);return}t({type:"HINT",solution:d,letters:g})},[_,i,h,I,o.noHintsLeft,d,g,t,a]),Q=l.useCallback(async()=>{},[]),U=l.useCallback(()=>{s(_==="competitive"?`/team-config/${u.gameType}`:`/game-mode/${u.gameType}`)},[s,u.gameType,_]),X=l.useCallback(()=>{E>0&&O()},[E,O]);return l.useEffect(()=>{r&&M.generateLetters&&G(M.generateLetters(r.solution,r.difficulty,y)),i.length>0&&T(E%i.length),x([])},[r,y,i.length,E,T]),{loading:A,levels:w,currentLevel:r,solution:d,letters:g,notification:k,wrongAnswers:P,gameState:n.gameState,answerSlots:n.answerSlots,slotIndices:n.slotIndices,hintIndices:n.hintIndices,currentLevelIndex:E,onCheck:K,onShow:q,onLetterClick:W,onRemove:F,onClear:z,onHint:J,nextLevel:f,prevLevel:X,handleBack:U,handleRevealOrListSolutions:Q,resetLevel:O,canRemove:D,canClear:$,canCheck:H,canHint:B}}const Le=()=>{const{t:s}=N(),u=ie("clue"),v=u!=null?{title:u.title,description:u.description??"",steps:u.steps??[]}:void 0,{loading:y,currentLevel:m,solution:R,letters:_,notification:L,wrongAnswers:h,gameState:T,answerSlots:i,slotIndices:p,hintIndices:I,currentLevelIndex:o,levels:A,onCheck:w,onShow:r,onLetterClick:E,onRemove:d,onClear:k,onHint:a,nextLevel:n,prevLevel:t,handleBack:f,resetLevel:O,canRemove:g,canClear:G,canCheck:P,canHint:x}=pe();if(y)return c.jsx("div",{className:"flex justify-center items-center h-screen",children:c.jsxs("p",{children:[s.loading,"..."]})});if(!m||m.solution==="ERROR")return c.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[c.jsx("p",{className:"text-xl font-semibold",children:s.noLevelsFound}),c.jsx(te,{onClick:f,children:s.back})]});const S=L?.message??null,C=L?.type??"info";return c.jsxs(ce,{title:m.clue,levelIndex:o,onBack:f,difficulty:m.difficulty,instructions:v,children:[S&&c.jsx(de,{message:S,type:C}),c.jsx(oe,{solution:R,currentWord:i.join("")}),c.jsx(re,{letters:_,selectedIndices:p.filter(D=>D!==null),onLetterClick:E,disabled:T!=="playing",hintIndices:I}),h.length>0&&c.jsxs("div",{className:"mt-2",children:[c.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[s.wrongAttempts,":"]}),c.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 justify-center",children:h.map((D,$)=>c.jsx(se,{variant:"destructive",className:"text-xs py-1",children:D},$))})]}),c.jsx(ne,{onRemoveLetter:d,onClearAnswer:k,onCheckAnswer:w,onHint:a,onShowSolution:r,onReset:O,onPrevLevel:t,onNextLevel:n,canRemove:g,canClear:G,canCheck:P,canHint:x,canPrev:o>0,canNext:o<A.length-1,gameState:T,isKidsMode:!1,labels:{remove:s.remove,clear:s.clear,check:s.check,hint:s.hint,showSolution:s.showSolution,reset:s.reset,prev:s.prev,next:s.next}})]})};export{Le as default};
