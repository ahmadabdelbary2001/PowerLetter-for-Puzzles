import{_ as e,u as P,b as I,r as l,c as V,j as t,B as L,f as D,A as x,e as w}from"./index-DSv16vA1.js";import{u as b,G as C}from"./useInstructions-CdIQNVTe.js";import{s as R,u as S,N as k}from"./Notification-YkDueqwU.js";import{V as N}from"./volume-2-CmVyxCeX.js";import{C as G}from"./circle-check-big-C7WWpiDY.js";import{C as $}from"./circle-x-BiVegFSD.js";class B{async loadLevels(j){const{language:_,categories:n}=j,m=["animals","fruits","shapes"],a=(n.includes("general")?m:n).map(async g=>{try{const c=`/src/data/${_}/word-choice/${g}/data.json`,d=Object.assign({"/src/data/ar/clue/animals/ar-clue-animals-easy.json":()=>e(()=>import("./ar-clue-animals-easy-B_GJKLA_.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-hard.json":()=>e(()=>import("./ar-clue-animals-hard-7EfMbXs4.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-medium.json":()=>e(()=>import("./ar-clue-animals-medium-Bcn1oCUk.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-words.json":()=>e(()=>import("./ar-clue-animals-words-DxH5pZeF.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-easy.json":()=>e(()=>import("./ar-clue-geography-easy-B_kcdeCx.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-hard.json":()=>e(()=>import("./ar-clue-geography-hard-BCuCMNGp.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-medium.json":()=>e(()=>import("./ar-clue-geography-medium-CkoNY3Du.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-words.json":()=>e(()=>import("./ar-clue-geography-words-C7oqRjv9.js"),[]),"/src/data/ar/clue/science/ar-clue-science-easy.json":()=>e(()=>import("./ar-clue-science-easy-f07zg_lU.js"),[]),"/src/data/ar/clue/science/ar-clue-science-hard.json":()=>e(()=>import("./ar-clue-science-hard-CV32qLEY.js"),[]),"/src/data/ar/clue/science/ar-clue-science-medium.json":()=>e(()=>import("./ar-clue-science-medium-BtIrOjNp.js"),[]),"/src/data/ar/clue/science/ar-clue-science-words.json":()=>e(()=>import("./ar-clue-science-words-DpIQpR0-.js"),[]),"/src/data/ar/formation/ar-formation-easy.json":()=>e(()=>import("./ar-formation-easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/ar-formation-hard.json":()=>e(()=>import("./ar-formation-hard-CRxFgu7h.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits/data.json":()=>e(()=>import("./data-CenmuYLK.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/ar-flow-easy.json":()=>e(()=>import("./ar-flow-easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/ar-flow-medium.json":()=>e(()=>import("./ar-flow-medium-BL27Zp8Y.js"),[]),"/src/data/ar/outside-the-story/ar-outside-the-story-animals.json":()=>e(()=>import("./ar-outside-the-story-animals-0m0m6kXG.js"),[]),"/src/data/ar/outside-the-story/ar-outside-the-story-fruits.json":()=>e(()=>import("./ar-outside-the-story-fruits-zTkTe7Gg.js"),[]),"/src/data/ar/outside-the-story/ar-outside-the-story-geography.json":()=>e(()=>import("./ar-outside-the-story-geography-CVgh5HaL.js"),[]),"/src/data/ar/outside-the-story/ar-outside-the-story-science.json":()=>e(()=>import("./ar-outside-the-story-science-D4AkFF1_.js"),[]),"/src/data/ar/picture-choice/animals/data.json":()=>e(()=>import("./data-6hZ_2-dK.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/clue/animals/en-clue-animals-easy.json":()=>e(()=>import("./en-clue-animals-easy-vc2CgBiI.js"),[]),"/src/data/en/clue/animals/en-clue-animals-hard.json":()=>e(()=>import("./en-clue-animals-hard-BmQiyFGH.js"),[]),"/src/data/en/clue/animals/en-clue-animals-medium.json":()=>e(()=>import("./en-clue-animals-medium-CDppU-oU.js"),[]),"/src/data/en/clue/animals/en-clue-animals-words.json":()=>e(()=>import("./en-clue-animals-words-OyMRQ2OB.js"),[]),"/src/data/en/clue/geography/en-clue-geography-easy.json":()=>e(()=>import("./en-clue-geography-easy-v49lXgS1.js"),[]),"/src/data/en/clue/geography/en-clue-geography-hard.json":()=>e(()=>import("./en-clue-geography-hard-Hc9ZYG1D.js"),[]),"/src/data/en/clue/geography/en-clue-geography-medium.json":()=>e(()=>import("./en-clue-geography-medium-Yt4_5ZKV.js"),[]),"/src/data/en/clue/geography/en-clue-geography-words.json":()=>e(()=>import("./en-clue-geography-words-BJFrdNPX.js"),[]),"/src/data/en/clue/science/en-clue-science-easy.json":()=>e(()=>import("./en-clue-science-easy-CXDUIzZm.js"),[]),"/src/data/en/clue/science/en-clue-science-hard.json":()=>e(()=>import("./en-clue-science-hard-Dqcig8Ht.js"),[]),"/src/data/en/clue/science/en-clue-science-medium.json":()=>e(()=>import("./en-clue-science-medium-Dm_81XWt.js"),[]),"/src/data/en/clue/science/en-clue-science-words.json":()=>e(()=>import("./en-clue-science-words-BdiwMlAj.js"),[]),"/src/data/en/formation/en-formation-easy.json":()=>e(()=>import("./en-formation-easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits/data.json":()=>e(()=>import("./data-OxJ4m8-5.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/en-flow-easy.json":()=>e(()=>import("./en-flow-easy-DqbTaQjR.js"),[]),"/src/data/en/outside-the-story/en-outside-the-story-animals.json":()=>e(()=>import("./en-outside-the-story-animals-QFa7I_eA.js"),[]),"/src/data/en/outside-the-story/en-outside-the-story-fruits.json":()=>e(()=>import("./en-outside-the-story-fruits--LJxQFSa.js"),[]),"/src/data/en/outside-the-story/en-outside-the-story-geography.json":()=>e(()=>import("./en-outside-the-story-geography-Dw2uVeLE.js"),[]),"/src/data/en/outside-the-story/en-outside-the-story-science.json":()=>e(()=>import("./en-outside-the-story-science-DF1sazzy.js"),[]),"/src/data/en/picture-choice/animals/data.json":()=>e(()=>import("./data-CtXqoHRL.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])})[c];return d?((await d()).default?.levels||[]).map(r=>{if(typeof r=="object"&&r!==null&&"id"in r&&"image"in r&&"sound"in r&&"solution"in r&&"options"in r&&Array.isArray(r.options)){const h=new Set(r.options);return h.add(r.solution),{id:String(r.id),image:String(r.image),sound:String(r.sound),solution:String(r.solution),options:Array.from(h)}}return null}).filter(r=>r!==null):(console.warn(`Module not found for path: ${c}`),[])}catch(c){return console.error(`WordChoiceGameEngine: Failed to load levels for ${_}/${g}.`,c),[]}}),o=(await Promise.all(a)).flat();return o.length===0?[{id:"error-level",image:"/assets/images/error.png",sound:"",solution:"ERROR",options:["Error","Loading","Failed"]}]:R(o)}}const W=new B;function M(){const s=P(),{language:j,categories:_,gameMode:n,gameType:m}=I(),{loading:v,currentLevel:a,nextLevel:p}=S(W,{language:j,categories:_}),[o,g]=l.useState([]),[c,E]=l.useState(null),[d,u]=l.useState("idle"),y=l.useRef(null),r=i=>`${"/PowerLetter-for-Puzzles/".replace(/\/$/,"")}/${i.replace(/^\//,"")}`,h=l.useCallback(()=>{y.current?.play().catch(i=>console.error("Audio play failed:",i))},[]),A=l.useCallback(i=>{a&&d!=="correct"&&(E(i),i===a.solution?(u("correct"),setTimeout(()=>{p()},1200)):(u("incorrect"),setTimeout(()=>u("idle"),1200)))},[d,a,p]),O=l.useCallback(()=>{s(n==="competitive"?`/team-config/${m}`:"/kids-games")},[s,n,m]);return l.useEffect(()=>{a&&(g(R([...a.options])),u("idle"),E(null))},[a]),{loading:v,currentLevel:a,shuffledOptions:o,answerStatus:d,selectedOption:c,audioRef:y,getAssetPath:r,playSound:h,handleOptionClick:A,nextLevel:p,handleBack:O}}const H=()=>{const{t:s,i18n:j}=V(),_=j.dir(),n=b("wordChoice"),m=n?{title:n.title??"",description:n.description??"",steps:n.steps??[]}:void 0,{loading:v,currentLevel:a,shuffledOptions:p,answerStatus:o,selectedOption:g,audioRef:c,getAssetPath:E,playSound:d,handleOptionClick:u,nextLevel:y,handleBack:r}=M();if(v)return t.jsx("div",{className:"flex justify-center items-center h-screen",children:t.jsxs("p",{children:[s.loading,"..."]})});if(!a||a.solution==="ERROR")return t.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[t.jsx("p",{className:"text-xl font-semibold",children:s.noLevelsFound}),t.jsx(L,{onClick:r,children:s.back})]});const h=o!=="idle",A=o==="correct"?s.congrats??"Correct!":o==="incorrect"?s.wrongAnswer??"Wrong! Try again":"",O=o==="correct"?"success":"error";return t.jsxs(C,{title:s.wordChoiceTitle??"Word Choice",levelIndex:0,onBack:r,layoutType:"image",instructions:m,children:[h&&t.jsx(k,{message:A,type:O,duration:1e3}),t.jsxs("div",{className:"relative aspect-video bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:[t.jsx("img",{src:E(a.image),alt:"Guess the word",className:"max-h-full max-w-full object-contain"}),t.jsx(L,{size:"icon",onClick:d,className:"absolute top-3 right-3 rounded-full bg-black/50 hover:bg-black/70","aria-label":s.playSound??"Play sound",children:t.jsx(N,{className:"h-6 w-6 text-white","aria-hidden":!0})}),t.jsx("audio",{ref:c,src:E(a.sound),preload:"auto"})]}),t.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 max-[200px]:grid-cols-1 gap-3 pt-4",children:p.map(i=>{const f=g===i,T=i===a.solution;return t.jsxs(L,{onClick:()=>u(i),disabled:o==="correct",className:D("text-base h-16 flex items-center justify-center gap-2 transition-all duration-300",f&&o==="correct"&&"bg-green-500 hover:bg-green-600 border-2 border-green-700",f&&o==="incorrect"&&"bg-red-500 hover:bg-red-500 border-2 border-red-700",!f&&o==="incorrect"&&T&&"bg-green-200 text-green-800 border-2 border-green-400",o==="idle"&&"bg-card text-card-foreground hover:bg-muted"),children:[i,f&&o==="correct"&&t.jsx(G,{}),f&&o==="incorrect"&&t.jsx($,{})]},i)})}),o==="correct"&&t.jsx("div",{className:"pt-4",children:t.jsxs(L,{onClick:y,className:"w-full bg-green-600 hover:bg-green-700 text-lg py-6",children:[s.next," ",_==="rtl"?t.jsx(x,{className:"ml-2"}):t.jsx(w,{className:"ml-2"})]})})]})};export{H as default};
