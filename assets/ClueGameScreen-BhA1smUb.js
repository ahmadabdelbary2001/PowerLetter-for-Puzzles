import{_ as e,u as Z,a as ee,b as M,c as N,r as d,j as l,B as te,d as ae}from"./index-CN5lWD5F.js";import{u as se,S as oe,L as re}from"./useGameControls-CtL1fSKP.js";import{G as ne}from"./GameControls-DO6I8kQe.js";import{s as ie,g as le,u as ce,G as ue,N as de}from"./Notification-lmh7io55.js";import"./GameButton-D5zi3iW5.js";import"./circle-check-big-DeCOWU1k.js";class _e{async loadLevels(E){const{language:f,categories:c,difficulty:v}=E,w=["animals","science","geography"],T=(c.includes("general")?w:c).map(async n=>{try{const m=`/src/data/${f}/clue/${n}/${f}-clue-${n}-${v}.json`,i=Object.assign({"/src/data/ar/clue/animals/ar-clue-animals-easy.json":()=>e(()=>import("./ar-clue-animals-easy-B_GJKLA_.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-hard.json":()=>e(()=>import("./ar-clue-animals-hard-7EfMbXs4.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-medium.json":()=>e(()=>import("./ar-clue-animals-medium-Bcn1oCUk.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-words.json":()=>e(()=>import("./ar-clue-animals-words-DxH5pZeF.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-easy.json":()=>e(()=>import("./ar-clue-geography-easy-B_kcdeCx.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-hard.json":()=>e(()=>import("./ar-clue-geography-hard-BCuCMNGp.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-medium.json":()=>e(()=>import("./ar-clue-geography-medium-CkoNY3Du.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-words.json":()=>e(()=>import("./ar-clue-geography-words-C7oqRjv9.js"),[]),"/src/data/ar/clue/science/ar-clue-science-easy.json":()=>e(()=>import("./ar-clue-science-easy-f07zg_lU.js"),[]),"/src/data/ar/clue/science/ar-clue-science-hard.json":()=>e(()=>import("./ar-clue-science-hard-CV32qLEY.js"),[]),"/src/data/ar/clue/science/ar-clue-science-medium.json":()=>e(()=>import("./ar-clue-science-medium-BtIrOjNp.js"),[]),"/src/data/ar/clue/science/ar-clue-science-words.json":()=>e(()=>import("./ar-clue-science-words-DpIQpR0-.js"),[]),"/src/data/ar/formation/ar-formation-easy.json":()=>e(()=>import("./ar-formation-easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/ar-formation-hard.json":()=>e(()=>import("./ar-formation-hard-CRxFgu7h.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits/data.json":()=>e(()=>import("./data-CenmuYLK.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/ar-flow-easy.json":()=>e(()=>import("./ar-flow-easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/ar-flow-medium.json":()=>e(()=>import("./ar-flow-medium-BL27Zp8Y.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/clue/animals/en-clue-animals-easy.json":()=>e(()=>import("./en-clue-animals-easy-vc2CgBiI.js"),[]),"/src/data/en/clue/animals/en-clue-animals-hard.json":()=>e(()=>import("./en-clue-animals-hard-BmQiyFGH.js"),[]),"/src/data/en/clue/animals/en-clue-animals-medium.json":()=>e(()=>import("./en-clue-animals-medium-CDppU-oU.js"),[]),"/src/data/en/clue/animals/en-clue-animals-words.json":()=>e(()=>import("./en-clue-animals-words-OyMRQ2OB.js"),[]),"/src/data/en/clue/geography/en-clue-geography-easy.json":()=>e(()=>import("./en-clue-geography-easy-v49lXgS1.js"),[]),"/src/data/en/clue/geography/en-clue-geography-hard.json":()=>e(()=>import("./en-clue-geography-hard-Hc9ZYG1D.js"),[]),"/src/data/en/clue/geography/en-clue-geography-medium.json":()=>e(()=>import("./en-clue-geography-medium-Yt4_5ZKV.js"),[]),"/src/data/en/clue/geography/en-clue-geography-words.json":()=>e(()=>import("./en-clue-geography-words-BJFrdNPX.js"),[]),"/src/data/en/clue/science/en-clue-science-easy.json":()=>e(()=>import("./en-clue-science-easy-CXDUIzZm.js"),[]),"/src/data/en/clue/science/en-clue-science-hard.json":()=>e(()=>import("./en-clue-science-hard-Dqcig8Ht.js"),[]),"/src/data/en/clue/science/en-clue-science-medium.json":()=>e(()=>import("./en-clue-science-medium-Dm_81XWt.js"),[]),"/src/data/en/clue/science/en-clue-science-words.json":()=>e(()=>import("./en-clue-science-words-BdiwMlAj.js"),[]),"/src/data/en/formation/en-formation-easy.json":()=>e(()=>import("./en-formation-easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits/data.json":()=>e(()=>import("./data-OxJ4m8-5.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/en-flow-easy.json":()=>e(()=>import("./en-flow-easy-DqbTaQjR.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])})[m];if(!i)return console.warn(`Module not found for path: ${m}`),[];const j=await i();return(j.default?.levels||j.levels||[]).map(o=>{if(typeof o=="object"&&o!==null){const p=o;return{id:String(p.id??`${v}-${Math.random().toString(36).slice(2,8)}`),clue:String(p.clue??""),solution:String(p.solution??""),difficulty:v}}return null}).filter(o=>o!==null)}catch(m){return console.error(`ClueGameEngine: Failed to load levels for ${f}/${n}/${v}.`,m),[]}}),L=(await Promise.all(T)).flat();return L.length===0?[{id:"error-level",difficulty:"easy",clue:"Could not load levels for the selected categories.",solution:"ERROR"}]:ie(L)}generateLetters(E,f,c){return le(E,f,c,!1)}}const $=new _e;function me(){const a=Z(),E=ee(),f=M(),{language:c,categories:v,difficulty:w,gameMode:u,updateScore:T,currentTeam:y,setCurrentTeam:L,teams:n,nextTurn:m,consumeHint:A}=f,{t:i}=N(),{loading:j,levels:x,currentLevel:o,currentLevelIndex:p,solution:_,notification:V,setNotification:s,gameState:r,dispatch:t,nextLevel:h,resetLevel:I}=ce($,{language:c,categories:v,difficulty:w}),[g,k]=d.useState([]),[O,P]=d.useState([]),[D,R]=d.useState(new Set),{canRemove:b,canClear:H,canCheck:W,canHint:B}=se(r),F=d.useCallback(G=>{r.gameState==="playing"&&t({type:"PLACE",gridIndex:G,letter:g[G]})},[r.gameState,g,t]),U=d.useCallback(()=>t({type:"REMOVE_LAST"}),[t]),z=d.useCallback(()=>t({type:"CLEAR"}),[t]),K=d.useCallback(()=>{if(r.gameState!=="playing")return;if(r.answerSlots.join("")===_){t({type:"SET_GAME_STATE",payload:"won"});const S=o?.difficulty==="medium"?20:o?.difficulty==="hard"?30:10;u==="competitive"?(T(n[y].id,S),s({message:`${i.congrats} +${S}`,type:"success"}),setTimeout(()=>{h(),t({type:"SET_GAME_STATE",payload:"playing"}),s(null)},2e3)):s({message:i.congrats,type:"success"})}else{t({type:"SET_GAME_STATE",payload:"failed"});const S=r.answerSlots.join("");if(S&&!O.includes(S)&&P(C=>[...C,S]),s({message:i.wrongAnswer,type:"error"}),u==="competitive"){const C=new Set(D);C.add(y),R(C),C.size===n.length?setTimeout(()=>{t({type:"SHOW",solution:_,letters:g}),s({message:`${i.solutionWas}: ${_}`,type:"error"}),R(new Set),setTimeout(()=>{h(),t({type:"SET_GAME_STATE",payload:"playing"}),s(null)},2500)},2e3):setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),s(null),m("lose")},2e3)}else setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),s(null)},2e3)}},[r,_,o,u,n,y,T,m,h,i,O,t,s,D,g]),q=d.useCallback(()=>{r.gameState==="playing"&&(t({type:"SHOW",solution:_,letters:g}),s({message:`${i.solutionWas}: ${_}`,type:"error"}),u==="competitive"&&setTimeout(()=>{m("lose"),h(),t({type:"SET_GAME_STATE",payload:"playing"}),s(null)},2500))},[r.gameState,_,g,u,m,h,i.solutionWas,t,s]),J=d.useCallback(()=>{if(u==="competitive"&&!A(n[y].id)){s({message:i.noHintsLeft,type:"error"}),setTimeout(()=>s(null),2e3);return}t({type:"HINT",solution:_,letters:g})},[u,n,y,A,i.noHintsLeft,_,g,t,s]),Q=d.useCallback(async()=>{},[]),X=d.useCallback(()=>{a(u==="competitive"?`/team-config/${E.gameType}`:`/game-mode/${E.gameType}`)},[a,E.gameType,u]),Y=d.useCallback(()=>{p>0&&I()},[p,I]);return d.useEffect(()=>{o&&$.generateLetters&&k($.generateLetters(o.solution,o.difficulty,c)),n.length>0&&L(p%n.length),P([])},[o,c,n.length,p,L]),{loading:j,levels:x,currentLevel:o,solution:_,letters:g,notification:V,wrongAnswers:O,gameState:r.gameState,answerSlots:r.answerSlots,slotIndices:r.slotIndices,hintIndices:r.hintIndices,currentLevelIndex:p,onCheck:K,onShow:q,onLetterClick:F,onRemove:U,onClear:z,onHint:J,nextLevel:h,prevLevel:Y,handleBack:X,handleRevealOrListSolutions:Q,resetLevel:I,canRemove:b,canClear:H,canCheck:W,canHint:B}}const pe={title:"Clue-Driven Word Find",description:"Find the hidden word by selecting letters that match the clue. Use your vocabulary skills to solve the puzzle!",steps:["Read the clue at the top of the screen to understand what word you're looking for.","Click on letters from the grid to form your answer.","Use the 'Remove' button to undo your last letter selection.","Use the 'Clear' button to remove all letters and start over.","Use the 'Check' button to submit your answer and see if it's correct.","Use the 'Hint' button if you need help (limited in competitive mode).","Find the correct word before running out of attempts!"]},ge={title:"البحث عن الكلمات بالأدلة",description:"ابحث عن الكلمة المخفية عن طريق اختيار الحروف التي تتطابق مع القرينة. استخدم مفرداتك لحل اللغز!",steps:["اقرأ القرينة في أعلى الشاشة لتعرف الكلمة المطلوبة.","انقر على الحروف من الشبكة لتكوين إجابتك.","استخدم زر 'إزالة' للتراجع عن آخر حرف وضعته.","استخدم زر 'مسح' لحذف كل الحروف والبدء من جديد.","اضغط زر 'تحقق' لإرسال إجابتك ومعرفة ما إذا كانت صحيحة.","استخدم زر 'تلميح' إذا احتجت مساعدة (محدود في الوضع التنافسي).","حاول إيجاد الكلمة الصحيحة قبل نفاد المحاولات!"]};function Ee(a){return typeof a=="string"&&a.toLowerCase().startsWith("ar")?ge:pe}const Ae=()=>{const{t:a}=N(),{language:E}=M(),{loading:f,currentLevel:c,solution:v,letters:w,notification:u,wrongAnswers:T,gameState:y,answerSlots:L,slotIndices:n,hintIndices:m,currentLevelIndex:A,levels:i,onCheck:j,onShow:x,onLetterClick:o,onRemove:p,onClear:_,onHint:V,nextLevel:s,prevLevel:r,handleBack:t,resetLevel:h,canRemove:I,canClear:g,canCheck:k,canHint:O}=me();if(f)return l.jsx("div",{className:"flex justify-center items-center h-screen",children:l.jsxs("p",{children:[a.loading,"..."]})});if(!c||c.solution==="ERROR")return l.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[l.jsx("p",{className:"text-xl font-semibold",children:a.noLevelsFound}),l.jsx(te,{onClick:t,children:a.back})]});const P=u?.message??null,D=u?.type??"info";return l.jsxs(ue,{title:c.clue,levelIndex:A,onBack:t,difficulty:c.difficulty,instructions:Ee(E),children:[P&&l.jsx(de,{message:P,type:D}),l.jsx(oe,{solution:v,currentWord:L.join("")}),l.jsx(re,{letters:w,selectedIndices:n.filter(R=>R!==null),onLetterClick:o,disabled:y!=="playing",hintIndices:m}),T.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[a.wrongAttempts,":"]}),l.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 justify-center",children:T.map((R,b)=>l.jsx(ae,{variant:"destructive",className:"text-xs py-1",children:R},b))})]}),l.jsx(ne,{onRemoveLetter:p,onClearAnswer:_,onCheckAnswer:j,onHint:V,onShowSolution:x,onReset:h,onPrevLevel:r,onNextLevel:s,canRemove:I,canClear:g,canCheck:k,canHint:O,canPrev:A>0,canNext:A<i.length-1,gameState:y,isKidsMode:!1,labels:{remove:a.remove,clear:a.clear,check:a.check,hint:a.hint,showSolution:a.showSolution,reset:a.reset,prev:a.prev,next:a.next}})]})};export{Ae as default};
