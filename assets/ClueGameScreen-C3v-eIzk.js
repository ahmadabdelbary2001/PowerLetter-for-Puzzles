import{_ as e,u as Y,a as Z,b as ee,c as M,r as _,d as te,j as l,B as ae,e as se}from"./index-DEbMSiNp.js";import{u as oe,S as ne,L as re}from"./useGameControls-Ckm8COo8.js";import{G as ie}from"./GameControls-sdWxx6a3.js";import{s as le,g as ce,u as ue,a as _e,e as de,G as me,N as pe}from"./instructions-DjHNv5WI.js";import"./GameButton-BXB-vHJh.js";import"./circle-check-big-9Nc9Vcqt.js";class ge{async loadLevels(E){const{language:f,categories:c,difficulty:y}=E,I=["animals","science","geography"],L=(c.includes("general")?I:c).map(async r=>{try{const m=`/src/data/${f}/clue/${r}/${f}-clue-${r}-${y}.json`,i=Object.assign({"/src/data/ar/clue/animals/ar-clue-animals-easy.json":()=>e(()=>import("./ar-clue-animals-easy-B_GJKLA_.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-hard.json":()=>e(()=>import("./ar-clue-animals-hard-7EfMbXs4.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-medium.json":()=>e(()=>import("./ar-clue-animals-medium-Bcn1oCUk.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-words.json":()=>e(()=>import("./ar-clue-animals-words-DxH5pZeF.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-easy.json":()=>e(()=>import("./ar-clue-geography-easy-B_kcdeCx.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-hard.json":()=>e(()=>import("./ar-clue-geography-hard-BCuCMNGp.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-medium.json":()=>e(()=>import("./ar-clue-geography-medium-CkoNY3Du.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-words.json":()=>e(()=>import("./ar-clue-geography-words-C7oqRjv9.js"),[]),"/src/data/ar/clue/science/ar-clue-science-easy.json":()=>e(()=>import("./ar-clue-science-easy-f07zg_lU.js"),[]),"/src/data/ar/clue/science/ar-clue-science-hard.json":()=>e(()=>import("./ar-clue-science-hard-CV32qLEY.js"),[]),"/src/data/ar/clue/science/ar-clue-science-medium.json":()=>e(()=>import("./ar-clue-science-medium-BtIrOjNp.js"),[]),"/src/data/ar/clue/science/ar-clue-science-words.json":()=>e(()=>import("./ar-clue-science-words-DpIQpR0-.js"),[]),"/src/data/ar/formation/ar-formation-easy.json":()=>e(()=>import("./ar-formation-easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/ar-formation-hard.json":()=>e(()=>import("./ar-formation-hard-CRxFgu7h.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits/data.json":()=>e(()=>import("./data-CenmuYLK.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/ar-flow-easy.json":()=>e(()=>import("./ar-flow-easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/ar-flow-medium.json":()=>e(()=>import("./ar-flow-medium-BL27Zp8Y.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/clue/animals/en-clue-animals-easy.json":()=>e(()=>import("./en-clue-animals-easy-vc2CgBiI.js"),[]),"/src/data/en/clue/animals/en-clue-animals-hard.json":()=>e(()=>import("./en-clue-animals-hard-BmQiyFGH.js"),[]),"/src/data/en/clue/animals/en-clue-animals-medium.json":()=>e(()=>import("./en-clue-animals-medium-CDppU-oU.js"),[]),"/src/data/en/clue/animals/en-clue-animals-words.json":()=>e(()=>import("./en-clue-animals-words-OyMRQ2OB.js"),[]),"/src/data/en/clue/geography/en-clue-geography-easy.json":()=>e(()=>import("./en-clue-geography-easy-v49lXgS1.js"),[]),"/src/data/en/clue/geography/en-clue-geography-hard.json":()=>e(()=>import("./en-clue-geography-hard-Hc9ZYG1D.js"),[]),"/src/data/en/clue/geography/en-clue-geography-medium.json":()=>e(()=>import("./en-clue-geography-medium-Yt4_5ZKV.js"),[]),"/src/data/en/clue/geography/en-clue-geography-words.json":()=>e(()=>import("./en-clue-geography-words-BJFrdNPX.js"),[]),"/src/data/en/clue/science/en-clue-science-easy.json":()=>e(()=>import("./en-clue-science-easy-CXDUIzZm.js"),[]),"/src/data/en/clue/science/en-clue-science-hard.json":()=>e(()=>import("./en-clue-science-hard-Dqcig8Ht.js"),[]),"/src/data/en/clue/science/en-clue-science-medium.json":()=>e(()=>import("./en-clue-science-medium-Dm_81XWt.js"),[]),"/src/data/en/clue/science/en-clue-science-words.json":()=>e(()=>import("./en-clue-science-words-BdiwMlAj.js"),[]),"/src/data/en/formation/en-formation-easy.json":()=>e(()=>import("./en-formation-easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits/data.json":()=>e(()=>import("./data-OxJ4m8-5.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/en-flow-easy.json":()=>e(()=>import("./en-flow-easy-DqbTaQjR.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])})[m];if(!i)return console.warn(`Module not found for path: ${m}`),[];const j=await i();return(j.default?.levels||j.levels||[]).map(o=>{if(typeof o=="object"&&o!==null){const p=o;return{id:String(p.id??`${y}-${Math.random().toString(36).slice(2,8)}`),clue:String(p.clue??""),solution:String(p.solution??""),difficulty:y}}return null}).filter(o=>o!==null)}catch(m){return console.error(`ClueGameEngine: Failed to load levels for ${f}/${r}/${y}.`,m),[]}}),h=(await Promise.all(L)).flat();return h.length===0?[{id:"error-level",difficulty:"easy",clue:"Could not load levels for the selected categories.",solution:"ERROR"}]:le(h)}generateLetters(E,f,c){return ce(E,f,c,!1)}}const b=new ge;function Ee(){const a=Y(),E=Z(),f=ee(),{language:c,categories:y,difficulty:I,gameMode:u,updateScore:L,currentTeam:v,setCurrentTeam:h,teams:r,nextTurn:m,consumeHint:A}=f,{t:i}=M(),{loading:j,levels:C,currentLevel:o,currentLevelIndex:p,solution:d,notification:D,setNotification:s,gameState:n,dispatch:t,nextLevel:T,resetLevel:O}=ue(b,{language:c,categories:y,difficulty:I}),[g,k]=_.useState([]),[w,P]=_.useState([]),[V,R]=_.useState(new Set),{canRemove:G,canClear:N,canCheck:H,canHint:W}=oe(n),B=_.useCallback($=>{n.gameState==="playing"&&t({type:"PLACE",gridIndex:$,letter:g[$]})},[n.gameState,g,t]),F=_.useCallback(()=>t({type:"REMOVE_LAST"}),[t]),z=_.useCallback(()=>t({type:"CLEAR"}),[t]),K=_.useCallback(()=>{if(n.gameState!=="playing")return;if(n.answerSlots.join("")===d){t({type:"SET_GAME_STATE",payload:"won"});const S=o?.difficulty==="medium"?20:o?.difficulty==="hard"?30:10;u==="competitive"?(L(r[v].id,S),s({message:`${i.congrats} +${S}`,type:"success"}),setTimeout(()=>{T(),t({type:"SET_GAME_STATE",payload:"playing"}),s(null)},2e3)):s({message:i.congrats,type:"success"})}else{t({type:"SET_GAME_STATE",payload:"failed"});const S=n.answerSlots.join("");if(S&&!w.includes(S)&&P(x=>[...x,S]),s({message:i.wrongAnswer,type:"error"}),u==="competitive"){const x=new Set(V);x.add(v),R(x),x.size===r.length?setTimeout(()=>{t({type:"SHOW",solution:d,letters:g}),s({message:`${i.solutionWas}: ${d}`,type:"error"}),R(new Set),setTimeout(()=>{T(),t({type:"SET_GAME_STATE",payload:"playing"}),s(null)},2500)},2e3):setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),s(null),m("lose")},2e3)}else setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),s(null)},2e3)}},[n,d,o,u,r,v,L,m,T,i,w,t,s,V,g]),q=_.useCallback(()=>{n.gameState==="playing"&&(t({type:"SHOW",solution:d,letters:g}),s({message:`${i.solutionWas}: ${d}`,type:"error"}),u==="competitive"&&setTimeout(()=>{m("lose"),T(),t({type:"SET_GAME_STATE",payload:"playing"}),s(null)},2500))},[n.gameState,d,g,u,m,T,i.solutionWas,t,s]),J=_.useCallback(()=>{if(u==="competitive"&&!A(r[v].id)){s({message:i.noHintsLeft,type:"error"}),setTimeout(()=>s(null),2e3);return}t({type:"HINT",solution:d,letters:g})},[u,r,v,A,i.noHintsLeft,d,g,t,s]),Q=_.useCallback(async()=>{},[]),U=_.useCallback(()=>{a(u==="competitive"?`/team-config/${E.gameType}`:`/game-mode/${E.gameType}`)},[a,E.gameType,u]),X=_.useCallback(()=>{p>0&&O()},[p,O]);return _.useEffect(()=>{o&&b.generateLetters&&k(b.generateLetters(o.solution,o.difficulty,c)),r.length>0&&h(p%r.length),P([])},[o,c,r.length,p,h]),{loading:j,levels:C,currentLevel:o,solution:d,letters:g,notification:D,wrongAnswers:w,gameState:n.gameState,answerSlots:n.answerSlots,slotIndices:n.slotIndices,hintIndices:n.hintIndices,currentLevelIndex:p,onCheck:K,onShow:q,onLetterClick:B,onRemove:F,onClear:z,onHint:J,nextLevel:T,prevLevel:X,handleBack:U,handleRevealOrListSolutions:Q,resetLevel:O,canRemove:G,canClear:N,canCheck:H,canHint:W}}function fe(){const{i18n:a}=te();return(a.language?.toLowerCase()).startsWith("ar")?_e.clue:de.clue}const je=()=>{const{t:a}=M(),E=fe(),{loading:f,currentLevel:c,solution:y,letters:I,notification:u,wrongAnswers:L,gameState:v,answerSlots:h,slotIndices:r,hintIndices:m,currentLevelIndex:A,levels:i,onCheck:j,onShow:C,onLetterClick:o,onRemove:p,onClear:d,onHint:D,nextLevel:s,prevLevel:n,handleBack:t,resetLevel:T,canRemove:O,canClear:g,canCheck:k,canHint:w}=Ee();if(f)return l.jsx("div",{className:"flex justify-center items-center h-screen",children:l.jsxs("p",{children:[a.loading,"..."]})});if(!c||c.solution==="ERROR")return l.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[l.jsx("p",{className:"text-xl font-semibold",children:a.noLevelsFound}),l.jsx(ae,{onClick:t,children:a.back})]});const P=u?.message??null,V=u?.type??"info";return l.jsxs(me,{title:c.clue,levelIndex:A,onBack:t,difficulty:c.difficulty,instructions:E,children:[P&&l.jsx(pe,{message:P,type:V}),l.jsx(ne,{solution:y,currentWord:h.join("")}),l.jsx(re,{letters:I,selectedIndices:r.filter(R=>R!==null),onLetterClick:o,disabled:v!=="playing",hintIndices:m}),L.length>0&&l.jsxs("div",{className:"mt-2",children:[l.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[a.wrongAttempts,":"]}),l.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 justify-center",children:L.map((R,G)=>l.jsx(se,{variant:"destructive",className:"text-xs py-1",children:R},G))})]}),l.jsx(ie,{onRemoveLetter:p,onClearAnswer:d,onCheckAnswer:j,onHint:D,onShowSolution:C,onReset:T,onPrevLevel:n,onNextLevel:s,canRemove:O,canClear:g,canCheck:k,canHint:w,canPrev:A>0,canNext:A<i.length-1,gameState:v,isKidsMode:!1,labels:{remove:a.remove,clear:a.clear,check:a.check,hint:a.hint,showSolution:a.showSolution,reset:a.reset,prev:a.prev,next:a.next}})]})};export{je as default};
