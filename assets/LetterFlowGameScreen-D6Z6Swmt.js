import{_ as t,r as A,j as _,c as J,B as ce}from"./index-1P8EEWAI.js";import{B as ue,s as _e,u as me,G as he}from"./GameLayout-By1wpSWm.js";import{G as pe}from"./GameControls-sb9GFWUU.js";import{N as fe}from"./Notification-T-5enp9M.js";import"./GameButton-TDo5uZ0m.js";import"./circle-check-big-RhV8_Y_L.js";function ye(l,o,u=70,r=50){if(o<=0)return`hsl(0, ${u}%, ${r}%)`;const n=Math.round(l*360/o)%360,j=r>50?r*.9:r*1.1;return`hsl(${n}, ${u}%, ${j}%)`}class xe extends ue{async loadLevels(o){const{language:u,difficulty:r}=o;if(!r)return[];try{const n=this.getModulePath(u,"",r),g=Object.assign({"/src/data/ar/formation/easy.json":()=>t(()=>import("./easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/hard.json":()=>t(()=>import("./hard-DzMXngiv.js"),[]),"/src/data/ar/img-choice/animals/data.json":()=>t(()=>import("./data-6hZ_2-dK.js"),[]),"/src/data/ar/img-clue/animals/data.json":()=>t(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/img-clue/fruits-and-vegetables/data.json":()=>t(()=>import("./data-DlhJ3pZw.js"),[]),"/src/data/ar/img-clue/shapes/data.json":()=>t(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/easy.json":()=>t(()=>import("./easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/medium.json":()=>t(()=>import("./medium-DnN41iEv.js"),[]),"/src/data/ar/outside-the-story/animals.json":()=>t(()=>import("./animals-BD_uC3F6.js"),[]),"/src/data/ar/outside-the-story/anime.json":()=>t(()=>import("./anime-X9XTb-jh.js"),[]),"/src/data/ar/outside-the-story/cars.json":()=>t(()=>import("./cars-LFoQ5kcr.js"),[]),"/src/data/ar/outside-the-story/cartoons.json":()=>t(()=>import("./cartoons-9ln4fVtF.js"),[]),"/src/data/ar/outside-the-story/characters.json":()=>t(()=>import("./characters-BClrgWDD.js"),[]),"/src/data/ar/outside-the-story/clothes.json":()=>t(()=>import("./clothes-DZukcyjc.js"),[]),"/src/data/ar/outside-the-story/drinks.json":()=>t(()=>import("./drinks-DWTisQdZ.js"),[]),"/src/data/ar/outside-the-story/foods.json":()=>t(()=>import("./foods-BPEl4jwc.js"),[]),"/src/data/ar/outside-the-story/football.json":()=>t(()=>import("./football-BkDTW0je.js"),[]),"/src/data/ar/outside-the-story/fruits-and-vegetables.json":()=>t(()=>import("./fruits-and-vegetables-CWZ59ral.js"),[]),"/src/data/ar/outside-the-story/gamers.json":()=>t(()=>import("./gamers-DU27ka0Y.js"),[]),"/src/data/ar/outside-the-story/geography.json":()=>t(()=>import("./geography-Bmt1Mp9F.js"),[]),"/src/data/ar/outside-the-story/k-pop.json":()=>t(()=>import("./k-pop-CvncURYW.js"),[]),"/src/data/ar/outside-the-story/science.json":()=>t(()=>import("./science-C1rxd0mO.js"),[]),"/src/data/ar/outside-the-story/series.json":()=>t(()=>import("./series-DgCSJJru.js"),[]),"/src/data/ar/outside-the-story/spy.json":()=>t(()=>import("./spy-CTUdze8o.js"),[]),"/src/data/ar/outside-the-story/sweets.json":()=>t(()=>import("./sweets-0_2hbNMS.js"),[]),"/src/data/ar/phrase-clue/animals/easy.json":()=>t(()=>import("./easy-B_GJKLA_.js"),[]),"/src/data/ar/phrase-clue/animals/hard.json":()=>t(()=>import("./hard-7EfMbXs4.js"),[]),"/src/data/ar/phrase-clue/animals/medium.json":()=>t(()=>import("./medium-Bcn1oCUk.js"),[]),"/src/data/ar/phrase-clue/geography/easy.json":()=>t(()=>import("./easy-B_kcdeCx.js"),[]),"/src/data/ar/phrase-clue/geography/hard.json":()=>t(()=>import("./hard-BCuCMNGp.js"),[]),"/src/data/ar/phrase-clue/geography/medium.json":()=>t(()=>import("./medium-CkoNY3Du.js"),[]),"/src/data/ar/phrase-clue/science/easy.json":()=>t(()=>import("./easy-f07zg_lU.js"),[]),"/src/data/ar/phrase-clue/science/hard.json":()=>t(()=>import("./hard-CV32qLEY.js"),[]),"/src/data/ar/phrase-clue/science/medium.json":()=>t(()=>import("./medium-BtIrOjNp.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>t(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/formation/easy.json":()=>t(()=>import("./easy-CqPS8TrH.js"),[]),"/src/data/en/img-choice/animals/data.json":()=>t(()=>import("./data-CtXqoHRL.js"),[]),"/src/data/en/img-clue/animals/data.json":()=>t(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/img-clue/fruits-and-vegetables/data.json":()=>t(()=>import("./data-B6FoT8eG.js"),[]),"/src/data/en/img-clue/shapes/data.json":()=>t(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/easy.json":()=>t(()=>import("./easy-DqbTaQjR.js"),[]),"/src/data/en/outside-the-story/animals.json":()=>t(()=>import("./animals-D78oH89-.js"),[]),"/src/data/en/outside-the-story/anime.json":()=>t(()=>import("./anime-DXIlEidq.js"),[]),"/src/data/en/outside-the-story/cars.json":()=>t(()=>import("./cars-Cw03Nxyo.js"),[]),"/src/data/en/outside-the-story/cartoons.json":()=>t(()=>import("./cartoons-DwVIQVvA.js"),[]),"/src/data/en/outside-the-story/characters.json":()=>t(()=>import("./characters-Dl2vwTPn.js"),[]),"/src/data/en/outside-the-story/clothes.json":()=>t(()=>import("./clothes-BiLKpCWj.js"),[]),"/src/data/en/outside-the-story/drinks.json":()=>t(()=>import("./drinks-CP1Emjyy.js"),[]),"/src/data/en/outside-the-story/foods.json":()=>t(()=>import("./foods-BKBSmJG2.js"),[]),"/src/data/en/outside-the-story/football.json":()=>t(()=>import("./football-B8eU_HgW.js"),[]),"/src/data/en/outside-the-story/fruits-and-vegetables.json":()=>t(()=>import("./fruits-and-vegetables-B5narx4J.js"),[]),"/src/data/en/outside-the-story/gamers.json":()=>t(()=>import("./gamers-Dm5Tu0YA.js"),[]),"/src/data/en/outside-the-story/geography.json":()=>t(()=>import("./geography-Dw2uVeLE.js"),[]),"/src/data/en/outside-the-story/k-pop.json":()=>t(()=>import("./k-pop-BnHY6_tE.js"),[]),"/src/data/en/outside-the-story/science.json":()=>t(()=>import("./science-DF1sazzy.js"),[]),"/src/data/en/outside-the-story/series.json":()=>t(()=>import("./series-dqakDLa9.js"),[]),"/src/data/en/outside-the-story/spy.json":()=>t(()=>import("./spy-DLpfZG_H.js"),[]),"/src/data/en/outside-the-story/sweets.json":()=>t(()=>import("./sweets-DDZ5JqsI.js"),[]),"/src/data/en/phrase-clue/animals/easy.json":()=>t(()=>import("./easy-vc2CgBiI.js"),[]),"/src/data/en/phrase-clue/animals/hard.json":()=>t(()=>import("./hard-BmQiyFGH.js"),[]),"/src/data/en/phrase-clue/animals/medium.json":()=>t(()=>import("./medium-CDppU-oU.js"),[]),"/src/data/en/phrase-clue/geography/easy.json":()=>t(()=>import("./easy-v49lXgS1.js"),[]),"/src/data/en/phrase-clue/geography/hard.json":()=>t(()=>import("./hard-Hc9ZYG1D.js"),[]),"/src/data/en/phrase-clue/geography/medium.json":()=>t(()=>import("./medium-Yt4_5ZKV.js"),[]),"/src/data/en/phrase-clue/science/easy.json":()=>t(()=>import("./easy-CXDUIzZm.js"),[]),"/src/data/en/phrase-clue/science/hard.json":()=>t(()=>import("./hard-BPi6SzUA.js"),[]),"/src/data/en/phrase-clue/science/medium.json":()=>t(()=>import("./medium-Dm_81XWt.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>t(()=>import("./data-BDxquZu-.js"),[])})[n];return g?((await g()).default?.levels||[]).map(m=>this.validateLevel(m,r)).filter(m=>m!==null):[]}catch(n){return console.error(`LetterFlowGameEngine: Failed to load levels for ${u}/${r}.`,n),[this.getErrorLevel()]}}getGameId(){return"letter-flow"}getModulePath(o,u,r){return`/src/data/${o}/letter-flow/${r}.json`}validateLevel(o,u){const r=o;if(r&&typeof r=="object"&&"id"in r&&"solutionWord"in r&&"gridSize"in r&&"endpoints"in r){const{width:n,height:j}=r.gridSize,g=Array.from({length:n*j},(a,f)=>({x:f%n,y:Math.floor(f/n),letter:"",isUsed:!1})),O=r.endpoints,R=Array.from(new Set(O.map(a=>a.letter))),m=new Map;R.forEach((a,f)=>{m.set(a,ye(f,R.length,72,48))}),O.forEach(a=>{const f=a.y*n+a.x;f<g.length&&(g[f]={...a,isUsed:!1,color:m.get(a.letter)})});const L=r;return{id:String(L.id),difficulty:u??"easy",words:[L.solutionWord],board:g,solution:L.solutionWord,endpoints:L.endpoints.map(a=>({...a,color:m.get(a.letter)}))}}return null}getErrorLevel(){return{id:"error",difficulty:"easy",words:[],board:[],solution:"",endpoints:[]}}generateBoard(o,u,r,n){if(!n)return[];const j=_e(n.split("")),g=Math.ceil(Math.sqrt(j.length)),O=[];for(let R=0;R<g;R++)for(let m=0;m<g;m++){const L=R*g+m;L<j.length&&O.push({x:m,y:R,letter:j[L],isUsed:!1})}return O}}const ge=new xe,ee=24;function Ee(l,o=ee,u=68,r=48){return`hsl(${Math.round(l*360/o)%360}, ${u}%, ${r}%)`}function oe(l){if(!l)return;let o=0;const u=l.toUpperCase();for(let n=0;n<u.length;n++)o=(o<<5)-o+u.charCodeAt(n),o|=0;const r=Math.abs(o)%ee;return Ee(r,ee)}function ve(){const l=me({engine:ge,gameId:"letterFlow"}),{currentLevel:o,gameModeState:u,t:r,nextLevel:n}=l,{gameMode:j,teams:g,currentTeam:O,consumeHint:R}=u,[m,L]=A.useState([]),[a,f]=A.useState([]),[I,b]=A.useState([]),[S,k]=A.useState(null),[V,e]=A.useState(null),[i,E]=A.useState("playing");A.useEffect(()=>{o&&(L(o.board.map(s=>({...s}))),b([]),f([]),e(null),E("playing"))},[o]);const c=A.useMemo(()=>[...new Set(o?.endpoints.map(s=>s.letter)||[])],[o]),y=A.useMemo(()=>{const s=new Map;return o?.endpoints.forEach(d=>s.set(`${d.x}-${d.y}`,d.color)),s},[o]),h=A.useCallback(s=>{if(s)return oe(s)},[]),N=A.useCallback(s=>o?.endpoints.some(d=>d.x===s.x&&d.y===s.y&&d.letter===s.letter)??!1,[o]),F=A.useCallback(s=>I.filter(d=>d.cells.some(x=>s.some(D=>D.x===x.x&&D.y===x.y))),[I]),P=A.useCallback((s,d="info",x=1200)=>{k({message:s,type:d}),x>0&&setTimeout(()=>k(null),x)},[]),re=A.useCallback(s=>{if(!N(s))return;const d=I.find(x=>x.word===s.letter);d&&(b(x=>x.filter(D=>D.word!==s.letter)),L(x=>x.map(D=>d.cells.some($=>$.x===D.x&&$.y===D.y)?{...D,isUsed:!1,color:y.get(`${D.x}-${D.y}`)??void 0}:D)),P(`Removed connection for ${s.letter}`,"info",900)),e(s.letter),f([s])},[I,N,P,y]),se=A.useCallback(s=>{if(!V||a.length===0)return;const d=a[a.length-1];if(d&&d.x===s.x&&d.y===s.y)return;const x=Math.abs(s.x-d.x),D=Math.abs(s.y-d.y);if(x===1&&D===1||x>1||D>1)return;const M=a.findIndex(C=>C.x===s.x&&C.y===s.y);if(M!==-1){f(C=>C.slice(0,M+1));return}if(s.isUsed)return;const $=[...a,s];if(N(s)&&!(a.length>0&&a[0].x===s.x&&a[0].y===s.y)&&s.letter===V){const C=F($);C.length>0&&(b(w=>w.filter(T=>!C.includes(T))),L(w=>w.map(T=>C.some(q=>q.cells.some(p=>p.x===T.x&&p.y===T.y))?{...T,isUsed:!1,color:y.get(`${T.x}-${T.y}`)??void 0}:T)),P("Existing connection(s) removed by new connection","warning",1100));const K=m.find(w=>w.x===$[0].x&&w.y===$[0].y)?.color||h($[0].letter);L(w=>w.map(T=>$.some(q=>q.x===T.x&&q.y===T.y)?{...T,isUsed:!0,color:y.get(`${T.x}-${T.y}`)??K}:T));const X={word:V,cells:$.map(w=>({...w,color:K})),startIndex:0};b(w=>[...w.filter(T=>T.word!==V),X]),P(`Connected ${V}`,"success",900),e(null),f([]);const U=[...I.map(w=>w.word),V].filter(Boolean),G=Array.from(new Set(U));c.every(w=>G.includes(w))&&(P(r.congrats,"success",2e3),j==="competitive"?setTimeout(()=>n(),2e3):E("won"))}else f($)},[V,a,N,F,m,h,I,c,n,r,P,y,j]),ne=A.useCallback(()=>{if(a.length>0){const s=a[a.length-1];(!N(s)||a.length>1&&a[0].x===s.x&&a[0].y===s.y||s.letter!==V)&&(e(null),f([]),P("Path must connect two endpoints!","error",1200))}},[a,N,V,P]),ae=A.useCallback(()=>{if(!o||I.length>=o.endpoints.length/2)return;if(j==="competitive"&&!R(g[O].id)){P(r.noHintsLeft,"error",2e3);return}const s=c.filter(p=>!I.some(v=>v.word===p));if(s.length===0)return;const d=s[0],x=o.endpoints.filter(p=>p.letter===d);if(x.length<2){P(`No path found for ${d}`,"error",1600);return}const D=new Map;m.forEach(p=>D.set(`${p.x}-${p.y}`,p));const M=`${x[0].x}-${x[0].y}`,$=`${x[1].x}-${x[1].y}`,W=[M],C=new Set([M]),K=new Map([[M,null]]);let X=!1;for(;W.length>0;){const p=W.shift();if(p===$){X=!0;break}const[v,B]=p.split("-").map(Number),z=[[v+1,B],[v-1,B],[v,B+1],[v,B-1]];for(const[Y,le]of z){const H=`${Y}-${le}`,Z=D.get(H);Z&&!C.has(H)&&(!Z.letter||Z.letter===d)&&(C.add(H),K.set(H,p),W.push(H))}}if(!X){P(`No path found for ${d}`,"error",1600);return}const U=[];let G=$;for(;G;){const p=D.get(G);p&&U.unshift(p),G=K.get(G)??null}const w=F(U);w.length>0&&(b(p=>p.filter(v=>!w.includes(v))),L(p=>p.map(v=>w.some(z=>z.cells.some(Y=>Y.x===v.x&&Y.y===v.y))?{...v,isUsed:!1,color:y.get(`${v.x}-${v.y}`)??void 0}:v)));const T=h(d);L(p=>p.map(v=>U.some(z=>z.x===v.x&&z.y===v.y)?{...v,isUsed:!0,color:y.get(`${v.x}-${v.y}`)??T}:v));const Q={word:d,cells:U.map(p=>({...p,color:T})),startIndex:0};b(p=>[...p.filter(v=>v.word!==d),Q]),P(`Hint: Connected ${d}`,"info",900),c.every(p=>[...I.map(v=>v.word),d].includes(p))&&(P(r.congrats,"success",2e3),j==="competitive"?setTimeout(()=>n(),2e3):E("won"))},[o,m,I,P,r,c,y,h,F,n,R,O,g,j]),ie=A.useCallback(()=>{if(I.length===0)return;const s=I[I.length-1];b(d=>d.slice(0,-1)),L(d=>d.map(x=>s.cells.some(M=>M.x===x.x&&M.y===x.y)?{...x,isUsed:!1,color:y.get(`${x.x}-${x.y}`)??void 0}:x)),f([]),e(null),P(`Undo: Removed connection for ${s.word}`,"info"),i==="won"&&E("playing")},[I,P,y,i]),de=A.useCallback(()=>{b([]),L(s=>s.map(d=>({...d,isUsed:!1,color:y.get(`${d.x}-${d.y}`)}))),f([]),e(null),E("playing"),P("Game reset - all connections removed","info")},[P,y]);return{...l,board:m,selectedPath:a,foundWords:I,notification:S,gameState:i,activeLetter:V,handleMouseDown:re,handleMouseEnter:se,handleMouseUp:ne,clearSelection:()=>{f([]),e(null)},onHint:ae,onUndo:ie,onReset:de}}function je({letter:l,x:o,y:u,isSelected:r=!1,isFound:n=!1,isActive:j=!1,onMouseDown:g,onMouseEnter:O,onMouseUp:R,disabled:m=!1,className:L,connectionDirections:a=[],connectionColor:f,cellColor:I}){const b={x:o,y:u,letter:l},S=c=>{m||!g||(c.target.setPointerCapture(c.pointerId),g(b))},k=c=>{if(c.buttons!==1||m||!O)return;const h=document.elementFromPoint(c.clientX,c.clientY)?.closest("[data-cell-x]");if(h){const N=parseInt(h.dataset.cellX||"0",10),F=parseInt(h.dataset.cellY||"0",10),P=h.querySelector(".cell-letter");O({x:N,y:F,letter:P?.textContent?.trim()||""})}},V=c=>{m||!R||(c.target.releasePointerCapture(c.pointerId),R())},e=c=>{m||!g||(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),g(b))},i=56,E=f??I??void 0;return _.jsxs("div",{role:"button",tabIndex:m?-1:0,"aria-disabled":m,"aria-pressed":r||void 0,"data-cell-x":o,"data-cell-y":u,onPointerDown:S,onPointerMove:k,onPointerUp:V,onPointerCancel:V,onKeyDown:e,className:J("aspect-square flex items-center justify-center rounded-md text-xl font-bold select-none relative transition-all duration-150 touch-none",{"bg-gray-50 dark:bg-gray-800":!r&&!n&&!j,"cursor-pointer":!m,"cursor-not-allowed opacity-70":m,"text-gray-900 dark:text-gray-100":!r&&!n&&!j&&!E},L),children:[a.includes("top")&&_.jsx("div",{"aria-hidden":!0,className:"absolute top-0 left-1/2 transform -translate-x-1/2",style:{width:`${Math.max(6,i*.1)}%`,height:"50%",background:f,zIndex:0}}),a.includes("bottom")&&_.jsx("div",{"aria-hidden":!0,className:"absolute bottom-0 left-1/2 transform -translate-x-1/2",style:{width:`${Math.max(6,i*.1)}%`,height:"50%",background:f,zIndex:0}}),a.includes("left")&&_.jsx("div",{"aria-hidden":!0,className:"absolute left-0 top-1/2 transform -translate-y-1/2",style:{height:`${Math.max(6,i*.1)}%`,width:"50%",background:f,zIndex:0}}),a.includes("right")&&_.jsx("div",{"aria-hidden":!0,className:"absolute right-0 top-1/2 transform -translate-y-1/2",style:{height:`${Math.max(6,i*.1)}%`,width:"50%",background:f,zIndex:0}}),_.jsx("div",{className:"flex items-center justify-center rounded-full z-10 pointer-events-none",style:{width:`${i}%`,height:`${i}%`,background:E??"#ffffff",boxShadow:E?"0 2px 8px rgba(0,0,0,0.12)":void 0,border:E?"none":"1px solid rgba(0,0,0,0.06)"},children:l?_.jsx("span",{className:"text-sm font-bold cell-letter",style:{color:E?"#fff":"#111"},children:l}):null})]})}function te(l){return oe(l)}function Le({cells:l,selectedPath:o,foundWords:u,activeLetter:r,onMouseDown:n,onMouseEnter:j,onMouseUp:g,className:O,dir:R="ltr"}){const m=l.length===0?0:Math.max(...l.map(e=>e.x))+1,L=R==="rtl",a=e=>`${e.x}-${e.y}`,f=new Map;o.forEach(e=>f.set(a(e),e));const I=new Map;u.forEach(e=>e.cells.forEach(i=>I.set(a(i),{word:e.word,cells:e.cells})));const b=e=>{const i=[],E=[...u.map(c=>c.cells),o];for(const c of E){const y=c.findIndex(h=>h.x===e.x&&h.y===e.y);if(y!==-1){if(y>0){const h=c[y-1];h.x===e.x-1&&h.y===e.y&&i.push("left"),h.x===e.x+1&&h.y===e.y&&i.push("right"),h.x===e.x&&h.y===e.y-1&&i.push("top"),h.x===e.x&&h.y===e.y+1&&i.push("bottom")}if(y<c.length-1){const h=c[y+1];h.x===e.x-1&&h.y===e.y&&i.push("left"),h.x===e.x+1&&h.y===e.y&&i.push("right"),h.x===e.x&&h.y===e.y-1&&i.push("top"),h.x===e.x&&h.y===e.y+1&&i.push("bottom")}}}return[...new Set(i)]},S=e=>{for(const i of u)if(i.cells.some(E=>E.x===e.x&&E.y===e.y)){const E=i.cells[0]?.color??i.cells.find(y=>y.color)?.color;if(E)return E;const c=l.find(y=>y.x===i.cells[0].x&&y.y===i.cells[0].y);return c?.color?c.color:te(i.word)}if(o&&o.length>0&&o.some(i=>i.x===e.x&&i.y===e.y)){const i=o[0];if(i?.color)return i.color;const E=l.find(c=>c.x===i.x&&c.y===i.y);return E?.color?E.color:te(i?.letter)}if(e.color)return e.color},k=e=>f.has(a(e)),V=e=>I.has(a(e));return _.jsx("div",{className:J("grid gap-1 mx-auto max-w-md",O,{"rtl-direction":L}),style:{gridTemplateColumns:`repeat(${m}, minmax(0, 1fr))`,direction:L?"rtl":"ltr",touchAction:"none"},children:l.map(e=>{const i=b(e),E=S(e),c=V(e)||e.letter!==""&&e.letter!==r&&e.isUsed;return _.jsx(je,{letter:e.letter,x:e.x,y:e.y,isSelected:k(e),isFound:V(e),isActive:r&&e.letter===r?!0:void 0,onMouseDown:n,onMouseEnter:j,onMouseUp:g,disabled:c,connectionDirections:i,connectionColor:E,cellColor:e.color},`${e.x}-${e.y}`)})})}function Ie({foundWords:l,t:o,className:u}){return l.length===0?null:_.jsxs("div",{className:J("mt-6",u),children:[_.jsxs("div",{className:"text-lg font-semibold mb-2",children:[o.selected,":"]}),_.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((r,n)=>_.jsx("div",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-md",children:r.word},n))})]})}function Pe({foundWords:l,totalWords:o,t:u,className:r}){const n=l.length/o;return _.jsxs("div",{className:J("mt-6 text-center",r),children:[_.jsxs("div",{className:"text-gray-600",children:[u.selected," ",l.length," ",u.of," ",o]}),_.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-2",children:_.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${n*100}%`}})})]})}function we(){A.useEffect(()=>{const l=EventTarget.prototype.addEventListener;return EventTarget.prototype.addEventListener=function(o,u,r){if((o==="touchmove"||o==="touchstart"||o==="touchend")&&typeof r=="object"&&r&&!("passive"in r)){const n={...r,passive:!1};return l.call(this,o,u,n)}return l.call(this,o,u,r)},()=>{EventTarget.prototype.addEventListener=l}},[])}const Te=({notification:l,boardContent:o,foundWordsContent:u,progressContent:r,gameControlsContent:n,...j})=>{const g=l?.message??null,O=l?.type??"info";return _.jsxs(he,{...j,children:[g&&_.jsx(fe,{message:g,type:O}),_.jsxs("div",{className:"flex flex-col items-center gap-4",children:[_.jsx("div",{className:"w-full touch-none transition-colors duration-300",children:o}),u,_.jsx("div",{className:"w-full max-w-md",children:n}),r]})]})},$e=()=>{we();const{loading:l,currentLevel:o,board:u,selectedPath:r,foundWords:n,notification:j,gameState:g,activeLetter:O,handleBack:R,handleMouseDown:m,handleMouseEnter:L,handleMouseUp:a,onHint:f,onUndo:I,onReset:b,clearSelection:S,currentLevelIndex:k,nextLevel:V,t:e,instructions:i,gameModeState:E}=ve();if(l)return _.jsx("div",{className:"flex justify-center items-center h-screen",children:_.jsxs("p",{children:[e.loading,"..."]})});if(!o)return _.jsxs("div",{className:"flex flex-col items-center justify-center h-screen gap-4 p-4 text-center",children:[_.jsx("p",{className:"text-xl font-semibold",children:e.noLevelsFound}),_.jsx(ce,{onClick:R,children:e.back})]});const c=Math.floor((o?.endpoints.length??0)/2);return _.jsx(Te,{title:e.letterFlowTitle??o.id,levelIndex:k??0,onBack:R,difficulty:o.difficulty,instructions:i,notification:j,boardContent:_.jsx(Le,{cells:u,selectedPath:r,foundWords:n,activeLetter:O,onMouseDown:y=>m({...y,isUsed:!1}),onMouseEnter:y=>L({...y,isUsed:!1}),onMouseUp:a}),foundWordsContent:n.length>0?_.jsx(Ie,{foundWords:n,t:{selected:e.selected}}):null,gameControlsContent:_.jsx(pe,{onReset:b,onRemoveLetter:I,onClearAnswer:S,onHint:f,onNextLevel:V,canRemove:n.length>0,canClear:r.length>0,canCheck:!1,canNext:g==="won",canHint:n.length<c,gameState:g,gameMode:E.gameMode,isKidsMode:!1,labels:{remove:e.undo,clear:e.clear,check:e.check,hint:e.hint,showSolution:e.showSolution,reset:e.reset,prev:e.prev,next:e.next},showOnly:["remove","hint","reset","next"]}),progressContent:_.jsx(Pe,{foundWords:n,totalWords:c,t:{selected:e.selected,of:e.of}})})};export{$e as default};
