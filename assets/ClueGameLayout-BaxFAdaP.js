import{j as g,c as L,d as $,r as l}from"./index-B7P5vAGY.js";import{B as H,g as D,G as P}from"./GameLayout-DG0rwQPu.js";import{N as O}from"./Notification-b6MG98Wk.js";const V=$("border-2 rounded-lg flex items-center justify-center font-bold",{variants:{size:{computer:"w-12 h-12 text-lg",tablet:"w-10 h-10 text-md",mobile:"w-8 h-8 text-sm"},filled:{true:"bg-primary border-primary text-primary-foreground",false:"bg-card"}},defaultVariants:{size:"mobile",filled:!1}});function K({char:n="",filled:m,size:r,className:e}){return g.jsx("div",{className:L(V({size:r,filled:m}),e),children:n})}function U({solution:n,currentWord:m,className:r}){const e=[...n],d=[...m],[o,t]=l.useState("mobile");return l.useEffect(()=>{const i=()=>{const a=window.innerWidth;a>=1024?t("computer"):a>=768?t("tablet"):t("mobile")};return i(),window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),g.jsx("div",{className:L("flex flex-wrap justify-center gap-2",r),children:e.map((i,a)=>g.jsx(K,{char:d[a]||"",filled:!!d[a],size:o},a))})}function q({letter:n,isSelected:m=!1,isHint:r=!1,disabled:e=!1,onClick:d,className:o,deviceType:t="mobile"}){return g.jsxs("button",{onClick:d,disabled:e||r,className:L("rounded-lg border-2 font-bold transition-all duration-300 relative","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","shadow-card",{"bg-green-100 border-green-500 text-green-800 cursor-default":r,"bg-primary border-primary text-primary-foreground":m&&!r,"bg-card border-border text-card-foreground hover:border-primary/30":!m&&!r,"opacity-80":e},o),style:{width:t==="computer"?"min(8vw, 56px)":t==="tablet"?"min(10vw, 56px)":"min(9vw, 48px)",height:t==="computer"?"min(8vw, 56px)":t==="tablet"?"min(10vw, 56px)":"min(9vw, 48px)",fontSize:t==="computer"?"min(3vw, 18px)":t==="tablet"?"min(4vw, 18px)":"min(4.2vw, 15px)"},children:[n,r&&g.jsx("span",{className:"absolute -top-1 -right-1 text-xs",children:"ðŸ”’"})]})}function X({letters:n,selectedIndices:m,onLetterClick:r,disabled:e=!1,hintIndices:d,className:o}){const t=n,i=s=>s,[a,h]=l.useState("mobile");l.useEffect(()=>{const s=()=>{const y=window.innerWidth;y>=1024?h("computer"):y>=768?h("tablet"):h("mobile")};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const p=()=>{const s=t.length;return a==="computer"?s<=12?6:s<=18?9:12:a==="tablet"?s<=12||s<=18?6:8:s<=12?4:(s<=18,6)},u=(s,y)=>g.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:s.map((S,b)=>{const x=i(y+b),E=m.includes(x),T=d.includes(x);return g.jsx(q,{letter:S,isSelected:E,isHint:T,disabled:e,onClick:()=>r(x),deviceType:a},x)})}),c=p(),f=[];for(let s=0;s<t.length;s+=c)f.push(t.slice(s,s+c));return g.jsx("div",{className:L("space-y-4",o),children:f.map((s,y)=>g.jsx("div",{children:u(s,y*c)},y))})}const j=n=>n.toLowerCase().trim();function Y(n,m={}){const{getPoints:r=()=>1}=m,{gameState:e,currentLevel:d,solution:o,dispatch:t,setNotification:i,nextLevel:a,gameModeState:h,t:p}=n,{gameMode:u,teams:c,currentTeam:f,setCurrentTeam:s,updateScore:y,nextTurn:S,consumeHint:b}=h,[x,E]=l.useState([]),[T,A]=l.useState(new Set);l.useEffect(()=>{u==="competitive"&&c.length>0&&s(n.currentLevelIndex%c.length)},[n.currentLevelIndex,u,c.length,s]),l.useEffect(()=>{E([]),A(new Set)},[n.currentLevelIndex]);const M=l.useCallback(()=>{if(e.gameState!=="playing"||!d)return;if(j(e.answerSlots.join(""))===j(o))if(t({type:"SET_GAME_STATE",payload:"won"}),u==="competitive"){const v=r(d);y(c[f].id,v),i({message:`${p.congrats} +${v}`,type:"success"}),setTimeout(()=>a(),2e3)}else i({message:p.congrats,type:"success"});else{t({type:"SET_GAME_STATE",payload:"failed"});const v=e.answerSlots.join("");if(v&&!x.includes(v)&&E(C=>[...C,v]),i({message:p.wrongAnswer,type:"error"}),u==="competitive"){const C=new Set(T).add(f);A(C),C.size>=c.length?(S("lose"),setTimeout(()=>{t({type:"SHOW",solution:o,letters:e.letters}),i({message:`${p.solutionWas}: ${o}`,type:"error"}),setTimeout(()=>a(),2500)},2e3)):(S("lose"),setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"})},2e3))}else setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"})},2e3)}},[e,d,o,u,c,f,r,x,y,i,S,a,t,p,T]),k=l.useCallback(w=>{e.gameState==="playing"&&t({type:"PLACE",gridIndex:w,letter:e.letters[w]})},[e,t]),G=l.useCallback(()=>t({type:"REMOVE_LAST"}),[t]),_=l.useCallback(()=>t({type:"CLEAR"}),[t]),R=l.useCallback(()=>{e.gameState==="playing"&&(t({type:"SHOW",solution:o,letters:e.letters}),i({message:`${p.solutionWas}: ${o}`,type:"error"}),u==="competitive"?(S("lose"),setTimeout(()=>a(),2500)):t({type:"SET_GAME_STATE",payload:"won"}))},[t,o,e,u,S,a,i,p.solutionWas]),z=l.useCallback(()=>{if(e.gameState==="playing"){if(u==="competitive"&&!b(c[f].id)){i({message:p.noHintsLeft,type:"error"});return}t({type:"HINT",solution:o,letters:e.letters})}},[t,o,e,u,b,c,f,i,p.noHintsLeft]),I=l.useMemo(()=>e.gameState==="playing"&&e.slotIndices.some(w=>w!==null&&!e.hintIndices.includes(w)),[e]),N=l.useMemo(()=>e.gameState==="playing"&&e.slotIndices.filter(w=>w!==null).length>e.hintIndices.length,[e]),W=l.useMemo(()=>e.gameState==="playing"&&e.answerSlots.every(w=>w!==""),[e]),B=l.useMemo(()=>e.gameState!=="playing"?!1:u!=="competitive"||(c[f]?.hintsRemaining??0)>0,[e.gameState,u,c,f]);return{...n,wrongAnswers:x,onLetterClick:k,onRemove:G,onClear:_,onCheck:M,onShow:R,onHint:z,canRemove:I,canClear:N,canCheck:W,canHint:B,gameMode:u}}class Z extends H{generateLetters(m,r,e){return D(m,r,e,this.isKidsMode())}}const ee=({title:n,levelIndex:m,onBack:r,difficulty:e,instructions:d,notification:o,layoutType:t,promptContent:i,solutionContent:a,letterOptionsContent:h,gameControlsContent:p,wrongAnswersContent:u})=>{const c=o?.message??null,f=o?.type??"info";return g.jsxs(P,{title:n,levelIndex:m,onBack:r,difficulty:e,instructions:d,layoutType:t,children:[c&&g.jsx(O,{message:c,type:f}),i,a,h,u,p]})};export{Z as C,X as L,U as S,ee as a,Y as u};
