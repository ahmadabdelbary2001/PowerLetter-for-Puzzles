import{h as S,u as k,b as A,r,j as l}from"./index-B4fPtU2R.js";import{a as C,N as G}from"./Notification-7_OZ9wn8.js";import{s as L,B as O,G as R}from"./GameLayout-D84wNv_h.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],P=S("circle-x",T);function B(u){const a=k(),{language:e,categories:n,gameMode:c,gameType:o}=A(),{loading:f,currentLevel:s,nextLevel:p}=C(u,{language:e,categories:n}),[x,v]=r.useState([]),[j,y]=r.useState(null),[h,d]=r.useState("idle"),g=r.useRef(null),m=r.useRef(null),w=t=>`${"/PowerLetter-for-Puzzles".replace(/\/$/,"")}/${t.replace(/^\//,"")}`,b=r.useCallback(()=>{const t=g.current;if(t)try{t.currentTime=0,t.play().catch(i=>console.error("Audio play failed:",i))}catch(i){console.error("Audio control failed:",i)}},[]),E=r.useCallback(t=>{!s||h==="correct"||(y(t),t===s.solution?d("correct"):(d("incorrect"),m.current=window.setTimeout(()=>d("idle"),1200)))},[h,s]),N=r.useCallback(()=>{a(c==="competitive"?`/team-config/${o}`:"/games")},[a,c,o]);return r.useEffect(()=>{s&&(v(L([...s.options])),d("idle"),y(null))},[s]),r.useEffect(()=>{const t=g.current;return()=>{if(m.current&&(clearTimeout(m.current),m.current=null),t)try{t.pause(),t.currentTime=0}catch(i){console.error("Failed to pause/reset audio during cleanup",i)}}},[s]),{loading:f,currentLevel:s,shuffledOptions:x,answerStatus:h,selectedOption:j,audioRef:g,getAssetPath:w,playSound:b,handleOptionClick:E,nextLevel:p,handleBack:N}}class I extends O{getModulePath(a,e){return`/src/data/${a}/${this.getGameId()}/${e}/data.json`}validateLevel(a){const e=a;if(e&&typeof e=="object"&&"id"in e&&"solution"in e&&"options"in e&&Array.isArray(e.options)){const n=e.options,c=e.solution,o=new Set(n);return o.add(c),e.options=Array.from(o),e}return null}getErrorLevel(){return{id:"error-level",solution:"ERROR",options:["Error"]}}}const U=({title:u,levelIndex:a,onBack:e,notificationMessage:n,notificationType:c,promptContent:o,optionsContent:f,nextButtonContent:s,instructions:p})=>l.jsx(R,{title:u,levelIndex:a,onBack:e,layoutType:"image",instructions:p,children:l.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full p-4",children:[n&&l.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-50",children:l.jsx(G,{message:n,type:c,duration:1200})}),l.jsx("div",{className:"w-full max-w-md mb-8",children:o}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 w-full max-w-4xl",children:f}),s&&l.jsx("div",{className:"mt-8 w-full max-w-md",children:s})]})});export{I as C,U as M,P as a,B as u};
