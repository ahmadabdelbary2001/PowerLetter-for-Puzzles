import{_ as e,u as z,a as W,b as N,c as G,r as d,j as s,B as k,A as M,e as H,d as B}from"./index-CuxIdgLY.js";import{u as F,a as K,W as U,L as q,S as J}from"./WordPuzzleLayout-CnSeRhEA.js";import{G as Q}from"./GameControls-C0nlcy6b.js";import{s as X,g as Y,u as Z}from"./Notification-DIXhH6dE.js";import{V as ee}from"./volume-2-BeDc0RyA.js";import"./GameLayout-BuT4ONa9.js";import"./GameButton-C4WnsYuv.js";import"./circle-check-big-CgDWkYqt.js";class te{async loadLevels(m){const{language:p,categories:_}=m,r=["animals","fruits-and-vegetables","shapes"],n=(_.includes("general")?r:_).map(async u=>{try{const l=`/src/data/${p}/image-clue/${u}/data.json`,t=Object.assign({"/src/data/ar/clue/animals/easy.json":()=>e(()=>import("./easy-B_GJKLA_.js"),[]),"/src/data/ar/clue/animals/hard.json":()=>e(()=>import("./hard-7EfMbXs4.js"),[]),"/src/data/ar/clue/animals/medium.json":()=>e(()=>import("./medium-Bcn1oCUk.js"),[]),"/src/data/ar/clue/geography/easy.json":()=>e(()=>import("./easy-B_kcdeCx.js"),[]),"/src/data/ar/clue/geography/hard.json":()=>e(()=>import("./hard-BCuCMNGp.js"),[]),"/src/data/ar/clue/geography/medium.json":()=>e(()=>import("./medium-CkoNY3Du.js"),[]),"/src/data/ar/clue/science/easy.json":()=>e(()=>import("./easy-f07zg_lU.js"),[]),"/src/data/ar/clue/science/hard.json":()=>e(()=>import("./hard-CV32qLEY.js"),[]),"/src/data/ar/clue/science/medium.json":()=>e(()=>import("./medium-BtIrOjNp.js"),[]),"/src/data/ar/formation/easy.json":()=>e(()=>import("./easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/hard.json":()=>e(()=>import("./hard-DzMXngiv.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits-and-vegetables/data.json":()=>e(()=>import("./data-DlhJ3pZw.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/easy.json":()=>e(()=>import("./easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/medium.json":()=>e(()=>import("./medium-DnN41iEv.js"),[]),"/src/data/ar/outside-the-story/animals.json":()=>e(()=>import("./animals-BD_uC3F6.js"),[]),"/src/data/ar/outside-the-story/anime.json":()=>e(()=>import("./anime-X9XTb-jh.js"),[]),"/src/data/ar/outside-the-story/cars.json":()=>e(()=>import("./cars-LFoQ5kcr.js"),[]),"/src/data/ar/outside-the-story/cartoons.json":()=>e(()=>import("./cartoons-9ln4fVtF.js"),[]),"/src/data/ar/outside-the-story/characters.json":()=>e(()=>import("./characters-BClrgWDD.js"),[]),"/src/data/ar/outside-the-story/clothes.json":()=>e(()=>import("./clothes-DZukcyjc.js"),[]),"/src/data/ar/outside-the-story/drinks.json":()=>e(()=>import("./drinks-DWTisQdZ.js"),[]),"/src/data/ar/outside-the-story/foods.json":()=>e(()=>import("./foods-BPEl4jwc.js"),[]),"/src/data/ar/outside-the-story/football.json":()=>e(()=>import("./football-BkDTW0je.js"),[]),"/src/data/ar/outside-the-story/fruits-and-vegetables.json":()=>e(()=>import("./fruits-and-vegetables-CWZ59ral.js"),[]),"/src/data/ar/outside-the-story/gamers.json":()=>e(()=>import("./gamers-DU27ka0Y.js"),[]),"/src/data/ar/outside-the-story/geography.json":()=>e(()=>import("./geography-Bmt1Mp9F.js"),[]),"/src/data/ar/outside-the-story/k-pop.json":()=>e(()=>import("./k-pop-CvncURYW.js"),[]),"/src/data/ar/outside-the-story/science.json":()=>e(()=>import("./science-C1rxd0mO.js"),[]),"/src/data/ar/outside-the-story/series.json":()=>e(()=>import("./series-DgCSJJru.js"),[]),"/src/data/ar/outside-the-story/spy.json":()=>e(()=>import("./spy-CTUdze8o.js"),[]),"/src/data/ar/outside-the-story/sweets.json":()=>e(()=>import("./sweets-0_2hbNMS.js"),[]),"/src/data/ar/picture-choice/animals/data.json":()=>e(()=>import("./data-6hZ_2-dK.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/clue/animals/easy.json":()=>e(()=>import("./easy-vc2CgBiI.js"),[]),"/src/data/en/clue/animals/hard.json":()=>e(()=>import("./hard-BmQiyFGH.js"),[]),"/src/data/en/clue/animals/medium.json":()=>e(()=>import("./medium-CDppU-oU.js"),[]),"/src/data/en/clue/geography/easy.json":()=>e(()=>import("./easy-v49lXgS1.js"),[]),"/src/data/en/clue/geography/hard.json":()=>e(()=>import("./hard-Hc9ZYG1D.js"),[]),"/src/data/en/clue/geography/medium.json":()=>e(()=>import("./medium-Yt4_5ZKV.js"),[]),"/src/data/en/clue/science/easy.json":()=>e(()=>import("./easy-CXDUIzZm.js"),[]),"/src/data/en/clue/science/hard.json":()=>e(()=>import("./hard-BPi6SzUA.js"),[]),"/src/data/en/clue/science/medium.json":()=>e(()=>import("./medium-Dm_81XWt.js"),[]),"/src/data/en/formation/easy.json":()=>e(()=>import("./easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits-and-vegetables/data.json":()=>e(()=>import("./data-B6FoT8eG.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/easy.json":()=>e(()=>import("./easy-DqbTaQjR.js"),[]),"/src/data/en/outside-the-story/animals.json":()=>e(()=>import("./animals-D78oH89-.js"),[]),"/src/data/en/outside-the-story/anime.json":()=>e(()=>import("./anime-DXIlEidq.js"),[]),"/src/data/en/outside-the-story/cars.json":()=>e(()=>import("./cars-Cw03Nxyo.js"),[]),"/src/data/en/outside-the-story/cartoons.json":()=>e(()=>import("./cartoons-DwVIQVvA.js"),[]),"/src/data/en/outside-the-story/characters.json":()=>e(()=>import("./characters-Dl2vwTPn.js"),[]),"/src/data/en/outside-the-story/clothes.json":()=>e(()=>import("./clothes-BiLKpCWj.js"),[]),"/src/data/en/outside-the-story/drinks.json":()=>e(()=>import("./drinks-CP1Emjyy.js"),[]),"/src/data/en/outside-the-story/foods.json":()=>e(()=>import("./foods-BKBSmJG2.js"),[]),"/src/data/en/outside-the-story/football.json":()=>e(()=>import("./football-B8eU_HgW.js"),[]),"/src/data/en/outside-the-story/fruits-and-vegetables.json":()=>e(()=>import("./fruits-and-vegetables-B5narx4J.js"),[]),"/src/data/en/outside-the-story/gamers.json":()=>e(()=>import("./gamers-Dm5Tu0YA.js"),[]),"/src/data/en/outside-the-story/geography.json":()=>e(()=>import("./geography-Dw2uVeLE.js"),[]),"/src/data/en/outside-the-story/k-pop.json":()=>e(()=>import("./k-pop-BnHY6_tE.js"),[]),"/src/data/en/outside-the-story/science.json":()=>e(()=>import("./science-DF1sazzy.js"),[]),"/src/data/en/outside-the-story/series.json":()=>e(()=>import("./series-dqakDLa9.js"),[]),"/src/data/en/outside-the-story/spy.json":()=>e(()=>import("./spy-DLpfZG_H.js"),[]),"/src/data/en/outside-the-story/sweets.json":()=>e(()=>import("./sweets-DDZ5JqsI.js"),[]),"/src/data/en/picture-choice/animals/data.json":()=>e(()=>import("./data-CtXqoHRL.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])})[l];return t?((await t()).default?.levels||[]).map(a=>typeof a=="object"&&a!==null&&"id"in a&&"image"in a&&"sound"in a&&"solution"in a?{id:String(a.id),image:String(a.image),sound:String(a.sound),solution:String(a.solution)}:null).filter(a=>a!==null):(console.warn(`Module not found for path: ${l}`),[])}catch(l){return console.error(`ImgClueGameEngine: Failed to load levels for ${p}/${u}.`,l),[]}}),E=(await Promise.all(n)).flat();return E.length===0?[{id:"error-level",image:"/assets/images/error.png",sound:"",solution:"ERROR"}]:X(E)}generateLetters(m,p,_){return Y(m,p,_,!0)}}const se=new te;function oe(){const o=z(),m=W(),{language:p,categories:_,gameMode:r,updateScore:L,teams:n,currentTeam:c,setCurrentTeam:E,nextTurn:u,consumeHint:l}=N(),{t:i}=G(),t=F({engine:se,language:p,categories:_,difficulty:"easy"}),[g,T]=d.useState([]),[a,h]=d.useState(new Set),{canRemove:I,canClear:P,canCheck:O,canHint:D}=K(t.gameState),A=d.useRef(null),f=j=>{const v=String("/PowerLetter-for-Puzzles/").replace(/\/+$/,""),C=j.replace(/^\/+/,"");return`${v}/${C}`},V=d.useCallback(()=>{A.current?.play().catch(j=>console.error("Audio play failed:",j))},[]);d.useEffect(()=>{r==="competitive"&&n.length>0&&E(t.currentLevelIndex%n.length)},[t.currentLevelIndex,r,n.length,E]);const R=d.useCallback(()=>{if(t.gameState.gameState!=="playing")return;if(t.gameState.answerSlots.join("").toLowerCase()===t.solution.toLowerCase())t.dispatch({type:"SET_GAME_STATE",payload:"won"}),r==="competitive"?(L(n[c].id,1),t.setNotification({message:`${i.congrats} +1`,type:"success"}),setTimeout(()=>{t.nextLevel(),h(new Set)},1500)):t.setNotification({message:i.congrats,type:"success"});else{t.dispatch({type:"SET_GAME_STATE",payload:"failed"});const y=t.gameState.answerSlots.join("");if(y&&!g.includes(y)&&T(v=>[...v,y]),t.setNotification({message:i.wrongAnswer,type:"error"}),r==="competitive"){const v=new Set(a).add(c);h(v),v.size>=n.length?setTimeout(()=>{t.dispatch({type:"SHOW",solution:t.solution,letters:t.letters}),t.setNotification({message:`${i.solutionWas}: ${t.solution}`,type:"error"}),setTimeout(()=>{t.nextLevel(),h(new Set)},2500)},2e3):setTimeout(()=>{t.dispatch({type:"CLEAR"}),t.dispatch({type:"SET_GAME_STATE",payload:"playing"}),u("lose")},2e3)}else setTimeout(()=>{t.dispatch({type:"CLEAR"}),t.dispatch({type:"SET_GAME_STATE",payload:"playing"})},2e3)}},[t,r,n,c,L,u,i,g,a]),x=d.useCallback(()=>{t.gameState.gameState==="playing"&&(t.dispatch({type:"SHOW",solution:t.solution,letters:t.letters}),t.setNotification({message:`${i.solutionWas}: ${t.solution}`,type:"error"}),r==="competitive"&&(u("lose"),setTimeout(()=>{t.nextLevel(),h(new Set)},2500)))},[t,r,i.solutionWas,u]),w=d.useCallback(()=>{if(r==="competitive"&&!l(n[c].id)){t.setNotification({message:i.noHintsLeft,type:"error"});return}t.dispatch({type:"HINT",solution:t.solution,letters:t.letters})},[t,r,n,c,l,i.noHintsLeft]),S=d.useCallback(()=>{o(r==="competitive"?`/team-config/${m.gameType}`:"/games")},[o,m.gameType,r]);return d.useEffect(()=>{T([])},[t.currentLevelIndex]),{...t,wrongAnswers:g,onCheck:R,onShow:x,onHint:w,handleBack:S,canRemove:I,canClear:P,canCheck:O,canHint:D,audioRef:A,getAssetPath:f,playSound:V}}const le=()=>{const{t:o,i18n:m}=G(),p=m.dir(),_=Z("imageClue"),r=_?{title:_.title,description:_.description??"",steps:_.steps??[]}:void 0,{gameMode:L}=N(),{loading:n,currentLevel:c,solution:E,letters:u,notification:l,wrongAnswers:i,gameState:t,currentLevelIndex:g,levels:T,audioRef:a,getAssetPath:h,playSound:I,onCheck:P,onLetterClick:O,onRemove:D,onClear:A,nextLevel:f,prevLevel:V,handleBack:R,resetLevel:x,canRemove:w,canClear:S,canCheck:j}=oe();if(n)return s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsxs("p",{children:[o.loading,"..."]})});if(!c||c.solution==="ERROR")return s.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[s.jsx("p",{className:"text-xl font-semibold",children:o.noLevelsFound}),s.jsx(k,{onClick:R,children:o.back})]});const{answerSlots:y,slotIndices:v,hintIndices:C}=t;return s.jsx(U,{title:o.imageClueTitle,levelIndex:g,onBack:R,instructions:r,notification:l,layoutType:"image",promptContent:s.jsxs("div",{className:"relative aspect-video bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:[s.jsx("img",{src:h(c.image),alt:E,className:"max-h-full max-w-full object-contain"}),s.jsx(k,{size:"icon",onClick:I,className:"absolute top-3 right-3 rounded-full bg-black/50 hover:bg-black/70",children:s.jsx(ee,{className:"h-6 w-6 text-white"})}),s.jsx("audio",{ref:a,src:h(c.sound),preload:"auto"})]}),solutionContent:s.jsx(J,{solution:E,currentWord:y.join("")}),letterOptionsContent:s.jsx(q,{letters:u,selectedIndices:v.filter(b=>b!==null),onLetterClick:O,disabled:t.gameState!=="playing",hintIndices:C}),wrongAnswersContent:i.length>0&&s.jsxs("div",{className:"mt-2",children:[s.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[o.wrongAttempts,":"]}),s.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:i.map((b,$)=>s.jsx(B,{variant:"destructive",children:b},$))})]}),gameControlsContent:t.gameState==="won"&&L!=="competitive"?s.jsxs(k,{onClick:f,className:"w-full bg-green-600 hover:bg-green-700 text-lg py-6",children:[o.next," ",p==="rtl"?s.jsx(M,{className:"ml-2"}):s.jsx(H,{className:"ml-2"})]}):s.jsx(Q,{onRemoveLetter:D,onClearAnswer:A,onCheckAnswer:P,onReset:x,onPrevLevel:V,onNextLevel:f,canRemove:w,canClear:S,canCheck:j,canPrev:g>0,canNext:g<T.length-1,gameState:t.gameState,gameMode:L,isKidsMode:!0,labels:{remove:o.remove,clear:o.clear,check:o.check,hint:o.hint,showSolution:o.showSolution,reset:o.reset,prev:o.prev,next:o.next}})})};export{le as default};
