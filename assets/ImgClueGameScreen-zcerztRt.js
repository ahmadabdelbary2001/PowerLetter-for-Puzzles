import{r as f,u as z,j as e,B as m,A as O,b as T,a as $}from"./index-CjyIWeEv.js";import{C as K,u as V,a as D,L as F,S as W}from"./ClueGameLayout-B1yqTtjX.js";import{G as q}from"./GameControls-iQAmvLry.js";import{u as H}from"./useGameController-uUQ6w7IN.js";import{u as J}from"./Notification-BQeTBVRQ.js";import{V as Q}from"./volume-2-CYh-GS9S.js";import"./GameLayout-B--m7vcf.js";import"./GameButton-DtzXWULg.js";import"./circle-check-big-DcPuji49.js";class U extends K{getGameId(){return"img-clue"}getModulePath(n,s){return`/src/data/${n}/img-clue/${s}/data.json`}validateLevel(n){const s=n;return s&&typeof s=="object"&&"id"in s&&"image"in s&&"sound"in s&&"solution"in s?{id:String(s.id),image:String(s.image),sound:String(s.sound),solution:String(s.solution)}:null}getErrorLevel(){return{id:"error-level",image:"/assets/images/error.png",sound:"",solution:"ERROR"}}isKidsMode(){return!0}}const X=new U;function Y(){const t=H({engine:X}),n=V(t),s=f.useRef(null),r=i=>`/${i.replace(/^\//,"")}`,l=f.useCallback(()=>{s.current?.play().catch(console.error)},[]);return{...n,audioRef:s,getAssetPath:r,playSound:l}}const le=()=>{const{t,i18n:n}=z(),s=n.dir(),r=J("imageClue"),l=r?{title:r.title,description:r.description??"",steps:r.steps??[]}:void 0,{loading:i,currentLevel:a,solution:d,notification:j,wrongAnswers:g,gameState:o,currentLevelIndex:c,levels:C,audioRef:w,getAssetPath:x,playSound:b,onCheck:S,onLetterClick:k,onRemove:L,onClear:y,nextLevel:p,prevLevel:N,handleBack:h,resetLevel:R,canRemove:G,canClear:A,canCheck:I,gameMode:v}=Y();if(i)return e.jsx("div",{className:"flex justify-center items-center h-screen",children:e.jsxs("p",{children:[t.loading,"..."]})});if(!a||a.solution==="ERROR")return e.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[e.jsx("p",{className:"text-xl font-semibold",children:t.noLevelsFound}),e.jsx(m,{onClick:h,children:t.back})]});const{answerSlots:E,slotIndices:B,hintIndices:P}=o;return e.jsx(D,{title:t.imageClueTitle,levelIndex:c,onBack:h,instructions:l,notification:j,layoutType:"image",promptContent:e.jsxs("div",{className:"relative aspect-video bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:[e.jsx("img",{src:x(a.image),alt:d,className:"max-h-full max-w-full object-contain"}),e.jsx(m,{size:"icon",onClick:b,className:"absolute top-3 right-3 rounded-full bg-black/50 hover:bg-black/70",children:e.jsx(Q,{className:"h-6 w-6 text-white"})}),e.jsx("audio",{ref:w,src:x(a.sound),preload:"auto"})]}),solutionContent:e.jsx(W,{solution:d,currentWord:E.join("")}),letterOptionsContent:e.jsx(F,{letters:o.letters,selectedIndices:B.filter(u=>u!==null),onLetterClick:k,disabled:o.gameState!=="playing",hintIndices:P}),wrongAnswersContent:g.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[t.wrongAttempts,":"]}),e.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:g.map((u,M)=>e.jsx($,{variant:"destructive",children:u},M))})]}),gameControlsContent:o.gameState==="won"&&v!=="competitive"?e.jsxs(m,{onClick:p,className:"w-full bg-green-600 hover:bg-green-700 text-lg py-6",children:[t.next," ",s==="rtl"?e.jsx(O,{className:"ml-2"}):e.jsx(T,{className:"ml-2"})]}):e.jsx(q,{onRemoveLetter:L,onClearAnswer:y,onCheckAnswer:S,onReset:R,onPrevLevel:N,onNextLevel:p,canRemove:G,canClear:A,canCheck:I,canPrev:c>0,canNext:c<C.length-1,gameState:o.gameState,gameMode:v,isKidsMode:!0,labels:{remove:t.remove,clear:t.clear,check:t.check,hint:t.hint,showSolution:t.showSolution,reset:t.reset,prev:t.prev,next:t.next}})})};export{le as default};
