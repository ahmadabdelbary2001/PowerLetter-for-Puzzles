import{f as L,c as I,j as l,C as y,i as N,k as C,l as b,g,d as x,u as R,H as _,B as G,e as H,A as F,a as B,r as u}from"./index-54jaHOut.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],W=L("circle-check-big",P);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],E=L("lightbulb",D),z=({teams:e,currentTeam:c})=>{const{t:n}=I();return l.jsxs(y,{children:[l.jsx(N,{children:l.jsx(C,{className:"text-center",children:n.scoreboard})}),l.jsx(b,{className:"grid gap-2",children:e.map((t,s)=>l.jsxs("div",{className:g("flex justify-between items-center p-3 rounded-lg",s===c?"bg-primary/20":"bg-muted"),children:[l.jsxs("span",{className:"font-medium",children:[t.name," ",s===c&&`(${n.currentTurn})`]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs(x,{variant:"secondary",children:[t.score," ",n.points]}),l.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[l.jsx(E,{className:"w-4 h-4 mr-1 text-yellow-500"}),t.hintsRemaining]})]})]},t.id))})]})};function O({teams:e,currentTeam:c,showHints:n=!0,showScore:t=!0,className:s}){const{t:a}=I();return l.jsx("div",{className:g("flex flex-wrap gap-2 items-center",s),children:e.map((r,i)=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(x,{variant:i===c?"default":"secondary",className:"px-3",children:[r.name,t&&`: ${r.score} ${a.points}`]}),n&&l.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[l.jsx(E,{className:"w-4 h-4 mr-1 text-yellow-500"}),r.hintsRemaining]})]},r.id))})}const J=({children:e,title:c,levelIndex:n,onBack:t,difficulty:s,layoutType:a="text"})=>{const{gameMode:r,teams:i,currentTeam:o}=R(),{t:d,dir:m}=I();return l.jsxs(l.Fragment,{children:[l.jsx(_,{currentView:"play",showLanguage:!1}),l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4 sm:p-6",dir:m,children:l.jsxs("div",{className:g("mx-auto space-y-4 sm:space-y-6",a==="image"?"max-w-xl":"max-w-5xl"),children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[l.jsxs(G,{variant:"ghost",onClick:t,className:"flex items-center gap-2",children:[m==="rtl"?l.jsx(H,{}):l.jsx(F,{})," ",d.back]}),r==="competitive"&&i.length>0&&l.jsx(O,{teams:i,currentTeam:o,showScore:!0})]}),l.jsxs(y,{children:[l.jsx(N,{children:l.jsxs("div",{className:"flex justify-between items-center",children:[s&&l.jsx(x,{variant:s==="easy"?"default":s==="medium"?"secondary":"destructive",children:d[s]}),l.jsx(C,{className:"text-center flex-1 px-4",children:c}),l.jsxs(x,{variant:"secondary",children:[d.level," ",n+1]})]})}),l.jsx(b,{className:g(a==="image"?"space-y-4":"space-y-6"),children:e})]}),r==="competitive"&&i.length>0&&l.jsx(z,{teams:i,currentTeam:o})]})})]})};function $(e,c){switch(c.type){case"RESET":return{slotIndices:Array(c.solutionLen).fill(null),answerSlots:Array(c.solutionLen).fill(""),hintIndices:[],gameState:"playing"};case"PLACE":{const n=e.slotIndices.findIndex(r=>r===c.gridIndex);if(n!==-1){const r=[...e.slotIndices],i=[...e.answerSlots];return r[n]=null,i[n]="",{...e,slotIndices:r,answerSlots:i,gameState:"playing"}}const t=e.slotIndices.indexOf(null);if(t===-1)return e;const s=[...e.slotIndices],a=[...e.answerSlots];return s[t]=c.gridIndex,a[t]=c.letter,{...e,slotIndices:s,answerSlots:a}}case"REMOVE_LAST":{let n=-1;for(let a=e.slotIndices.length-1;a>=0;a--){const r=e.slotIndices[a];if(r!==null&&!e.hintIndices.includes(r)){n=a;break}}if(n<0)return e;const t=[...e.slotIndices],s=[...e.answerSlots];return t[n]=null,s[n]="",{...e,slotIndices:t,answerSlots:s,gameState:"playing"}}case"CLEAR":{const n=e.slotIndices.map(s=>s!==null&&e.hintIndices.includes(s)?s:null),t=n.map((s,a)=>s!==null&&e.hintIndices.includes(s)?e.answerSlots[a]:"");return{...e,slotIndices:n,answerSlots:t,gameState:"playing"}}case"HINT":{const n=c.solution.split(""),t=n.findIndex((o,d)=>e.answerSlots[d]!==o);if(t<0)return e;const s=n[t],a=[...e.slotIndices],r=[...e.answerSlots];for(let o=0;o<a.length;o++){const d=a[o];d!==null&&c.letters[d]===s&&n[o]!==s&&(a[o]=null,r[o]="")}const i=c.letters.findIndex((o,d)=>o===s&&!a.includes(d)&&!e.hintIndices.includes(d));return i<0?e:(a[t]=i,r[t]=s,{...e,slotIndices:a,answerSlots:r,hintIndices:[...e.hintIndices,i]})}case"SHOW":{const n=c.solution.split(""),t=[],s=[];return n.forEach((a,r)=>{const i=c.letters.findIndex((o,d)=>o===a&&!t.includes(d));t[r]=i!==-1?i:null,i!==-1&&!e.slotIndices.includes(i)&&s.push(i)}),{...e,slotIndices:t,answerSlots:n,hintIndices:s,gameState:"won"}}case"CHECK":{const n=a=>a.replace(/\s/g,"").normalize("NFC"),t=n(e.answerSlots.join("")),s=n(c.solution);return t===s?{...e,gameState:"won"}:{...e,gameState:"failed"}}case"SET_GAME_STATE":return{...e,gameState:c.payload};default:return e}}function Q(e,c){const n=B(),{language:t,categories:s,difficulty:a}=c,[r,i]=u.useState([]),[o,d]=u.useState(0),[m,S]=u.useState(!0),[A,j]=u.useState(null),[T,w]=u.useReducer($,{slotIndices:[],answerSlots:[],hintIndices:[],gameState:"playing"}),h=r[o],f=h?.solution.replace(/\s/g,"")??"";u.useEffect(()=>{S(!0),e.loadLevels({language:t,categories:s,difficulty:a}).then(i).finally(()=>S(!1))},[t,s,a,e]);const k=u.useCallback(()=>{o<r.length-1?d(M=>M+1):n("/games")},[o,r.length,n]),p=u.useCallback(()=>{h&&(w({type:"RESET",solutionLen:f.length}),j(null))},[h,f.length]);return u.useEffect(()=>{r.length>0&&p()},[o,r,p]),{loading:m,levels:r,currentLevel:h,currentLevelIndex:o,solution:f,notification:A,setNotification:j,gameState:T,dispatch:w,nextLevel:k,resetLevel:p}}function K(e){for(let c=e.length-1;c>0;c--){const n=Math.floor(Math.random()*(c+1));[e[c],e[n]]=[e[n],e[c]]}return e}const U={easy:{totalLetters:12},medium:{totalLetters:18},hard:{totalLetters:24}},V={totalLetters:10},v={en:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",ar:"ابتثجحخدذرزسشصضطظعغفقكلمنهوي"};function X(e,c,n,t=!1){const s=e.replace(/\s/g,"").split(""),a=t?V:U[c],r=[...s],i=Math.max(a.totalLetters,s.length),o=Math.max(0,i-s.length),d=v[n]||v.en;for(let m=0;m<o;m++)r.push(d[Math.floor(Math.random()*d.length)]);return K(r)}export{W as C,J as G,E as L,X as g,K as s,Q as u};
