import{_ as e,a as D,b as w,u as C,c as V,r as m,j as s,B as O,A as S,e as b}from"./index-DbYgtyFp.js";import{S as k,L as G}from"./LetterGrid-CyaqPx6m.js";import{G as N}from"./GameControls-C1Fw3p9N.js";import{s as M,g as $,u as B,G as z,N as F}from"./Notification-Dabnffqj.js";import{V as K}from"./volume-2-CUwx8nrK.js";import"./GameButton-Coq4T-qq.js";import"./circle-check-big-CXH4RW4X.js";class U{async loadLevels(g){const{language:c,categories:p}=g,l=["animals","fruits","shapes"],f=(p.includes("general")?l:p).map(async u=>{try{const d=`/src/data/${c}/image-clue/${u}/data.json`,o=Object.assign({"/src/data/ar/clue/animals/ar-clue-animals-easy.json":()=>e(()=>import("./ar-clue-animals-easy-B_GJKLA_.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-hard.json":()=>e(()=>import("./ar-clue-animals-hard-7EfMbXs4.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-medium.json":()=>e(()=>import("./ar-clue-animals-medium-Bcn1oCUk.js"),[]),"/src/data/ar/clue/animals/ar-clue-animals-words.json":()=>e(()=>import("./ar-clue-animals-words-DxH5pZeF.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-easy.json":()=>e(()=>import("./ar-clue-geography-easy-B_kcdeCx.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-hard.json":()=>e(()=>import("./ar-clue-geography-hard-BCuCMNGp.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-medium.json":()=>e(()=>import("./ar-clue-geography-medium-CkoNY3Du.js"),[]),"/src/data/ar/clue/geography/ar-clue-geography-words.json":()=>e(()=>import("./ar-clue-geography-words-C7oqRjv9.js"),[]),"/src/data/ar/clue/science/ar-clue-science-easy.json":()=>e(()=>import("./ar-clue-science-easy-f07zg_lU.js"),[]),"/src/data/ar/clue/science/ar-clue-science-hard.json":()=>e(()=>import("./ar-clue-science-hard-CV32qLEY.js"),[]),"/src/data/ar/clue/science/ar-clue-science-medium.json":()=>e(()=>import("./ar-clue-science-medium-BtIrOjNp.js"),[]),"/src/data/ar/clue/science/ar-clue-science-words.json":()=>e(()=>import("./ar-clue-science-words-DpIQpR0-.js"),[]),"/src/data/ar/formation/ar-formation-easy.json":()=>e(()=>import("./ar-formation-easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/ar-formation-hard.json":()=>e(()=>import("./ar-formation-hard-CRxFgu7h.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits/data.json":()=>e(()=>import("./data-CenmuYLK.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/ar-flow-easy.json":()=>e(()=>import("./ar-flow-easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/ar-flow-medium.json":()=>e(()=>import("./ar-flow-medium-BL27Zp8Y.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/clue/animals/en-clue-animals-easy.json":()=>e(()=>import("./en-clue-animals-easy-vc2CgBiI.js"),[]),"/src/data/en/clue/animals/en-clue-animals-hard.json":()=>e(()=>import("./en-clue-animals-hard-BmQiyFGH.js"),[]),"/src/data/en/clue/animals/en-clue-animals-medium.json":()=>e(()=>import("./en-clue-animals-medium-CDppU-oU.js"),[]),"/src/data/en/clue/animals/en-clue-animals-words.json":()=>e(()=>import("./en-clue-animals-words-OyMRQ2OB.js"),[]),"/src/data/en/clue/geography/en-clue-geography-easy.json":()=>e(()=>import("./en-clue-geography-easy-v49lXgS1.js"),[]),"/src/data/en/clue/geography/en-clue-geography-hard.json":()=>e(()=>import("./en-clue-geography-hard-Hc9ZYG1D.js"),[]),"/src/data/en/clue/geography/en-clue-geography-medium.json":()=>e(()=>import("./en-clue-geography-medium-Yt4_5ZKV.js"),[]),"/src/data/en/clue/geography/en-clue-geography-words.json":()=>e(()=>import("./en-clue-geography-words-BJFrdNPX.js"),[]),"/src/data/en/clue/science/en-clue-science-easy.json":()=>e(()=>import("./en-clue-science-easy-CXDUIzZm.js"),[]),"/src/data/en/clue/science/en-clue-science-hard.json":()=>e(()=>import("./en-clue-science-hard-Dqcig8Ht.js"),[]),"/src/data/en/clue/science/en-clue-science-medium.json":()=>e(()=>import("./en-clue-science-medium-Dm_81XWt.js"),[]),"/src/data/en/clue/science/en-clue-science-words.json":()=>e(()=>import("./en-clue-science-words-BdiwMlAj.js"),[]),"/src/data/en/formation/en-formation-easy.json":()=>e(()=>import("./en-formation-easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits/data.json":()=>e(()=>import("./data-OxJ4m8-5.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/en-flow-easy.json":()=>e(()=>import("./en-flow-easy-DqbTaQjR.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])})[d];return o?((await o()).default?.levels||[]).map(t=>typeof t=="object"&&t!==null&&"id"in t&&"image"in t&&"sound"in t&&"solution"in t?{id:String(t.id),image:String(t.image),sound:String(t.sound),solution:String(t.solution)}:null).filter(t=>t!==null):(console.warn(`Module not found for path: ${d}`),[])}catch(d){return console.error(`ImgClueGameEngine: Failed to load levels for ${c}/${u}.`,d),[]}}),i=(await Promise.all(f)).flat();return i.length===0?[{id:"error-level",image:"/assets/images/error.png",sound:"",solution:"ERROR"}]:M(i)}generateLetters(g,c,p){return $(g,c,p,!0)}}const x=new U;function W(){const n=D(),g=w(),{language:c,categories:p,gameMode:l}=C(),{t:E}=V(),{loading:f,levels:y,currentLevel:i,solution:u,notification:d,setNotification:_,gameState:o,dispatch:r,nextLevel:h}=B(x,{language:c,categories:p}),[t,A]=m.useState([]),j=m.useRef(null),T=a=>`${"/PowerLetter-for-Puzzles/".replace(/\/$/,"")}/${a.replace(/^\//,"")}`,R=m.useCallback(()=>{j.current?.play().catch(a=>console.error("Audio play failed:",a))},[]),L=m.useCallback(a=>{o.gameState==="playing"&&r({type:"PLACE",gridIndex:a,letter:t[a]})},[o.gameState,t,r]),I=m.useCallback(()=>r({type:"REMOVE_LAST"}),[r]),v=m.useCallback(()=>r({type:"CLEAR"}),[r]);m.useCallback(()=>{if(o.gameState!=="playing")return;o.answerSlots.join("")===u?(r({type:"SET_GAME_STATE",payload:"won"}),_({message:E.congrats,type:"success"})):(r({type:"SET_GAME_STATE",payload:"failed"}),_({message:E.wrongAnswer,type:"error"}),setTimeout(()=>{r({type:"CLEAR"}),r({type:"SET_GAME_STATE",payload:"playing"}),_(null)},1500))},[o,u,E,r,_]);const P=m.useCallback(()=>n(`/game-mode/${g.gameType}`),[n,g.gameType]);return m.useEffect(()=>{if(i&&x.generateLetters){const a=l==="competitive"&&i.difficulty?i.difficulty:"easy";A(x.generateLetters(i.solution,a,c))}},[i,c,l]),{loading:f,levels:y,currentLevel:i,solution:u,letters:t,notification:d,setNotification:_,audioRef:j,gameState:o.gameState,answerSlots:o.answerSlots,slotIndices:o.slotIndices,hintIndices:o.hintIndices,getAssetPath:T,playSound:R,onLetterClick:L,onRemove:I,onClear:v,nextLevel:h,handleBack:P,dispatch:r}}const ae=()=>{const{t:n,dir:g}=V(),{loading:c,levels:p,currentLevel:l,solution:E,letters:f,notification:y,audioRef:i,gameState:u,answerSlots:d,slotIndices:_,hintIndices:o,getAssetPath:r,playSound:h,onCheck:t,onLetterClick:A,onRemove:j,onClear:T,nextLevel:R,handleBack:L}=W();if(c)return s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsxs("p",{children:[n.loading,"..."]})});if(!l||l.solution==="ERROR")return s.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[s.jsx("p",{className:"text-xl font-semibold",children:n.noLevelsFound}),s.jsx(O,{onClick:L,children:n.back})]});const I=p.findIndex(a=>a.id===l.id),v=y?.message??null,P=y?.type??"info";return s.jsxs(z,{title:n.imageClueTitle,levelIndex:I,onBack:L,layoutType:"image",children:[v&&s.jsx(F,{message:v,type:P}),s.jsxs("div",{className:"relative aspect-video bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:[s.jsx("img",{src:r(l.image),alt:E,className:"max-h-full max-w-full object-contain"}),s.jsx(O,{size:"icon",onClick:h,className:"absolute top-3 right-3 rounded-full bg-black/50 hover:bg-black/70",children:s.jsx(K,{className:"h-6 w-6 text-white"})}),s.jsx("audio",{ref:i,src:r(l.sound),preload:"auto"})]}),s.jsx(k,{solution:E,currentWord:d.join("")}),s.jsx(G,{letters:f,selectedIndices:_.filter(a=>a!==null),onLetterClick:A,disabled:u!=="playing",hintIndices:o}),u==="won"?s.jsxs(O,{onClick:R,className:"w-full bg-green-600 hover:bg-green-700 text-lg py-6",children:[n.next," ",g==="rtl"?s.jsx(S,{className:"ml-2"}):s.jsx(b,{className:"ml-2"})]}):s.jsx(N,{onRemoveLetter:j,onClearAnswer:T,onCheckAnswer:t,canRemove:_.some(a=>a!==null),canClear:_.some(a=>a!==null),canCheck:d.every(a=>a!==""),gameState:u,labels:{remove:n.remove,clear:n.clear,check:n.check,hint:"",showSolution:"",reset:"",prev:"",next:""},isKidsMode:!0})]})};export{ae as default};
