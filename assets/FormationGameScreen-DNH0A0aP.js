import{_ as e,r as u,j as a,c as A,a as D,L as z,e as G}from"./index-Ch-mORm0.js";import{B as F,s as N,u as M,a as W,G as B}from"./GameScreen-DksA4iBX.js";import{R as K,G as T,a as H}from"./GameButton-g6L6rDzI.js";class U extends F{async loadLevels(s){const{language:d,difficulty:t}=s;if(!t)return[];try{const r=this.getModulePath(d,"",t),h=Object.assign({"/src/data/ar/formation/easy.json":()=>e(()=>import("./easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/hard.json":()=>e(()=>import("./hard-DzMXngiv.js"),[]),"/src/data/ar/img-choice/animals/data.json":()=>e(()=>import("./data-6hZ_2-dK.js"),[]),"/src/data/ar/img-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/img-clue/fruits-and-vegetables/data.json":()=>e(()=>import("./data-DlhJ3pZw.js"),[]),"/src/data/ar/img-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/easy.json":()=>e(()=>import("./easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/medium.json":()=>e(()=>import("./medium-DnN41iEv.js"),[]),"/src/data/ar/outside-the-story/animals.json":()=>e(()=>import("./animals-BD_uC3F6.js"),[]),"/src/data/ar/outside-the-story/anime.json":()=>e(()=>import("./anime-X9XTb-jh.js"),[]),"/src/data/ar/outside-the-story/cars.json":()=>e(()=>import("./cars-LFoQ5kcr.js"),[]),"/src/data/ar/outside-the-story/cartoons.json":()=>e(()=>import("./cartoons-9ln4fVtF.js"),[]),"/src/data/ar/outside-the-story/characters.json":()=>e(()=>import("./characters-BClrgWDD.js"),[]),"/src/data/ar/outside-the-story/clothes.json":()=>e(()=>import("./clothes-DZukcyjc.js"),[]),"/src/data/ar/outside-the-story/drinks.json":()=>e(()=>import("./drinks-DWTisQdZ.js"),[]),"/src/data/ar/outside-the-story/foods.json":()=>e(()=>import("./foods-BPEl4jwc.js"),[]),"/src/data/ar/outside-the-story/football.json":()=>e(()=>import("./football-BkDTW0je.js"),[]),"/src/data/ar/outside-the-story/fruits-and-vegetables.json":()=>e(()=>import("./fruits-and-vegetables-CWZ59ral.js"),[]),"/src/data/ar/outside-the-story/gamers.json":()=>e(()=>import("./gamers-DU27ka0Y.js"),[]),"/src/data/ar/outside-the-story/geography.json":()=>e(()=>import("./geography-Bmt1Mp9F.js"),[]),"/src/data/ar/outside-the-story/k-pop.json":()=>e(()=>import("./k-pop-CvncURYW.js"),[]),"/src/data/ar/outside-the-story/science.json":()=>e(()=>import("./science-C1rxd0mO.js"),[]),"/src/data/ar/outside-the-story/series.json":()=>e(()=>import("./series-DgCSJJru.js"),[]),"/src/data/ar/outside-the-story/spy.json":()=>e(()=>import("./spy-CTUdze8o.js"),[]),"/src/data/ar/outside-the-story/sweets.json":()=>e(()=>import("./sweets-0_2hbNMS.js"),[]),"/src/data/ar/phrase-clue/animals/easy.json":()=>e(()=>import("./easy-B_GJKLA_.js"),[]),"/src/data/ar/phrase-clue/animals/hard.json":()=>e(()=>import("./hard-7EfMbXs4.js"),[]),"/src/data/ar/phrase-clue/animals/medium.json":()=>e(()=>import("./medium-Bcn1oCUk.js"),[]),"/src/data/ar/phrase-clue/geography/easy.json":()=>e(()=>import("./easy-B_kcdeCx.js"),[]),"/src/data/ar/phrase-clue/geography/hard.json":()=>e(()=>import("./hard-BCuCMNGp.js"),[]),"/src/data/ar/phrase-clue/geography/medium.json":()=>e(()=>import("./medium-CkoNY3Du.js"),[]),"/src/data/ar/phrase-clue/science/easy.json":()=>e(()=>import("./easy-f07zg_lU.js"),[]),"/src/data/ar/phrase-clue/science/hard.json":()=>e(()=>import("./hard-CV32qLEY.js"),[]),"/src/data/ar/phrase-clue/science/medium.json":()=>e(()=>import("./medium-BtIrOjNp.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/formation/easy.json":()=>e(()=>import("./easy-CqPS8TrH.js"),[]),"/src/data/en/img-choice/animals/data.json":()=>e(()=>import("./data-CtXqoHRL.js"),[]),"/src/data/en/img-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/img-clue/fruits-and-vegetables/data.json":()=>e(()=>import("./data-B6FoT8eG.js"),[]),"/src/data/en/img-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/easy.json":()=>e(()=>import("./easy-DqbTaQjR.js"),[]),"/src/data/en/outside-the-story/animals.json":()=>e(()=>import("./animals-D78oH89-.js"),[]),"/src/data/en/outside-the-story/anime.json":()=>e(()=>import("./anime-DXIlEidq.js"),[]),"/src/data/en/outside-the-story/cars.json":()=>e(()=>import("./cars-Cw03Nxyo.js"),[]),"/src/data/en/outside-the-story/cartoons.json":()=>e(()=>import("./cartoons-DwVIQVvA.js"),[]),"/src/data/en/outside-the-story/characters.json":()=>e(()=>import("./characters-Dl2vwTPn.js"),[]),"/src/data/en/outside-the-story/clothes.json":()=>e(()=>import("./clothes-BiLKpCWj.js"),[]),"/src/data/en/outside-the-story/drinks.json":()=>e(()=>import("./drinks-CP1Emjyy.js"),[]),"/src/data/en/outside-the-story/foods.json":()=>e(()=>import("./foods-BKBSmJG2.js"),[]),"/src/data/en/outside-the-story/football.json":()=>e(()=>import("./football-B8eU_HgW.js"),[]),"/src/data/en/outside-the-story/fruits-and-vegetables.json":()=>e(()=>import("./fruits-and-vegetables-B5narx4J.js"),[]),"/src/data/en/outside-the-story/gamers.json":()=>e(()=>import("./gamers-Dm5Tu0YA.js"),[]),"/src/data/en/outside-the-story/geography.json":()=>e(()=>import("./geography-Dw2uVeLE.js"),[]),"/src/data/en/outside-the-story/k-pop.json":()=>e(()=>import("./k-pop-BnHY6_tE.js"),[]),"/src/data/en/outside-the-story/science.json":()=>e(()=>import("./science-DF1sazzy.js"),[]),"/src/data/en/outside-the-story/series.json":()=>e(()=>import("./series-dqakDLa9.js"),[]),"/src/data/en/outside-the-story/spy.json":()=>e(()=>import("./spy-DLpfZG_H.js"),[]),"/src/data/en/outside-the-story/sweets.json":()=>e(()=>import("./sweets-DDZ5JqsI.js"),[]),"/src/data/en/phrase-clue/animals/easy.json":()=>e(()=>import("./easy-vc2CgBiI.js"),[]),"/src/data/en/phrase-clue/animals/hard.json":()=>e(()=>import("./hard-BmQiyFGH.js"),[]),"/src/data/en/phrase-clue/animals/medium.json":()=>e(()=>import("./medium-CDppU-oU.js"),[]),"/src/data/en/phrase-clue/geography/easy.json":()=>e(()=>import("./easy-v49lXgS1.js"),[]),"/src/data/en/phrase-clue/geography/hard.json":()=>e(()=>import("./hard-Hc9ZYG1D.js"),[]),"/src/data/en/phrase-clue/geography/medium.json":()=>e(()=>import("./medium-Yt4_5ZKV.js"),[]),"/src/data/en/phrase-clue/science/easy.json":()=>e(()=>import("./easy-CXDUIzZm.js"),[]),"/src/data/en/phrase-clue/science/hard.json":()=>e(()=>import("./hard-BPi6SzUA.js"),[]),"/src/data/en/phrase-clue/science/medium.json":()=>e(()=>import("./medium-Dm_81XWt.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])})[r];if(!h)return[];const c=((await h()).default?.levels||[]).map(m=>this.validateLevel(m,t)).filter(m=>m!==null);return c.length===0?[]:c}catch(r){return console.error(`FormationGameEngine: Failed to load levels for ${d}/${t}.`,r),[this.getErrorLevel()]}}getGameId(){return"formation"}getModulePath(s,d,t){return`/src/data/${s}/formation/${t}.json`}validateLevel(s,d){const t=s;return t&&typeof t=="object"&&"id"in t&&"words"in t&&Array.isArray(t.words)&&"grid"in t&&"baseLetters"in t?{id:String(t.id),difficulty:d??"easy",words:t.words,grid:t.grid,baseLetters:String(t.baseLetters),solution:t.words[0]||""}:null}getErrorLevel(){return{id:"error",difficulty:"easy",words:[],grid:[],baseLetters:"ERROR",solution:""}}generateLetters(s){return s?N(s.split("")):[]}}const O=new U;function q(){const i=M({engine:O,gameId:"formation"}),{currentLevel:s,gameModeState:d,nextLevel:t,setNotification:r}=i,{gameMode:E,teams:h,currentTeam:_,consumeHint:o}=d,[c,m]=u.useState([]),[n,p]=u.useState(""),[y,f]=u.useState(new Set),[v,I]=u.useState(new Set),[R,w]=u.useState([]);u.useEffect(()=>{s&&(O.generateLetters&&m(O.generateLetters(s.baseLetters)),f(new Set),p(""),w([]),I(new Set))},[s]);const V=u.useCallback((l,x)=>{R.includes(x)||(p(g=>g+l),w(g=>[...g,x]))},[R]),b=u.useCallback(()=>{p(l=>l.slice(0,-1)),w(l=>l.slice(0,-1))},[]),S=u.useCallback(()=>{m(l=>[...l].sort(()=>Math.random()-.5))},[]),$=u.useCallback(()=>{if(!s||n.length===0)return;const l=new Set(y);if(s.words.includes(n)&&!l.has(n)){l.add(n),f(l);const x=s.words.indexOf(n),g=new Set(v);s.grid.forEach(L=>{L.words.includes(x)&&g.add(`${L.x},${L.y}`)}),I(g),r({messageKey:"wordFound",type:"success"}),l.size===s.words.length&&setTimeout(()=>t(),2e3)}else{const x=l.has(n)?"alreadyFound":"wordNotFound";r({messageKey:x,type:"error"})}p(""),w([])},[n,s,y,v,r,t]),C=u.useCallback(()=>{if(!s)return;if(E==="competitive"&&!o(h[_].id)){r({messageKey:"noMoreHints",type:"error"});return}const l=s.grid.filter(j=>!v.has(`${j.x},${j.y}`));if(l.length===0)return;const x=l[Math.floor(Math.random()*l.length)],g=new Set(v).add(`${x.x},${x.y}`);I(g);const L=[];if(s.words.forEach((j,k)=>{if(y.has(j))return;s.grid.filter(P=>P.words.includes(k)).every(P=>g.has(`${P.x},${P.y}`))&&L.push(j)}),L.length>0){const j=new Set([...y,...L]);f(j),r({messageKey:"wordFound",type:"success"}),j.size===s.words.length&&setTimeout(()=>t(),2e3)}else r({messageKey:"hintUsed",type:"info"})},[s,v,y,E,h,_,o,t,r]);return{...i,letters:c,currentInput:n,revealedCells:v,usedLetterIndices:R,onLetterSelect:V,onRemoveLast:b,onShuffle:S,onCheckWord:$,onHint:C}}const J=({letter:i="",isRevealed:s=!1,isEmpty:d=!1,size:t=40,className:r})=>d?a.jsx("div",{className:A("rounded-md border-2 border-transparent bg-transparent",r),style:{width:`${t}px`,height:`${t}px`}}):a.jsx("div",{className:A("rounded-md flex items-center justify-center font-bold border-2 flex-shrink-0 transition-all duration-300",s?"bg-primary/90 border-primary text-primary-foreground animate-in fade-in zoom-in-50":"bg-card border-border",r),style:{width:`${t}px`,height:`${t}px`,fontSize:`${t*.5}px`},children:s?i:""}),Q=({grid:i,revealedCells:s,className:d})=>{const[t,r]=u.useState(40);if(u.useEffect(()=>{const o=()=>{const c=window.innerWidth;c<380?r(28):c<640?r(32):c<768?r(36):r(40)};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),!i||i.length===0)return null;const E=Math.max(0,...i.map(o=>o.x)),h=Math.max(0,...i.map(o=>o.y)),_=Array.from({length:h+1},()=>Array(E+1).fill(null));return i.forEach(o=>{_[o.y]&&(_[o.y][o.x]=o)}),a.jsx("div",{className:A("flex flex-col gap-0.5 sm:gap-1 w-full overflow-x-auto py-1.5 sm:py-2",d),children:_.map((o,c)=>a.jsx("div",{className:"flex gap-0.5 sm:gap-1 justify-center",children:o.map((m,n)=>a.jsx(J,{letter:m?.letter,isRevealed:s.has(`${n},${c}`),isEmpty:!m,size:t},`${n}-${c}`))},c))})},X=({letters:i,usedLetterIndices:s,onLetterSelect:d,onShuffle:t,className:r})=>{const[E,h]=u.useState(180),[_,o]=u.useState(40),[c,m]=u.useState(24);return u.useEffect(()=>{const n=()=>{const p=window.innerWidth;p<380?(h(120),o(28),m(16)):p<640?(h(140),o(32),m(20)):p<768?(h(160),o(36),m(24)):(h(180),o(40),m(28))};return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),a.jsxs("div",{className:A("relative mx-auto my-0 sm:my-1",r),style:{width:`${E}px`,height:`${E}px`},children:[i.map((n,p)=>{const y=p/i.length*2*Math.PI,f=i.length>6?E*.45:E*.42,v=Math.cos(y)*f,I=Math.sin(y)*f,R=s.includes(p);return a.jsx(D,{onClick:()=>d(n,p),className:A("absolute rounded-full font-bold transition-all",R?"opacity-40 cursor-not-allowed":"hover:scale-105"),style:{width:`${_}px`,height:`${_}px`,fontSize:`${_*.5}px`,top:`calc(50% - ${_/2}px)`,left:`calc(50% - ${_/2}px)`,transform:`translate(${v}px, ${I}px)`},disabled:R,children:n},`${n}-${p}`)}),a.jsx(D,{size:"icon",variant:"ghost",onClick:t,className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full",style:{width:`${_*1.6}px`,height:`${_*1.6}px`},children:a.jsx(K,{className:"text-muted-foreground",style:{width:`${c}px`,height:`${c}px`}})})]})},Y=({gridContent:i,inputDisplayContent:s,letterSelectorContent:d,gameControlsContent:t,...r})=>a.jsx(W,{...r,children:a.jsxs("div",{className:"flex flex-col items-center gap-2 sm:gap-3",children:[i,a.jsx("div",{className:"h-8 sm:h-10 flex justify-center items-center mb-1 sm:mb-2",children:s}),d,a.jsx("div",{className:"flex w-full max-w-xs justify-center gap-1 sm:gap-2 px-1 flex-wrap sm:flex-nowrap items-center",children:t})]})}),Z=({currentLevel:i,currentLevelIndex:s,letters:d,currentInput:t,revealedCells:r,notification:E,onClearNotification:h,usedLetterIndices:_,handleBack:o,onLetterSelect:c,onRemoveLast:m,onShuffle:n,onCheckWord:p,onHint:y,t:f,instructions:v})=>a.jsx(Y,{title:f("formationTitle",{ns:"games"}),levelIndex:s,onBack:o,difficulty:i.difficulty,instructions:v,notification:E,onClearNotification:h,gridContent:a.jsx(Q,{grid:i.grid,revealedCells:r}),inputDisplayContent:a.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary tracking-wider",children:t||"..."}),letterSelectorContent:a.jsx(X,{letters:d,usedLetterIndices:Array.from(_),onLetterSelect:c,onShuffle:n}),gameControlsContent:a.jsxs(a.Fragment,{children:[a.jsx(T,{variant:"outline",onClick:m,disabled:t.length===0,icon:H,className:"flex-1 min-w-[80px] sm:min-w-[100px] py-1.5 sm:py-2 h-auto text-xs sm:text-sm px-2",children:f("remove")}),a.jsx(T,{variant:"outline",onClick:y,disabled:r.size>=i.grid.length,icon:z,className:"flex-1 min-w-[80px] sm:min-w-[100px] py-1.5 sm:py-2 h-auto text-xs sm:text-sm px-2",children:f("hint")}),a.jsx(T,{isPrimary:!0,onClick:p,disabled:t.length<2,icon:G,className:"flex-1 min-w-[120px] sm:min-w-[160px] py-2 sm:py-2.5 h-auto text-xs sm:text-sm px-3.5 text-center whitespace-nowrap font-semibold",children:f("check")})]})}),oe=()=>a.jsx(B,{useGameHook:q,GameComponent:Z});export{oe as default};
