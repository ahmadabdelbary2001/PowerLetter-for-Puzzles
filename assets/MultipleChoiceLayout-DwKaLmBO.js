import{h as S,u as C,b as T,r as s,j as a}from"./index-BBWW6iYL.js";import{a as L,s as z,N as A}from"./Notification-DKoJ7yFs.js";import{G}from"./GameLayout-9azEBHV9.js";/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],M=S("circle-x",O);function P(d){const c=C(),{language:f,categories:l,gameMode:o,gameType:i}=T(),{loading:m,currentLevel:t,nextLevel:p}=L(d,{language:f,categories:l}),[g,w]=s.useState([]),[v,y]=s.useState(null),[h,n]=s.useState("idle"),x=s.useRef(null),u=s.useRef(null),j=e=>`${"/PowerLetter-for-Puzzles".replace(/\/$/,"")}/${e.replace(/^\//,"")}`,b=s.useCallback(()=>{const e=x.current;if(e)try{e.currentTime=0,e.play().catch(r=>console.error("Audio play failed:",r))}catch(r){console.error("Audio control failed:",r)}},[]),N=s.useCallback(e=>{!t||h==="correct"||(y(e),e===t.solution?n("correct"):(n("incorrect"),u.current=window.setTimeout(()=>n("idle"),1200)))},[h,t]),k=s.useCallback(()=>{c(o==="competitive"?`/team-config/${i}`:"/games")},[c,o,i]);return s.useEffect(()=>{t&&(w(z([...t.options])),n("idle"),y(null))},[t]),s.useEffect(()=>{const e=x.current;return()=>{if(u.current&&(clearTimeout(u.current),u.current=null),e)try{e.pause(),e.currentTime=0}catch(r){console.error("Failed to pause/reset audio during cleanup",r)}}},[t]),{loading:m,currentLevel:t,shuffledOptions:g,answerStatus:h,selectedOption:v,audioRef:x,getAssetPath:j,playSound:b,handleOptionClick:N,nextLevel:p,handleBack:k}}const U=({title:d,levelIndex:c,onBack:f,notificationMessage:l,notificationType:o="info",promptContent:i,optionsContent:m,nextButtonContent:t,instructions:p})=>a.jsx(G,{title:d,levelIndex:c,onBack:f,layoutType:"image",instructions:p,children:a.jsxs("div",{className:"flex flex-col items-center justify-center h-full w-full p-4",children:[l&&a.jsx("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 z-50",children:a.jsx(A,{message:l,type:o,duration:1200})}),a.jsx("div",{className:"w-full max-w-md mb-8",children:i}),a.jsx("div",{className:"grid grid-cols-2 gap-4 w-full max-w-md",children:m}),t&&a.jsx("div",{className:"mt-8 w-full max-w-md",children:t})]})});export{M as C,U as M,P as u};
