import{_ as e,u as $,r as l,a as ee,b as te,c as N,j as u,B as ae,d as M}from"./index-BMeGCbr1.js";import{S as se,L as ne,G as re}from"./GameControls-B7U3k1WE.js";import{s as oe,g as le,u as ie,G as ce}from"./gameUtils-DDb8TmhZ.js";class ue{async loadLevels(n){const{language:s,categories:_,difficulty:p}=n,h=["animals","science","geography"],A=(_.includes("general")?h:_).map(async r=>{try{const m=`/src/data/${r.charAt(0).toUpperCase()+r.slice(1)}/${s}/clue/${s}-clue-${r}-${p}.json`,R=Object.assign({"/src/data/Animals/ar/clue/ar-clue-animals-easy.json":()=>e(()=>import("./ar-clue-animals-easy-B_GJKLA_.js"),[]),"/src/data/Animals/ar/clue/ar-clue-animals-hard.json":()=>e(()=>import("./ar-clue-animals-hard-7EfMbXs4.js"),[]),"/src/data/Animals/ar/clue/ar-clue-animals-medium.json":()=>e(()=>import("./ar-clue-animals-medium-Bcn1oCUk.js"),[]),"/src/data/Animals/ar/clue/ar-clue-animals-words.json":()=>e(()=>import("./ar-clue-animals-words-DxH5pZeF.js"),[]),"/src/data/Animals/ar/image-clue/data.json":()=>e(()=>import("./data-DK8CfFPE.js"),[]),"/src/data/Animals/ar/word-choice/data.json":()=>e(()=>import("./data-CtZNGJR9.js"),[]),"/src/data/Animals/en/clue/en-clue-animals-easy.json":()=>e(()=>import("./en-clue-animals-easy-vc2CgBiI.js"),[]),"/src/data/Animals/en/clue/en-clue-animals-hard.json":()=>e(()=>import("./en-clue-animals-hard-BmQiyFGH.js"),[]),"/src/data/Animals/en/clue/en-clue-animals-medium.json":()=>e(()=>import("./en-clue-animals-medium-CDppU-oU.js"),[]),"/src/data/Animals/en/clue/en-clue-animals-words.json":()=>e(()=>import("./en-clue-animals-words-OyMRQ2OB.js"),[]),"/src/data/Animals/en/image-clue/data.json":()=>e(()=>import("./data-DWMyu4A6.js"),[]),"/src/data/Animals/en/word-choice/data.json":()=>e(()=>import("./data-aBYoMs23.js"),[]),"/src/data/Fruits/ar/image-clue/data.json":()=>e(()=>import("./data-CenmuYLK.js"),[]),"/src/data/Fruits/en/image-clue/data.json":()=>e(()=>import("./data-OxJ4m8-5.js"),[]),"/src/data/Geography/ar/clue/ar-clue-geography-easy.json":()=>e(()=>import("./ar-clue-geography-easy-B_kcdeCx.js"),[]),"/src/data/Geography/ar/clue/ar-clue-geography-hard.json":()=>e(()=>import("./ar-clue-geography-hard-BCuCMNGp.js"),[]),"/src/data/Geography/ar/clue/ar-clue-geography-medium.json":()=>e(()=>import("./ar-clue-geography-medium-CkoNY3Du.js"),[]),"/src/data/Geography/ar/clue/ar-clue-geography-words.json":()=>e(()=>import("./ar-clue-geography-words-C7oqRjv9.js"),[]),"/src/data/Geography/en/clue/en-clue-geography-easy.json":()=>e(()=>import("./en-clue-geography-easy-v49lXgS1.js"),[]),"/src/data/Geography/en/clue/en-clue-geography-hard.json":()=>e(()=>import("./en-clue-geography-hard-Hc9ZYG1D.js"),[]),"/src/data/Geography/en/clue/en-clue-geography-medium.json":()=>e(()=>import("./en-clue-geography-medium-Yt4_5ZKV.js"),[]),"/src/data/Geography/en/clue/en-clue-geography-words.json":()=>e(()=>import("./en-clue-geography-words-BJFrdNPX.js"),[]),"/src/data/Science/ar/clue/ar-clue-science-easy.json":()=>e(()=>import("./ar-clue-science-easy-f07zg_lU.js"),[]),"/src/data/Science/ar/clue/ar-clue-science-hard.json":()=>e(()=>import("./ar-clue-science-hard-CV32qLEY.js"),[]),"/src/data/Science/ar/clue/ar-clue-science-medium.json":()=>e(()=>import("./ar-clue-science-medium-BtIrOjNp.js"),[]),"/src/data/Science/ar/clue/ar-clue-science-words.json":()=>e(()=>import("./ar-clue-science-words-DpIQpR0-.js"),[]),"/src/data/Science/en/clue/en-clue-science-easy.json":()=>e(()=>import("./en-clue-science-easy-CXDUIzZm.js"),[]),"/src/data/Science/en/clue/en-clue-science-hard.json":()=>e(()=>import("./en-clue-science-hard-Dqcig8Ht.js"),[]),"/src/data/Science/en/clue/en-clue-science-medium.json":()=>e(()=>import("./en-clue-science-medium-Dm_81XWt.js"),[]),"/src/data/Science/en/clue/en-clue-science-words.json":()=>e(()=>import("./en-clue-science-words-BdiwMlAj.js"),[]),"/src/data/Shapes/ar/image-clue/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/Shapes/en/image-clue/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[])})[m];if(!R)return console.warn(`Module not found for path: ${m}`),[];const x=await R();return(x.default?.levels||x.levels||[]).map(E=>{if(typeof E=="object"&&E!==null){const i=E;return{id:String(i.id??`${p}-${Math.random().toString(36).slice(2,8)}`),clue:String(i.clue??""),solution:String(i.solution??""),difficulty:p}}return null}).filter(E=>E!==null)}catch(g){return console.error(`ClueGameEngine: Failed to load levels for ${s}/${r}/${p}.`,g),[]}}),L=(await Promise.all(A)).flat();return L.length===0?[{id:"error-level",difficulty:"easy",clue:"Could not load levels for the selected categories.",solution:"ERROR"}]:oe(L)}generateLetters(n,s,_){return le(n,s,_,!1)}}const G=new ue;function de(a){const{gameState:n,slotIndices:s,answerSlots:_,hintIndices:p}=a,{gameMode:h,teams:d,currentTeam:A}=$(),T=l.useMemo(()=>n!=="playing"?!1:s.some(m=>m!==null&&!p.includes(m)),[n,s,p]),L=l.useMemo(()=>n!=="playing"?!1:s.filter(m=>m!==null).length>p.length,[n,s,p]),r=l.useMemo(()=>n!=="playing"?!1:_.every(m=>m!==""),[n,_]),g=l.useMemo(()=>n!=="playing"?!1:h==="competitive"?(d[A]?.hintsRemaining??0)>0:!0,[n,h,d,A]);return{canRemove:T,canClear:L,canCheck:r,canHint:g}}function me(){const a=ee(),n=te(),s=$(),{language:_,categories:p,difficulty:h,gameMode:d,updateScore:A,currentTeam:T,setCurrentTeam:L,teams:r,nextTurn:g,consumeHint:m}=s,{t:y}=N(),{loading:R,levels:x,currentLevel:v,currentLevelIndex:E,solution:i,notification:P,setNotification:o,gameState:c,dispatch:t,nextLevel:S,resetLevel:C}=ie(G,{language:_,categories:p,difficulty:h}),[f,V]=l.useState([]),[j,w]=l.useState([]),[k,b]=l.useState(new Set),{canRemove:H,canClear:B,canCheck:W,canHint:F}=de(c),z=l.useCallback(D=>{c.gameState==="playing"&&t({type:"PLACE",gridIndex:D,letter:f[D]})},[c.gameState,f,t]),K=l.useCallback(()=>t({type:"REMOVE_LAST"}),[t]),U=l.useCallback(()=>t({type:"CLEAR"}),[t]),q=l.useCallback(()=>{if(c.gameState!=="playing")return;if(c.answerSlots.join("")===i){t({type:"SET_GAME_STATE",payload:"won"});const I=v?.difficulty==="medium"?20:v?.difficulty==="hard"?30:10;d==="competitive"?(A(r[T].id,I),o({message:`${y.congrats} +${I}`,type:"success"}),setTimeout(()=>{S(),t({type:"SET_GAME_STATE",payload:"playing"}),o(null)},2e3)):o({message:y.congrats,type:"success"})}else{t({type:"SET_GAME_STATE",payload:"failed"});const I=c.answerSlots.join("");if(I&&!j.includes(I)&&w(O=>[...O,I]),o({message:y.wrongAnswer,type:"error"}),d==="competitive"){const O=new Set(k);O.add(T),b(O),O.size===r.length?setTimeout(()=>{t({type:"SHOW",solution:i,letters:f}),o({message:`${y.solutionWas}: ${i}`,type:"error"}),b(new Set),setTimeout(()=>{S(),t({type:"SET_GAME_STATE",payload:"playing"}),o(null)},2500)},2e3):setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),o(null),g("lose")},2e3)}else setTimeout(()=>{t({type:"CLEAR"}),t({type:"SET_GAME_STATE",payload:"playing"}),o(null)},2e3)}},[c,i,v,d,r,T,A,g,S,y,j,t,o,k,f]),J=l.useCallback(()=>{c.gameState==="playing"&&(t({type:"SHOW",solution:i,letters:f}),o({message:`${y.solutionWas}: ${i}`,type:"error"}),d==="competitive"&&setTimeout(()=>{g("lose"),S(),t({type:"SET_GAME_STATE",payload:"playing"}),o(null)},2500))},[c.gameState,i,f,d,g,S,y.solutionWas,t,o]),Q=l.useCallback(()=>{if(d==="competitive"&&!m(r[T].id)){o({message:y.noHintsLeft,type:"error"}),setTimeout(()=>o(null),2e3);return}t({type:"HINT",solution:i,letters:f})},[d,r,T,m,y.noHintsLeft,i,f,t,o]),X=l.useCallback(async()=>{},[]),Y=l.useCallback(()=>a(`/game-mode/${n.gameType}`),[a,n.gameType]),Z=l.useCallback(()=>{E>0&&C()},[E,C]);return l.useEffect(()=>{v&&G.generateLetters&&V(G.generateLetters(v.solution,v.difficulty,_)),r.length>0&&L(E%r.length),w([])},[v,_,r.length,E,L]),{loading:R,levels:x,currentLevel:v,solution:i,letters:f,notification:P,wrongAnswers:j,gameState:c.gameState,answerSlots:c.answerSlots,slotIndices:c.slotIndices,hintIndices:c.hintIndices,currentLevelIndex:E,onCheck:q,onShow:J,onLetterClick:z,onRemove:K,onClear:U,onHint:Q,nextLevel:S,prevLevel:Z,handleBack:Y,handleRevealOrListSolutions:X,resetLevel:C,canRemove:H,canClear:B,canCheck:W,canHint:F}}const Ee=()=>{const{t:a}=N(),{loading:n,currentLevel:s,solution:_,letters:p,notification:h,wrongAnswers:d,gameState:A,answerSlots:T,slotIndices:L,hintIndices:r,currentLevelIndex:g,levels:m,onCheck:y,onShow:R,onLetterClick:x,onRemove:v,onClear:E,onHint:i,nextLevel:P,prevLevel:o,handleBack:c,resetLevel:t,canRemove:S,canClear:C,canCheck:f,canHint:V}=me();return n?u.jsx("div",{className:"flex justify-center items-center h-screen",children:u.jsxs("p",{children:[a.loading,"..."]})}):!s||s.solution==="ERROR"?u.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[u.jsx("p",{className:"text-xl font-semibold",children:a.noLevelsFound}),u.jsx(ae,{onClick:c,children:a.back})]}):u.jsxs(ce,{title:s.clue,levelIndex:g,onBack:c,children:[u.jsx("div",{className:"absolute top-4 right-4",children:u.jsx(M,{variant:s.difficulty==="easy"?"default":s.difficulty==="medium"?"secondary":"destructive",children:a[s.difficulty]})}),u.jsx(se,{solution:_,currentWord:T.join("")}),u.jsx(ne,{letters:p,selectedIndices:L.filter(j=>j!==null),onLetterClick:x,disabled:A!=="playing",hintIndices:r}),d.length>0&&u.jsxs("div",{className:"mt-2",children:[u.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[a.wrongAttempts,":"]}),u.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 justify-center",children:d.map((j,w)=>u.jsx(M,{variant:"destructive",className:"text-xs py-1",children:j},w))})]}),h&&u.jsx("div",{role:"status",className:`text-center p-3 rounded-lg font-semibold ${h.type==="error"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:h.message}),u.jsx(re,{onRemoveLetter:v,onClearAnswer:E,onCheckAnswer:y,onHint:i,onShowSolution:R,onReset:t,onPrevLevel:o,onNextLevel:P,canRemove:S,canClear:C,canCheck:f,canHint:V,canPrev:g>0,canNext:g<m.length-1,gameState:A,isKidsMode:!1,labels:{remove:a.remove,clear:a.clear,check:a.check,hint:a.hint,showSolution:a.showSolution,reset:a.reset,prev:a.prev,next:a.next}})]})};export{Ee as default};
