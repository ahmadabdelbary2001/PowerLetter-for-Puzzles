import{r as v,G,_ as e,u as N,a as $,b as x,c as C,j as _,B as M,d as H}from"./index-C9MvggcE.js";import{u as W,L as z,S as B}from"./useGameControls-BVVeKojQ.js";import{G as F}from"./GameControls-yjg-q2qt.js";import{u as K,s as Y,g as q,N as J,a as Q}from"./Notification-C0AQb71H.js";import{G as U}from"./GameLayout-B3gkV5r3.js";import"./GameButton-C68-AiuT.js";import"./circle-check-big-11ICdQmn.js";function X({engine:o,language:a,categories:u,difficulty:m}){const{loading:n,levels:r,currentLevel:g,currentLevelIndex:c,solution:d,notification:l,setNotification:i,gameState:s,dispatch:t,nextLevel:h,prevLevel:f,resetLevel:p}=K(o,{language:a,categories:u,difficulty:m}),E=v.useCallback(L=>{i(L),L&&setTimeout(()=>{i(null)},2500)},[i]),j=v.useCallback(L=>{s.gameState==="playing"&&t({type:"PLACE",gridIndex:L,letter:s.letters[L]})},[s,t]),A=v.useCallback(()=>{t({type:"REMOVE_LAST"})},[t]),R=v.useCallback(()=>{t({type:"CLEAR"})},[t]);return{loading:n,levels:r,currentLevel:g,currentLevelIndex:c,solution:d,notification:l,setNotification:E,gameState:s,dispatch:t,nextLevel:h,prevLevel:f,resetLevel:p,letters:s.letters,onLetterClick:j,onRemove:A,onClear:R}}class Z{async loadLevels(a){const{language:u,categories:m,difficulty:n}=a;let r;m.includes("general")?r=G.find(s=>s.id==="clue")?.availableCategories?.filter(s=>s!=="general")??[]:r=m;const g=Object.assign({"/src/data/ar/clue/animals/easy.json":()=>e(()=>import("./easy-B_GJKLA_.js"),[]),"/src/data/ar/clue/animals/hard.json":()=>e(()=>import("./hard-7EfMbXs4.js"),[]),"/src/data/ar/clue/animals/medium.json":()=>e(()=>import("./medium-Bcn1oCUk.js"),[]),"/src/data/ar/clue/geography/easy.json":()=>e(()=>import("./easy-B_kcdeCx.js"),[]),"/src/data/ar/clue/geography/hard.json":()=>e(()=>import("./hard-BCuCMNGp.js"),[]),"/src/data/ar/clue/geography/medium.json":()=>e(()=>import("./medium-CkoNY3Du.js"),[]),"/src/data/ar/clue/science/easy.json":()=>e(()=>import("./easy-f07zg_lU.js"),[]),"/src/data/ar/clue/science/hard.json":()=>e(()=>import("./hard-CV32qLEY.js"),[]),"/src/data/ar/clue/science/medium.json":()=>e(()=>import("./medium-BtIrOjNp.js"),[]),"/src/data/ar/formation/easy.json":()=>e(()=>import("./easy-CuHzQLY1.js"),[]),"/src/data/ar/formation/hard.json":()=>e(()=>import("./hard-DzMXngiv.js"),[]),"/src/data/ar/image-clue/animals/data.json":()=>e(()=>import("./data-USJTiWy0.js"),[]),"/src/data/ar/image-clue/fruits-and-vegetables/data.json":()=>e(()=>import("./data-DlhJ3pZw.js"),[]),"/src/data/ar/image-clue/shapes/data.json":()=>e(()=>import("./data-B126H-NP.js"),[]),"/src/data/ar/letter-flow/easy.json":()=>e(()=>import("./easy-C68xgLTr.js"),[]),"/src/data/ar/letter-flow/medium.json":()=>e(()=>import("./medium-DnN41iEv.js"),[]),"/src/data/ar/outside-the-story/animals.json":()=>e(()=>import("./animals-BD_uC3F6.js"),[]),"/src/data/ar/outside-the-story/anime.json":()=>e(()=>import("./anime-X9XTb-jh.js"),[]),"/src/data/ar/outside-the-story/cars.json":()=>e(()=>import("./cars-LFoQ5kcr.js"),[]),"/src/data/ar/outside-the-story/cartoons.json":()=>e(()=>import("./cartoons-9ln4fVtF.js"),[]),"/src/data/ar/outside-the-story/characters.json":()=>e(()=>import("./characters-BClrgWDD.js"),[]),"/src/data/ar/outside-the-story/clothes.json":()=>e(()=>import("./clothes-DZukcyjc.js"),[]),"/src/data/ar/outside-the-story/drinks.json":()=>e(()=>import("./drinks-DWTisQdZ.js"),[]),"/src/data/ar/outside-the-story/foods.json":()=>e(()=>import("./foods-BPEl4jwc.js"),[]),"/src/data/ar/outside-the-story/football.json":()=>e(()=>import("./football-BkDTW0je.js"),[]),"/src/data/ar/outside-the-story/fruits-and-vegetables.json":()=>e(()=>import("./fruits-and-vegetables-CWZ59ral.js"),[]),"/src/data/ar/outside-the-story/gamers.json":()=>e(()=>import("./gamers-DU27ka0Y.js"),[]),"/src/data/ar/outside-the-story/geography.json":()=>e(()=>import("./geography-Bmt1Mp9F.js"),[]),"/src/data/ar/outside-the-story/k-pop.json":()=>e(()=>import("./k-pop-CvncURYW.js"),[]),"/src/data/ar/outside-the-story/science.json":()=>e(()=>import("./science-C1rxd0mO.js"),[]),"/src/data/ar/outside-the-story/series.json":()=>e(()=>import("./series-DgCSJJru.js"),[]),"/src/data/ar/outside-the-story/spy.json":()=>e(()=>import("./spy-CTUdze8o.js"),[]),"/src/data/ar/outside-the-story/sweets.json":()=>e(()=>import("./sweets-0_2hbNMS.js"),[]),"/src/data/ar/picture-choice/animals/data.json":()=>e(()=>import("./data-6hZ_2-dK.js"),[]),"/src/data/ar/word-choice/animals/data.json":()=>e(()=>import("./data-Bij5nysW.js"),[]),"/src/data/en/clue/animals/easy.json":()=>e(()=>import("./easy-vc2CgBiI.js"),[]),"/src/data/en/clue/animals/hard.json":()=>e(()=>import("./hard-BmQiyFGH.js"),[]),"/src/data/en/clue/animals/medium.json":()=>e(()=>import("./medium-CDppU-oU.js"),[]),"/src/data/en/clue/geography/easy.json":()=>e(()=>import("./easy-v49lXgS1.js"),[]),"/src/data/en/clue/geography/hard.json":()=>e(()=>import("./hard-Hc9ZYG1D.js"),[]),"/src/data/en/clue/geography/medium.json":()=>e(()=>import("./medium-Yt4_5ZKV.js"),[]),"/src/data/en/clue/science/easy.json":()=>e(()=>import("./easy-CXDUIzZm.js"),[]),"/src/data/en/clue/science/hard.json":()=>e(()=>import("./hard-BPi6SzUA.js"),[]),"/src/data/en/clue/science/medium.json":()=>e(()=>import("./medium-Dm_81XWt.js"),[]),"/src/data/en/formation/easy.json":()=>e(()=>import("./easy-CqPS8TrH.js"),[]),"/src/data/en/image-clue/animals/data.json":()=>e(()=>import("./data-BYo_61tt.js"),[]),"/src/data/en/image-clue/fruits-and-vegetables/data.json":()=>e(()=>import("./data-B6FoT8eG.js"),[]),"/src/data/en/image-clue/shapes/data.json":()=>e(()=>import("./data-Bu1Ld6Qx.js"),[]),"/src/data/en/letter-flow/easy.json":()=>e(()=>import("./easy-DqbTaQjR.js"),[]),"/src/data/en/outside-the-story/animals.json":()=>e(()=>import("./animals-D78oH89-.js"),[]),"/src/data/en/outside-the-story/anime.json":()=>e(()=>import("./anime-DXIlEidq.js"),[]),"/src/data/en/outside-the-story/cars.json":()=>e(()=>import("./cars-Cw03Nxyo.js"),[]),"/src/data/en/outside-the-story/cartoons.json":()=>e(()=>import("./cartoons-DwVIQVvA.js"),[]),"/src/data/en/outside-the-story/characters.json":()=>e(()=>import("./characters-Dl2vwTPn.js"),[]),"/src/data/en/outside-the-story/clothes.json":()=>e(()=>import("./clothes-BiLKpCWj.js"),[]),"/src/data/en/outside-the-story/drinks.json":()=>e(()=>import("./drinks-CP1Emjyy.js"),[]),"/src/data/en/outside-the-story/foods.json":()=>e(()=>import("./foods-BKBSmJG2.js"),[]),"/src/data/en/outside-the-story/football.json":()=>e(()=>import("./football-B8eU_HgW.js"),[]),"/src/data/en/outside-the-story/fruits-and-vegetables.json":()=>e(()=>import("./fruits-and-vegetables-B5narx4J.js"),[]),"/src/data/en/outside-the-story/gamers.json":()=>e(()=>import("./gamers-Dm5Tu0YA.js"),[]),"/src/data/en/outside-the-story/geography.json":()=>e(()=>import("./geography-Dw2uVeLE.js"),[]),"/src/data/en/outside-the-story/k-pop.json":()=>e(()=>import("./k-pop-BnHY6_tE.js"),[]),"/src/data/en/outside-the-story/science.json":()=>e(()=>import("./science-DF1sazzy.js"),[]),"/src/data/en/outside-the-story/series.json":()=>e(()=>import("./series-dqakDLa9.js"),[]),"/src/data/en/outside-the-story/spy.json":()=>e(()=>import("./spy-DLpfZG_H.js"),[]),"/src/data/en/outside-the-story/sweets.json":()=>e(()=>import("./sweets-DDZ5JqsI.js"),[]),"/src/data/en/picture-choice/animals/data.json":()=>e(()=>import("./data-CtXqoHRL.js"),[]),"/src/data/en/word-choice/animals/data.json":()=>e(()=>import("./data-BDxquZu-.js"),[])}),c=r.map(async i=>{try{const s=`/src/data/${u}/clue/${i}/${n}.json`,t=g[s];if(!t)return console.warn(`ClueGameEngine: Module not found for path: ${s}`),[];const h=await t();return(h.default?.levels||h.levels||[]).map(p=>{if(typeof p=="object"&&p!==null){const E=p;return{id:String(E.id??`${n}-${Math.random().toString(36).slice(2,8)}`),clue:String(E.clue??""),solution:String(E.solution??""),difficulty:n}}return null}).filter(p=>p!==null)}catch(s){return console.error(`ClueGameEngine: Failed to load levels for ${u}/${i}/${n}.`,s),[]}}),l=(await Promise.all(c)).flat();return l.length===0?[{id:"error-level",difficulty:"easy",clue:"Could not load levels for the selected categories.",solution:"ERROR"}]:Y(l)}generateLetters(a,u,m){return q(a,u,m,!1)}}const ee=new Z;function te(){const o=N(),a=$(),{language:u,categories:m,difficulty:n,gameMode:r,updateScore:g,teams:c,currentTeam:d,nextTurn:l,consumeHint:i}=x(),{t:s}=C(),t=X({engine:ee,language:u,categories:m,difficulty:n}),[h,f]=v.useState([]),[p,E]=v.useState(new Set),{canRemove:j,canClear:A,canCheck:R,canHint:L}=W(t.gameState),I=v.useCallback(()=>{if(t.gameState.gameState!=="playing")return;if(t.gameState.answerSlots.join("")===t.solution){t.dispatch({type:"SET_GAME_STATE",payload:"won"});const y=t.currentLevel?.difficulty==="medium"?20:t.currentLevel?.difficulty==="hard"?30:10;r==="competitive"?(g(c[d].id,y),t.setNotification({message:`${s.congrats} +${y}`,type:"success"}),setTimeout(()=>{t.nextLevel(),E(new Set)},2e3)):t.setNotification({message:s.congrats,type:"success"})}else{t.dispatch({type:"SET_GAME_STATE",payload:"failed"});const y=t.gameState.answerSlots.join("");if(y&&!h.includes(y)&&f(T=>[...T,y]),t.setNotification({message:s.wrongAnswer,type:"error"}),r==="competitive"){const T=new Set(p).add(d);E(T),T.size===c.length?setTimeout(()=>{t.dispatch({type:"SHOW",solution:t.solution,letters:t.letters}),t.setNotification({message:`${s.solutionWas}: ${t.solution}`,type:"error"}),setTimeout(()=>{t.nextLevel(),E(new Set)},2500)},2e3):setTimeout(()=>{t.dispatch({type:"CLEAR"}),t.dispatch({type:"SET_GAME_STATE",payload:"playing"}),l("lose")},2e3)}}},[t,r,c,d,g,l,s,h,p]),O=v.useCallback(()=>{t.gameState.gameState==="playing"&&(t.dispatch({type:"SHOW",solution:t.solution,letters:t.letters}),t.setNotification({message:`${s.solutionWas}: ${t.solution}`,type:"error"}),r==="competitive"&&setTimeout(()=>{t.nextLevel(),E(new Set)},2500))},[t,r,s.solutionWas]),P=v.useCallback(()=>{if(r==="competitive"&&!i(c[d].id)){t.setNotification({message:s.noHintsLeft,type:"error"});return}t.dispatch({type:"HINT",solution:t.solution,letters:t.letters})},[t,r,c,d,i,s.noHintsLeft]),D=v.useCallback(()=>{o(r==="competitive"?`/team-config/${a.gameType}`:`/game-mode/${a.gameType}`)},[o,a.gameType,r]);return v.useEffect(()=>{f([])},[t.currentLevelIndex]),{...t,wrongAnswers:h,onCheck:I,onShow:O,onHint:P,handleBack:D,canRemove:j,canClear:A,canCheck:R,canHint:L}}const se=({title:o,levelIndex:a,onBack:u,difficulty:m,instructions:n,notification:r,promptContent:g,solutionContent:c,letterOptionsContent:d,gameControlsContent:l,wrongAnswersContent:i})=>{const s=r?.message??null,t=r?.type??"info";return _.jsxs(U,{title:o,levelIndex:a,onBack:u,difficulty:m,instructions:n,children:[s&&_.jsx(J,{message:s,type:t}),g,c,d,i,l]})},de=()=>{const{t:o}=C(),a=Q("clue"),{gameMode:u}=x(),{loading:m,currentLevel:n,solution:r,letters:g,notification:c,wrongAnswers:d,gameState:l,currentLevelIndex:i,levels:s,onCheck:t,onShow:h,onLetterClick:f,onRemove:p,onClear:E,onHint:j,nextLevel:A,prevLevel:R,handleBack:L,resetLevel:I,canRemove:O,canClear:P,canCheck:D,canHint:S}=te();if(m)return _.jsx("div",{className:"flex justify-center items-center h-screen",children:_.jsxs("p",{children:[o.loading,"..."]})});if(!n||n.solution==="ERROR")return _.jsxs("div",{className:"flex flex-col justify-center items-center h-screen gap-4 p-4 text-center",children:[_.jsx("p",{className:"text-xl font-semibold",children:o.noLevelsFound}),_.jsx(M,{onClick:L,children:o.back})]});const y=a?{title:a.title,description:a.description??"",steps:a.steps??[]}:void 0,{answerSlots:T,slotIndices:w,hintIndices:k}=l;return _.jsx(se,{title:n.clue,levelIndex:i,onBack:L,difficulty:n.difficulty,instructions:y,notification:c,promptContent:null,solutionContent:_.jsx(B,{solution:r,currentWord:T.join("")}),letterOptionsContent:_.jsx(z,{letters:g,selectedIndices:w.filter(V=>V!==null),onLetterClick:f,disabled:l.gameState!=="playing",hintIndices:k}),wrongAnswersContent:d.length>0&&_.jsxs("div",{className:"mt-2",children:[_.jsxs("p",{className:"text-sm text-muted-foreground mb-1",children:[o.wrongAttempts,":"]}),_.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:d.map((V,b)=>_.jsx(H,{variant:"destructive",children:V},b))})]}),gameControlsContent:_.jsx(F,{onRemoveLetter:p,onClearAnswer:E,onCheckAnswer:t,onHint:j,onShowSolution:h,onReset:I,onPrevLevel:R,onNextLevel:A,canRemove:O,canClear:P,canCheck:D,canHint:S,canPrev:i>0,canNext:i<s.length-1,gameState:l.gameState,gameMode:u,isKidsMode:!1,labels:{remove:o.remove,clear:o.clear,check:o.check,hint:o.hint,showSolution:o.showSolution,reset:o.reset,prev:o.prev,next:o.next}})})};export{de as default};
